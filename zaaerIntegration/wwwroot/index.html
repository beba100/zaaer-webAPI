<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zaaer Integration API </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --vs-blue: #007ACC;
            --vs-dark-blue: #005A9E;
            --vs-light-blue: #E3F2FD;
            --vs-gray: #F5F5F5;
            --vs-dark-gray: #333333;
            --vs-light-gray: #E0E0E0;
            --vs-success: #28A745;
            --vs-warning: #FFC107;
            --vs-danger: #DC3545;
            --vs-info: #17A2B8;
        }

        body {
            background-color: var(--vs-gray);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: var(--vs-dark-gray);
        }

        .main-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin: 20px auto;
            padding: 30px;
            max-width: 1200px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--vs-light-blue);
        }

        .header h1 {
            color: var(--vs-blue);
            font-weight: 600;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1rem;
        }

        .header .partner-note {
            font-size: 0.95rem;
            color: #666;
            margin-top: 10px;
            font-style: italic;
            line-height: 1.4;
        }

        .header .partner-note .new-field {
            color: #28A745;
            font-weight: 700;
        }

        .section-card {
            background: white;
            border: 1px solid var(--vs-light-gray);
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            color: var(--vs-blue);
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
        }

        .btn-primary {
            background-color: var(--vs-blue);
            border-color: var(--vs-blue);
            border-radius: 6px;
            padding: 8px 16px;
            font-weight: 500;
        }

        .btn-primary:hover {
            background-color: var(--vs-dark-blue);
            border-color: var(--vs-dark-blue);
        }

        .btn-outline-primary {
            color: var(--vs-blue);
            border-color: var(--vs-blue);
            border-radius: 6px;
            padding: 8px 16px;
            font-weight: 500;
        }

        .btn-outline-primary:hover {
            background-color: var(--vs-blue);
            border-color: var(--vs-blue);
        }

        .form-control, .form-select {
            border: 1px solid var(--vs-light-gray);
            border-radius: 6px;
            padding: 10px 12px;
            font-size: 14px;
        }

        .form-control:focus, .form-select:focus {
            border-color: var(--vs-blue);
            box-shadow: 0 0 0 0.2rem rgba(0, 122, 204, 0.25);
        }

        .table {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .table thead {
            background-color: var(--vs-blue);
            color: white;
        }

        .table tbody tr:hover {
            background-color: var(--vs-light-blue);
        }

        .json-editor {
            background-color: #f8f9fa;
            border: 1px solid var(--vs-light-gray);
            border-radius: 6px;
            padding: 15px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            min-height: 200px;
            width: 100%;
            resize: vertical;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner-border {
            color: var(--vs-blue);
        }

        .alert {
            border-radius: 6px;
            border: none;
            padding: 12px 16px;
            margin-bottom: 15px;
        }

        .hotel-selector-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            background: white;
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border: 2px solid var(--vs-blue);
        }

        .hotel-selector-container i {
            color: var(--vs-blue);
            font-size: 1.2rem;
        }

        .hotel-selector-container select {
            border: 1px solid var(--vs-light-gray);
            border-radius: 6px;
            padding: 8px 12px;
            font-size: 14px;
            font-weight: 500;
            color: var(--vs-dark-gray);
            background-color: white;
            cursor: pointer;
            min-width: 200px;
        }

        .hotel-selector-container select:focus {
            outline: none;
            border-color: var(--vs-blue);
            box-shadow: 0 0 0 0.2rem rgba(0, 122, 204, 0.25);
        }

        .hotel-selector-container .hotel-label {
            font-weight: 600;
            color: var(--vs-dark-gray);
            font-size: 14px;
        }

        .endpoint-card {
            background: var(--vs-light-blue);
            border: 1px solid var(--vs-blue);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .method-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-right: 10px;
        }

        .method-post {
            background-color: var(--vs-success);
            color: white;
        }

        .method-put {
            background-color: var(--vs-warning);
            color: black;
        }

        .method-get {
            background-color: var(--vs-info);
            color: white;
        }

        .method-delete {
            background-color: var(--vs-danger);
            color: white;
        }

        .response-section {
            background-color: #f8f9fa;
            border: 1px solid var(--vs-light-gray);
            border-radius: 6px;
            padding: 15px;
            margin-top: 15px;
        }

        .response-json {
            background-color: #2d3748;
            color: #e2e8f0;
            border-radius: 6px;
            padding: 15px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }

        /* small NEW badge for sidebar items */
        .badge-new {
            font-size: 10px;
            font-weight: 600;
            color: #1a202c;
            background: #ffe08a;
            border-radius: 10px;
            padding: 1px 6px;
            margin-left: 6px;
            vertical-align: middle;
            display: inline-block;
        }
        .badge-new i { margin-right: 3px; }

        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: 400px;
            background-color: var(--vs-blue);
            color: white;
            padding: 20px;
            z-index: 1000;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            overflow-y: auto; /* enable vertical scroll */
            overflow-x: hidden;
        }

        .sidebar.open {
            transform: translateX(0);
        }

        .sidebar-header {
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar-menu li {
            margin-bottom: 10px;
        }

        .sidebar-menu a {
            color: white;
            text-decoration: none;
            padding: 10px 15px;
            border-radius: 6px;
            display: block;
            transition: background-color 0.3s ease;
        }

        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            font-weight: 600;
            transform: translateX(5px);
            transition: all 0.3s ease;
        }

        .sidebar-menu a.active {
            background-color: rgba(255, 255, 255, 0.3);
            border-left: 3px solid white;
            padding-left: 12px;
        }

        .sidebar-toggle {
            position: fixed;
            left: 20px;
            top: 20px;
            z-index: 1001;
            background-color: var(--vs-blue);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 10px;
            cursor: pointer;
        }

        .main-content {
            margin-left: 0;
            transition: margin-left 0.3s ease;
        }

        .main-content.sidebar-open {
            margin-left: 420px; /* sidebar width (400) + small spacing */
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <h4><i class="fas fa-code"></i> zaaer API</h4>
        </div>
        <ul class="sidebar-menu">
            <li><a href="#" class="active" onclick="showSection('customers', true)"><i class="fas fa-users"></i> Customers</a></li>
            <li><a href="#" onclick="showSection('reservations', true)"><i class="fas fa-calendar-check"></i> Reservations <span class="badge-new" title="New today"><i class="fas fa-star"></i>New</span></a></li>
            <li><a href="#" onclick="showSection('receipts', true)"><i class="fas fa-receipt"></i> Receipts</a></li>
            <li><a href="#" onclick="showSection('invoices', true)"><i class="fas fa-file-invoice"></i> Invoices</a></li>
            <li><a href="#" onclick="showSection('refunds', true)"><i class="fas fa-undo"></i> Refunds</a></li>
            <li><a href="#" onclick="showSection('credit-notes', true)"><i class="fas fa-file-invoice-dollar"></i> Credit Notes</a></li>
            <li><a href="#" onclick="showSection('room-types', true)"><i class="fas fa-bed"></i> Room Types</a></li>
            <li><a href="#" onclick="showSection('base-rates', true)"><i class="fas fa-dollar-sign"></i> Base Rates</a></li>
            <li><a href="#" onclick="showSection('seasonal-rates', true)"><i class="fas fa-calendar-alt"></i> Seasonal Rates</a></li>
            <li><a href="#" onclick="showSection('rate-types', true)"><i class="fas fa-tags"></i> Rate Types <span class="badge-new" title="New today"><i class="fas fa-star"></i>New</span></a></li>
            <li><a href="#" onclick="showSection('banks', true)"><i class="fas fa-university"></i> Banks</a></li>
            <li><a href="#" onclick="showSection('expenses', true)"><i class="fas fa-file-invoice-dollar"></i> Expenses</a></li>
                <li><a href="#" onclick="showSection('building-floors', true)"><i class="fas fa-building"></i> Building + Floors</a></li>
                <li><a href="#" onclick="showSection('users', true)"><i class="fas fa-users"></i> Users</a></li>
                <li><a href="#" onclick="showSection('roles', true)"><i class="fas fa-user-shield"></i> Roles</a></li>
            <li><a href="#" onclick="showSection('apartments', true)"><i class="fas fa-home"></i> Apartments</a></li>
            <li><a href="#" onclick="showSection('maintenance', true)"><i class="fas fa-tools"></i> Maintenance</a></li>
            <li><a href="#" onclick="showSection('taxes', true)"><i class="fas fa-percent"></i> Taxes</a></li>
            <li><a href="#" onclick="showSection('hotel-settings', true)"><i class="fas fa-hotel"></i> Hotel Settings</a></li>
            <!-- ZATCA Details (under Hotel Settings) -->
            <li><a href="#" onclick="showSection('zatca', true)"><i class="fas fa-file-invoice"></i> ZATCA Details</a></li>
            <li><a href="#" onclick="showSection('reservation-tools', true)"><i class="fas fa-search"></i> Reservation Tools</a></li>
            <!-- <li><a href="#" onclick="showSection('reservation-rates', true)"><i class="fas fa-money-bill"></i> Reservation Unit Day Rates <span class="badge-new" title="New today"><i class="fas fa-star"></i>New</span></a></li> -->
            <li><a href="#" onclick="showSection('reservation-switch', true)"><i class="fas fa-exchange-alt"></i> Reservation Unit Switch</a></li>
            <li><a href="#" onclick="showSection('integration-responses', true)"><i class="fas fa-plug"></i> Integration Responses</a></li>
            <li><a href="#" onclick="showSection('activity-logs', true)"><i class="fas fa-stream"></i> Activity Logs</a></li>
            <li><a href="#" onclick="showSection('shomoos', true)"><i class="fas fa-key"></i> Shomoos Details</a></li>
            <li><a href="#" onclick="showSection('ntmp', true)"><i class="fas fa-toggle-on"></i> NTMP Details</a></li>
                    </ul>
    </div>

    <!-- Sidebar Toggle Button -->
    <button class="sidebar-toggle" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
    </button>

    <div class="container-fluid">
        <div class="main-container main-content" id="mainContent">
            <!-- Header -->
            <div class="header">
                <h1><i class="fas fa-code"></i> zaaer Integration API Tester</h1>
                <p>Test zaaer Integration API Endpoints</p>
                
                <!-- Hotel Selector -->
                <div class="hotel-selector-container">
                    <i class="fas fa-hotel"></i>
                    <span class="hotel-label">الفندق:</span>
                    <select id="hotelSelector" onchange="changeHotel()">
                        <option value="">جاري التحميل...</option>
                    </select>
                </div>
                <!-- Partner Note -->
                <p class="partner-note">
                    <span class="new-field">✓ NEW:</span> Added <span class="new-field">zaaer_id</span> field to all tables • 
                    <span style="text-decoration: line-through; color: #999;">externalRefNo</span> field removed from all tables
                </p>
                <!-- ZATCA Details (under Hotel Settings) -->
                <div class="section-card" id="zatca-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-file-invoice"></i>
                    ZATCA Details
                </div>
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/ZaaerZatcaDetails
                    </h5>
                    <p class="text-muted">Create ZATCA details for a hotel</p>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createZatcaJson" class="json-editor" rows="16">{
  "zaaerId": null,
  "hotelId": 1,
  "companyName": "Company Name",
  "taxNumber": "123456789",
  "groupTaxId": null,
  "corporateRegistrationNumber": "1010123456",
  "environment": "Sandbox",
  "otp": "000000",
  "address": "Address text",
  "streetName": "Street 1",
  "buildingNumber": "10",
  "plotIdentification": "PI-001",
  "citySubdivisionName": "District",
  "city": "Riyadh",
  "postalZone": "11564",
  "countrySubEntity": "SA-01",
  "companyRegistrationName": "CRN Name"
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerZatcaDetails()"><i class="fas fa-plus"></i> Create ZATCA</button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createZatcaJson')"><i class="fas fa-code"></i> Format JSON</button>
                        </div>
                    </div>
                    <div id="createZatcaResponse" class="response-section" style="display:none;">
                        <h6>Response:</h6>
                        <div id="createZatcaResponseJson" class="response-json"></div>
                    </div>
                </div>

                

                

                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerZatcaDetails/{detailsId}
                    </h5>
                    <p class="text-muted">Update ZATCA details</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Details ID:</label>
                            <input type="number" id="updateZatcaId" class="form-control" placeholder="Enter Details ID">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateZatcaJson" class="json-editor" rows="12">{
  "companyName": "Updated Company",
  "environment": "Production",
  "otp": "999999"
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerZatcaDetails()"><i class="fas fa-edit"></i> Update ZATCA</button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateZatcaJson')"><i class="fas fa-code"></i> Format JSON</button>
                        </div>
                    </div>
                    <div id="updateZatcaResponse" class="response-section" style="display:none;">
                        <h6>Response:</h6>
                        <div id="updateZatcaResponseJson" class="response-json"></div>
                    </div>
                </div>

                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerZatcaDetails/hotel/{hotelId}
                    </h5>
                    <p class="text-muted">Get all ZATCA details for a hotel</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Hotel ID:</label>
                            <input type="number" id="getZatcaHotelId" class="form-control" placeholder="Enter Hotel ID" value="1">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getZaaerZatcaDetailsByHotel()" style="margin-top:25px;"><i class="fas fa-list"></i> Get All ZATCA</button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetZatcaResponse()" style="margin-top:25px;"><i class="fas fa-code"></i> Beautify JSON</button>
                        </div>
                    </div>
                    <div id="getZatcaResponse" class="response-section" style="display:none;">
                        <h6>Response:</h6>
                        <div id="getZatcaResponseJson" class="response-json"></div>
                    </div>
                </div>
                </div>

                <!-- Integration Responses Section (moved outside ZATCA) -->
                <div class="section-card" id="integration-responses-section" style="display: none;">
                    <div class="section-title">
                        <i class="fas fa-plug"></i>
                        Integration Responses
                    </div>

                    <!-- Create Integration Response -->
                    <div class="endpoint-card">
                        <h5>
                            <span class="method-badge method-post">POST</span>
                            /api/zaaer/ZaaerIntegrationResponses
                        </h5>
                        <p class="text-muted">Partners can POST a response record (with hotelId).</p>
                        <div class="mb-3">
                            <label class="form-label">Request Body (JSON):</label>
                            <textarea id="createIntegrationResponseJson" class="json-editor" rows="12">{
  "zaaerId": null,
  "hotelId": 1,
  "resNo": "RES-1001",
  "service": "NTMP",
  "eventType": "Create",
  "unitNumber": "A-101",
  "guest": "John Doe",
  "errorMessage": null,
  "status": "Success"
}</textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <button class="btn btn-success" onclick="createIntegrationResponse()"><i class="fas fa-plus"></i> Create</button>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-outline-success" onclick="formatJson('createIntegrationResponseJson')"><i class="fas fa-code"></i> Format JSON</button>
                            </div>
                        </div>
                        <div id="createIntegrationResponseSection" class="response-section" style="display:none;">
                            <h6>Response:</h6>
                            <div id="createIntegrationResponseResult" class="response-json"></div>
                        </div>
                    </div>

                    <!-- Update Integration Response -->
                    <div class="endpoint-card">
                        <h5>
                            <span class="method-badge method-put">PUT</span>
                            /api/zaaer/ZaaerIntegrationResponses/{responseId}
                        </h5>
                        <p class="text-muted">Partners can update a response by id.</p>
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label class="form-label">Response ID:</label>
                                <input type="number" id="updateIntegrationResponseId" class="form-control" placeholder="Enter Response ID">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Request Body (JSON):</label>
                            <textarea id="updateIntegrationResponseJson" class="json-editor" rows="12">{
  "zaaerId": null,
  "hotelId": 1,
  "resNo": "RES-1001",
  "service": "Shomoos",
  "eventType": "Update",
  "unitNumber": "A-101",
  "guest": "John Doe",
  "errorMessage": "Some error",
  "status": "Error"
}</textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <button class="btn btn-warning" onclick="updateIntegrationResponse()"><i class="fas fa-edit"></i> Update</button>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-outline-warning" onclick="formatJson('updateIntegrationResponseJson')"><i class="fas fa-code"></i> Format JSON</button>
                            </div>
                        </div>
                        <div id="updateIntegrationResponseSection" class="response-section" style="display:none;">
                            <h6>Response:</h6>
                            <div id="updateIntegrationResponseResult" class="response-json"></div>
                        </div>
                    </div>
                </div>

                <!-- Zaaer Reservations (Documentation) -->
                <div class="section-card" id="reservations-section" style="display: none;">
                    <div class="section-title">
                        <i class="fas fa-bed"></i>
                        Zaaer Reservations
                    </div>

                    <!-- Create Reservation (POST) -->
                    <div class="endpoint-card">
                        <h5>
                            <span class="method-badge method-post">POST</span>
                            /api/zaaer/ZaaerReservation
                        </h5>
                        <p class="text-muted">Create reservation; if reservationNo exists for the same hotel, backend updates it (idempotent).</p>
                        <div class="mb-3">
                            <label class="form-label">Request Body (JSON):</label>
                            <textarea id="createZaaerReservationJson" class="json-editor" rows="44">{
  "zaaerId": 858,
  "reservationNo": "REV0030",
  "hotelId": 11,
  "customerId": 131,
  "reservationDate": "2025-11-05T21:32:05Z",
  "rentalType": "daily",
  "numberOfMonths": 1,
  "totalPenalties": 0,
  "totalDiscounts": "0.00",
  "totalNights": 1,
  "totalAmount": "80.00",
  "totalExtra": "0.00",
  "amountPaid": "0.00",
  "balanceAmount": "-80.00",
  "status": "checked_in",
  "createdBy": 19,
  "externalRefNo": 858,
  "subtotal": "67.87",
  "vatRate": "15.00",
  "vatAmount": "10.4400",
  "lodgingTaxRate": "2.50",
  "lodgingTaxAmount": "1.7000",
  "totalTaxAmount": 12.139999999999999,
  "corporateId": null,
  "reservationType": "individual",
  "visitPurposeId": 1,
  "isAutoExtend": false,
  "priceTypeId": 1,
  "checkInDate": "2025-11-05T11:00:00Z",
  "checkOutDate": "2025-11-06T10:00:00Z",
  "departureDate": "2025-11-06T10:00:00Z",
  "reservationUnits": [
    {
      "zaaerId": 1741,
      "reservationId": 858,
      "apartmentId": 539,
      "checkInDate": "2025-11-05T11:00:00Z",
      "checkOutDate": "2025-11-06T10:00:00Z",
      "departureDate": "2025-11-06T10:00:00Z",
      "numberOfNights": 1,
      "rentAmount": "0.000000",
      "vatRate": 15,
      "vatAmount": 0,
      "lodgingTaxRate": 0,
      "lodgingTaxAmount": 0,
      "totalAmount": 0,
      "status": "checked_in"
    }
  ]
}</textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <button class="btn btn-outline-secondary" onclick="formatJson('createZaaerReservationJson')"><i class="fas fa-code"></i> Format JSON</button>
                            </div>
                        </div>
                    </div>

                    <!-- Update Reservation (PUT) by zaaerId -->
                    <div class="endpoint-card">
                        <h5>
                            <span class="method-badge method-put">PUT</span>
                            /api/zaaer/ZaaerReservation/zaaer/{zaaerId}
                        </h5>
                        <p class="text-muted">Update an existing reservation by zaaerId (stored on reservations table).</p>
                        <div class="mb-3">
                            <label class="form-label">Request Body (JSON):</label>
                            <textarea id="updateZaaerReservationJson" class="json-editor" rows="30">{
  "zaaerId": 839,
  "reservationNo": "REV0011",
  "hotelId": 11,
  "customerId": 126,
  "reservationDate": "2025-11-03T22:16:31Z",
  "rentalType": "daily",
  "numberOfMonths": 1,
  "totalPenalties": 0,
  "totalDiscounts": "0.00",
  "totalNights": 1,
  "totalAmount": "100.00",
  "totalExtra": "5.00",
  "amountPaid": "0.00",
  "balanceAmount": "-100.00",
  "status": "checked_in",
  "createdBy": null,
  "externalRefNo": 839,
  "subtotal": "84.84",
  "vatRate": 15,
  "vatAmount": 0,
  "lodgingTaxRate": 0,
  "lodgingTaxAmount": 0,
  "totalTaxAmount": 15.16,
  "corporateId": null,
  "reservationType": "individual",
  "visitPurposeId": 1,
  "isAutoExtend": false,
  "priceTypeId": 1,
  "checkInDate": "2025-11-03T11:00:00Z",
  "checkOutDate": "2025-11-04T10:00:00Z",
  "departureDate": "2025-11-04T10:00:00Z",
  "reservationUnits": [
    {
      "zaaerId": 1694,
      "reservationId": 839,
      "apartmentId": 534,
      "checkInDate": "2025-11-03T11:00:00Z",
      "checkOutDate": "2025-11-04T10:00:00Z",
      "departureDate": "2025-11-04T10:00:00Z",
      "numberOfNights": 1,
      "rentAmount": "0.000000",
      "vatRate": 15,
      "vatAmount": 0,
      "lodgingTaxRate": 0,
      "lodgingTaxAmount": 0,
      "totalAmount": 0,
      "status": "checked_in"
    }
  ]
}</textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <button class="btn btn-outline-secondary" onclick="formatJson('updateZaaerReservationJson')"><i class="fas fa-code"></i> Format JSON</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Shomoos Details (under Hotel Settings) -->
                <div class="section-card" id="shomoos-section" style="display: none;">
                    <div class="section-title">
                        <i class="fas fa-key"></i>
                        Shomoos Details
                    </div>

                    <!-- Create Shomoos Details -->
                    <div class="endpoint-card">
                        <h5>
                            <span class="method-badge method-post">POST</span>
                            /api/zaaer/ZaaerShomoosDetails
                        </h5>
                        <p class="text-muted">Create Shomoos settings for a hotel</p>
                        <div class="mb-3">
                            <label class="form-label">Request Body (JSON):</label>
                            <textarea id="createShomoosJson" class="json-editor" rows="12">{
  "zaaerId": null,
  "hotelId": 1,
  "isActive": true,
  "userId": "user01",
  "branchCode": "BR-001",
  "branchSecret": "secret-value",
  "languageCode": "ar"
}</textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <button class="btn btn-success" onclick="createZaaerShomoosDetails()"><i class="fas fa-plus"></i> Create Shomoos</button>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-outline-success" onclick="formatJson('createShomoosJson')"><i class="fas fa-code"></i> Format JSON</button>
                            </div>
                        </div>
                        <div id="createShomoosResponse" class="response-section" style="display:none;">
                            <h6>Response:</h6>
                            <div id="createShomoosResponseJson" class="response-json"></div>
                        </div>
                    </div>

                    <!-- Update Shomoos Details -->
                    <div class="endpoint-card">
                        <h5>
                            <span class="method-badge method-put">PUT</span>
                            /api/zaaer/ZaaerShomoosDetails/{detailsId}
                        </h5>
                        <p class="text-muted">Update Shomoos settings</p>
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label class="form-label">Details ID:</label>
                                <input type="number" id="updateShomoosId" class="form-control" placeholder="Enter Details ID">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Request Body (JSON):</label>
                            <textarea id="updateShomoosJson" class="json-editor" rows="10">{
  "isActive": false,
  "userId": "user02",
  "branchCode": "BR-002",
  "branchSecret": "new-secret",
  "languageCode": "en"
}</textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <button class="btn btn-warning" onclick="updateZaaerShomoosDetails()"><i class="fas fa-edit"></i> Update Shomoos</button>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-outline-warning" onclick="formatJson('updateShomoosJson')"><i class="fas fa-code"></i> Format JSON</button>
                            </div>
                        </div>
                        <div id="updateShomoosResponse" class="response-section" style="display:none;">
                            <h6>Response:</h6>
                            <div id="updateShomoosResponseJson" class="response-json"></div>
                        </div>
                    </div>

                    <!-- Get All Shomoos Details -->
                    <div class="endpoint-card">
                        <h5>
                            <span class="method-badge method-get">GET</span>
                            /api/zaaer/ZaaerShomoosDetails
                        </h5>
                        <p class="text-muted">Get all Shomoos settings</p>
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <button class="btn btn-info" onclick="getAllZaaerShomoosDetails()" style="margin-top:25px;"><i class="fas fa-list"></i> Get All Shomoos</button>
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-outline-info" onclick="formatGetAllShomoosResponse()" style="margin-top:25px;"><i class="fas fa-code"></i> Beautify JSON</button>
                            </div>
                        </div>
                        <div id="getAllShomoosResponse" class="response-section" style="display:none;">
                            <h6>Response:</h6>
                            <div id="getAllShomoosResponseJson" class="response-json"></div>
                        </div>
                    </div>
                </div>

                <!-- NTMP Details (under Hotel Settings) -->
                <div class="section-card" id="ntmp-section" style="display: none;">
                    <div class="section-title">
                        <i class="fas fa-toggle-on"></i>
                        NTMP Details
                    </div>

                    <!-- Create NTMP Details -->
                    <div class="endpoint-card">
                        <h5>
                            <span class="method-badge method-post">POST</span>
                            /api/zaaer/ZaaerNtmpDetails
                        </h5>
                        <p class="text-muted">Create NTMP gateway settings for a hotel</p>
                        <div class="mb-3">
                            <label class="form-label">Request Body (JSON):</label>
                            <textarea id="createNtmpJson" class="json-editor" rows="12">{
  "zaaerId": null,
  "hotelId": 1,
  "isActive": true,
  "gatewayApiKey": "YOUR-API-KEY",
  "userName": "ntmp_user",
  "password": "Secret@123"
}</textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <button class="btn btn-success" onclick="createZaaerNtmpDetails()"><i class="fas fa-plus"></i> Create NTMP</button>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-outline-success" onclick="formatJson('createNtmpJson')"><i class="fas fa-code"></i> Format JSON</button>
                            </div>
                        </div>
                        <div id="createNtmpResponse" class="response-section" style="display:none;">
                            <h6>Response:</h6>
                            <div id="createNtmpResponseJson" class="response-json"></div>
                        </div>
                    </div>

                    <!-- Update NTMP Details -->
                    <div class="endpoint-card">
                        <h5>
                            <span class="method-badge method-put">PUT</span>
                            /api/zaaer/ZaaerNtmpDetails/{detailsId}
                        </h5>
                        <p class="text-muted">Update NTMP settings (any field)</p>
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label class="form-label">Details ID:</label>
                                <input type="number" id="updateNtmpId" class="form-control" placeholder="Enter Details ID">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Request Body (JSON):</label>
                            <textarea id="updateNtmpJson" class="json-editor" rows="10">{
  "isActive": false,
  "gatewayApiKey": "NEW-KEY",
  "userName": "ntmp_admin",
  "password": "NewSecret@123"
}</textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <button class="btn btn-warning" onclick="updateZaaerNtmpDetails()"><i class="fas fa-edit"></i> Update NTMP</button>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-outline-warning" onclick="formatJson('updateNtmpJson')"><i class="fas fa-code"></i> Format JSON</button>
                            </div>
                        </div>
                        <div id="updateNtmpResponse" class="response-section" style="display:none;">
                            <h6>Response:</h6>
                            <div id="updateNtmpResponseJson" class="response-json"></div>
                        </div>
                    </div>

                    <!-- Get All NTMP Details -->
                    <div class="endpoint-card">
                        <h5>
                            <span class="method-badge method-get">GET</span>
                            /api/zaaer/ZaaerNtmpDetails
                        </h5>
                        <p class="text-muted">Get all NTMP settings across hotels</p>
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <button class="btn btn-info" onclick="getAllZaaerNtmpDetails()" style="margin-top:25px;"><i class="fas fa-list"></i> Get All NTMP</button>
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-outline-info" onclick="formatGetAllNtmpResponse()" style="margin-top:25px;"><i class="fas fa-code"></i> Beautify JSON</button>
                            </div>
                        </div>
                        <div id="getAllNtmpResponse" class="response-section" style="display:none;">
                            <h6>Response:</h6>
                            <div id="getAllNtmpResponseJson" class="response-json"></div>
                        </div>
                    </div>
                </div>


                
            <!-- Seasonal Rates Section (under RoomTypeRate) -->
            <div class="section-card" id="seasonal-rates-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-calendar-alt"></i>
                    Zaaer Seasonal Rates Management
                </div>

                <!-- Create Seasonal Rate -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/ZaaerSeasonalRate
                    </h5>
                    <p class="text-muted">Create a new seasonal rate header with per-room-type items</p>

                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                            <textarea id="createSeasonalRateJson" class="json-editor" rows="16">{
  "zaaerId": null,
  "hotelId": 1,
  "title": "Summer 2026",
  "description": "Eid + Summer",
  "dateFrom": "2026-06-01",
  "dateTo": "2026-08-31",
  "items": [
    { "roomTypeId": 254, "dailyRateLowWeekdays": 120.00, "dailyRateHighWeekdays": 180.00, "otaRateLowWeekdays": 130.00, "otaRateHighWeekdays": 190.00 }
  ]
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerSeasonalRate()">
                                <i class="fas fa-plus"></i> Create Seasonal Rate
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createSeasonalRateJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="createSeasonalRateResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createSeasonalRateResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Seasonal Rates by Hotel -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerSeasonalRate/hotel/{hotelId}
                    </h5>
                    <p class="text-muted">Get all seasonal rates for a hotel</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Hotel ID:</label>
                            <input type="number" id="getAllSeasonalRatesHotelId" class="form-control" placeholder="Enter Hotel ID" value="1">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getAllZaaerSeasonalRates()" style="margin-top:25px;"><i class="fas fa-list"></i> Get All Seasonal Rates</button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetAllSeasonalRatesResponse()" style="margin-top:25px;"><i class="fas fa-code"></i> Beautify JSON</button>
                        </div>
                    </div>
                    <div id="getAllSeasonalRatesResponse" class="response-section" style="display:none;">
                        <h6>Response:</h6>
                        <div id="getAllSeasonalRatesResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Seasonal Rate -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerSeasonalRate/{seasonId}
                    </h5>
                    <p class="text-muted">Update seasonal rate header and upsert items by room type</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Season ID:</label>
                            <input type="number" id="updateSeasonId" class="form-control" placeholder="Enter Season ID">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                            <textarea id="updateSeasonalRateJson" class="json-editor" rows="16">{
  "zaaerId": null,
  "hotelId": 1,
  "title": "Summer 2026 (Updated)",
  "items": [
    { "roomTypeId": 254, "dailyRateLowWeekdays": 125.00, "dailyRateHighWeekdays": 185.00, "otaRateLowWeekdays": 135.00, "otaRateHighWeekdays": 195.00 }
  ]
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerSeasonalRate()">
                                <i class="fas fa-edit"></i> Update Seasonal Rate
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateSeasonalRateJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="updateSeasonalRateResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateSeasonalRateResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Activity Logs Section -->
            <div class="section-card" id="activity-logs-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-stream"></i>
                    Activity Logs
                </div>

                <!-- Create Activity Log -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/ZaaerActivityLogs
                    </h5>
                    <p class="text-muted">Send an activity log (this simulates Zaaer sending to your API)</p>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                            <textarea id="createActivityLogJson" class="json-editor" rows="12">{
  "zaaerId": null,
  "hotelId": 1,
  "eventKey": "ReservationTotalChanged",
  "message": "Reservation total amount has been changed from 100.00 to 200.00 for reservation REV0027",
  "reservationId": 27,
  "unitId": 24,
  "refType": "Reservation",
  "refId": 27,
  "refNo": "REV0027",
  "amountFrom": 100.00,
  "amountTo": 200.00,
  "createdBy": "zaaer-bridge"
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createActivityLog()"><i class="fas fa-paper-plane"></i> Send Log</button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createActivityLogJson')"><i class="fas fa-code"></i> Format JSON</button>
                        </div>
                    </div>
                    <div id="createActivityLogResponse" class="response-section" style="display:none;">
                        <h6>Response:</h6>
                        <div id="createActivityLogResponseJson" class="response-json"></div>
                    </div>
                </div>

            </div>

            <!-- Rate Types Section -->
            <div class="section-card" id="rate-types-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-tags"></i>
                    Zaaer Rate Types Management
                </div>

                <!-- Create Rate Type -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/ZaaerRateType
                    </h5>
                    <p class="text-muted">Create a new rate type with unit items</p>

                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                            <textarea id="createRateTypeJson" class="json-editor" rows="20">{
  "zaaerId": null,
  "hotelId": 1,
  "shortCode": "WEEKEND",
  "title": "Weekend Rate",
  "status": true,
  "unitItems": [
    { "unitTypeName": "Twin Room", "rate": 150.00, "isEnabled": true },
    { "unitTypeName": "Triple Room", "rate": 200.00, "isEnabled": true },
    { "unitTypeName": "Quadruple", "rate": 250.00, "isEnabled": false }
  ]
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerRateType()">
                                <i class="fas fa-plus"></i> Create Rate Type
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createRateTypeJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="createRateTypeResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createRateTypeResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Rate Types by Hotel -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerRateType/hotel/{hotelId}
                    </h5>
                    <p class="text-muted">Get all rate types for a hotel</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Hotel ID:</label>
                            <input type="number" id="getAllRateTypesHotelId" class="form-control" placeholder="Enter Hotel ID" value="1">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getAllZaaerRateTypes()" style="margin-top:25px;"><i class="fas fa-list"></i> Get All Rate Types</button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetAllRateTypesResponse()" style="margin-top:25px;"><i class="fas fa-code"></i> Beautify JSON</button>
                        </div>
                    </div>
                    <div id="getAllRateTypesResponse" class="response-section" style="display:none;">
                        <h6>Response:</h6>
                        <div id="getAllRateTypesResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Rate Type by ZaaerId -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerRateType/{zaaerId}
                    </h5>
                    <p class="text-muted">Update rate type by ZaaerId (Zaaer external ID)</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Zaaer ID:</label>
                            <input type="number" id="updateRateTypeZaaerId" class="form-control" placeholder="Enter Zaaer ID">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateRateTypeJson" class="json-editor" rows="20">{
  "zaaerId": 12,
  "hotelId": 11,
  "shortCode": "WEEKEND-UPDATED",
  "title": "Weekend Rate (Updated)",
  "status": true,
  "unitItems": [
    { "unitTypeName": "غ واسالة", "rate": 12, "isEnabled": true }
  ]
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerRateType()">
                                <i class="fas fa-edit"></i> Update Rate Type
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateRateTypeJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="updateRateTypeResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateRateTypeResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Delete Rate Type by ZaaerId -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-delete">DELETE</span>
                        /api/zaaer/ZaaerRateType/{zaaerId}
                    </h5>
                    <p class="text-muted">Delete a rate type by ZaaerId (Zaaer external ID)</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Zaaer ID:</label>
                            <input type="number" id="deleteRateTypeZaaerId" class="form-control" placeholder="Enter Zaaer ID">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-danger" onclick="deleteZaaerRateType()" style="margin-top:25px;">
                                <i class="fas fa-trash"></i> Delete Rate Type
                            </button>
                        </div>
                    </div>
                    <div id="deleteRateTypeResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="deleteRateTypeResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Reservation Unit Switch Section -->
            <div class="section-card" id="reservation-switch-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-exchange-alt"></i>
                    Reservation Unit Switch
                </div>

                <!-- Create Switch -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/ZaaerReservationUnitSwitch
                    </h5>
                    <p class="text-muted">Create a switch from one apartment to another for a reservation unit</p>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createReservationUnitSwitchJson" class="json-editor" rows="12">{
  "reservationId": 24,
  "unitId": 24,
  "fromApartmentId": 3103,
  "toApartmentId": 3104,
  "applyMode": "SamePrice",
  "effectiveDate": null,
  "comment": "Switch to similar twin room"
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createReservationUnitSwitch()"><i class="fas fa-exchange-alt"></i> Create Switch</button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createReservationUnitSwitchJson')"><i class="fas fa-code"></i> Format JSON</button>
                        </div>
                    </div>
                    <div id="createReservationUnitSwitchResponse" class="response-section" style="display:none;">
                        <h6>Response:</h6>
                        <div id="createReservationUnitSwitchResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get Switches by Reservation -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerReservationUnitSwitch/reservation/{reservationId}
                    </h5>
                    <p class="text-muted">List switch history for a reservation</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Reservation ID:</label>
                            <input type="number" id="getReservationUnitSwitchReservationId" class="form-control" placeholder="Enter Reservation ID" value="24">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getReservationUnitSwitches()" style="margin-top:25px;"><i class="fas fa-list"></i> Get Switches</button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatReservationUnitSwitchesResponse()" style="margin-top:25px;"><i class="fas fa-code"></i> Beautify JSON</button>
                        </div>
                    </div>
                    <div id="getReservationUnitSwitchesResponse" class="response-section" style="display:none;">
                        <h6>Response:</h6>
                        <div id="getReservationUnitSwitchesResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>
            <!-- Reservation Unit Day Rates (Standalone) - COMMENTED OUT -->
            <!--
            <div class="section-card" id="reservation-rates-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-money-bill"></i>
                    Reservation Unit Day Rates
                </div>

                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerReservationRates/{reservationId}
                    </h5>
                    <p class="text-muted">Fetch per-night manual rates for a reservation</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Reservation ID:</label>
                            <input type="number" id="getRatesReservationId_rates" class="form-control" placeholder="Enter Reservation ID" value="24">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getReservationRates_Sidebar()" style="margin-top:25px;"><i class="fas fa-list"></i> Get Rates</button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatReservationRatesResponse_Sidebar()" style="margin-top:25px;"><i class="fas fa-code"></i> Beautify JSON</button>
                        </div>
                    </div>
                    <div id="getReservationRatesResponse_rates" class="response-section" style="display:none;">
                        <h6>Response:</h6>
                        <div id="getReservationRatesResponseJson_rates" class="response-json"></div>
                    </div>
                </div>

                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerReservationRates/{reservationId}/apply-to-all
                    </h5>
                    <p class="text-muted">Send JSON body to apply the same amount (optionally to one unit or date range)</p>
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label class="form-label">Reservation ID (path)</label>
                            <input type="number" id="applyRatesReservationId_rates" class="form-control">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="applyReservationRatesJson_rates" class="json-editor" rows="10">{
  "amount": 200.00,
  "unitId": 404,
  "dateFrom": "2025-01-27",
  "dateTo": "2025-01-28",
  "ewaPercent": 2.12,
  "vatPercent": 15
}</textarea>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="applyReservationRatesSame_Sidebar()"><i class="fas fa-edit"></i> Apply</button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('applyReservationRatesJson_rates')"><i class="fas fa-code"></i> Format JSON</button>
                        </div>
                    </div>
                    <div id="applyReservationRatesResponse_rates" class="response-section" style="display:none;">
                        <h6>Response:</h6>
                        <div id="applyReservationRatesResponseJson_rates" class="response-json"></div>
                    </div>
                </div>

                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerReservationRates/{reservationId}
                    </h5>
                    <p class="text-muted">Bulk upsert per-night rates (JSON array)</p>
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label class="form-label">Reservation ID</label>
                            <input type="number" id="upsertRatesReservationId_rates" class="form-control">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="upsertReservationRatesJson_rates" class="json-editor" rows="12">{
  "ewaPercent": 2.12,
  "vatPercent": 15,
  "items": [
    { "unitId": 3103, "nightDate": "2025-01-27", "grossRate": 100.00 },
    { "unitId": 3103, "nightDate": "2025-01-28", "grossRate": 100.00 }
  ]
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="upsertReservationRates_Sidebar()"><i class="fas fa-save"></i> Upsert Rates</button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('upsertReservationRatesJson_rates')"><i class="fas fa-code"></i> Format JSON</button>
                        </div>
                    </div>
                    <div id="upsertReservationRatesResponse_rates" class="response-section" style="display:none;">
                        <h6>Response:</h6>
                        <div id="upsertReservationRatesResponseJson_rates" class="response-json"></div>
                    </div>
                </div>
            </div>
            -->
            <!-- Zaaer Expenses Section -->
            <div class="section-card" id="expenses-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-file-invoice-dollar"></i>
                    Zaaer Expenses Management
                </div>

                <!-- Create Expense -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/ZaaerExpense
                    </h5>
                    <p class="text-muted">Create a new expense</p>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createExpenseJson" class="json-editor" rows="16">{
  "zaaerId": null,
  "hotelId": 1,
  "dateTime": "2025-10-29T12:00:00Z",
  "voucherType": "Transfers To Bank & Dropped Cash",
  "paidTo": "bank deposit",
  "receivedBy": "محمد عبد الفتاح",
  "amount": 250.00,
  "paymentMethodId": 2,
  "purpose": "Stationery purchase",
  "comment": "هذا السند لتصفية حساب الصندوق (تحويل أو إسقاط نقدية)"
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerExpense()">
                                <i class="fas fa-plus"></i> Create Expense
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createExpenseJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="createExpenseResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createExpenseResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Expense -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerExpense/{expenseId}
                    </h5>
                    <p class="text-muted">Update an expense</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Expense ID:</label>
                            <input type="number" id="updateExpenseId" class="form-control" placeholder="Enter Expense ID">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateExpenseJson" class="json-editor" rows="16">{
  "zaaerId": null,
  "hotelId": 1,
  "voucherType": "Transfers To Bank & Dropped Cash",
  "paidTo": "Bank",
  "receivedBy": "أحمد",
  "amount": 500.00,
  "paymentMethodId": 3,
  "purpose": "Transfer to bank",
  "comment": "End of day drop"
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerExpense()">
                                <i class="fas fa-edit"></i> Update Expense
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateExpenseJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="updateExpenseResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateExpenseResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Expenses -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerExpense
                    </h5>
                    <p class="text-muted">Get all expenses</p>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-info" onclick="getAllZaaerExpenses()">
                                <i class="fas fa-list"></i> Get All Expenses
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-info" onclick="formatGetAllExpensesResponse()">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="getAllExpensesResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getAllExpensesResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>
            <!-- Zaaer Banks Section -->
            <div class="section-card" id="banks-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-university"></i>
                    Zaaer Banks Management
                </div>

                <!-- Create Bank -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/ZaaerBank
                    </h5>
                    <p class="text-muted">Create a new bank</p>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createBankJson" class="json-editor" rows="14">{
  "bankNameEn": "Demo Bank",
  "bankNameAr": "بنك تجريبي",
  "isActive": true,
  "accountNumber": "1234567890",
  "iban": "SA0380000000608010167519",
  "currencyCode": "SAR",
  "description": "Primary operating account"
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerBank()">
                                <i class="fas fa-plus"></i> Create Bank
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createBankJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="createBankResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createBankResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Bank -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerBank/{bankId}
                    </h5>
                    <p class="text-muted">Update bank</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Bank ID:</label>
                            <input type="number" id="updateBankId" class="form-control" placeholder="Enter Bank ID">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateBankJson" class="json-editor" rows="12">{
  "bankNameEn": "Demo Bank Updated",
  "bankNameAr": "بنك تجريبي محدث",
  "isActive": true,
  "accountNumber": "0987654321",
  "iban": "SA0380000000608010167520",
  "currencyCode": "SAR",
  "description": "Updated description"
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerBank()">
                                <i class="fas fa-edit"></i> Update Bank
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateBankJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="updateBankResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateBankResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Banks -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerBank
                    </h5>
                    <p class="text-muted">Get all banks</p>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-info" onclick="getAllZaaerBanks()">
                                <i class="fas fa-list"></i> Get All Banks
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-info" onclick="formatGetAllBanksResponse()">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="getAllBanksResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getAllBanksResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>
            <!-- Zaaer Customer Endpoints -->
            <div class="section-card" id="customers-section">
                <div class="section-title">
                    <i class="fas fa-users"></i>
                    Zaaer Customer Management
                </div>

                <!-- Create Customer -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/Customer
                    </h5>
                    <p class="text-muted">Create a new customer with identifications</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createCustomerJson" class="json-editor" rows="20">{
  "zaaerId": null,
  "customerNo": "CUST124",
  "customerName": "Ahmed Al-Rashid",
  "gtypeId": 1,
  "nId": 64,
  "guestCategoryId": 1,
  "visaNo": "",
  "mobileNo": "966501234567",
  "enteredBy": 1,
  "enteredAt": "2025-10-26T17:06:58.366Z",
  "birthdateHijri": "2025-10-26T17:06:58.366Z",
  "hotelId": 1,
  "birthdateGregorian": "2025-10-26T17:06:58.366Z",
  "identifications": [
    {
      "zaaerId": null,
      "customerId": 0,
      "idTypeId": 1,
      "idNumber": "1234567890"
    }
  ]
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-primary" onclick="createZaaerCustomer()">
                                <i class="fas fa-plus"></i> Create Customer
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-primary" onclick="formatJson('createCustomerJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="createResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Customer -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/Customer/{customerId}
                    </h5>
                    <p class="text-muted">Update an existing customer</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label class="form-label">Customer ID:</label>
                            <input type="number" id="updateCustomerId" class="form-control" placeholder="Enter Customer ID">
                        </div>
                        <div class="col-md-9">
                            <label class="form-label">Request Body (JSON):</label>
                            <textarea id="updateCustomerJson" class="json-editor" rows="20">{
  "zaaerId": null,
  "customerNo": "CUST124-UPDATED",
  "customerName": "Ahmed Al-Rashid Updated",
  "gtypeId": 1,
  "nId": 64,
  "guestCategoryId": 1,
  "visaNo": "",
  "mobileNo": "+966501234567",
  "enteredBy": 1,
  "enteredAt": "2025-10-26T17:06:58.366Z",
  "birthdateHijri": "2025-10-26T17:06:58.366Z",
  "birthdateGregorian": "2025-10-26T17:06:58.366Z",
  "identifications": [
    {
      "zaaerId": null,
      "customerId": 0,
      "idTypeId": 1,
      "idNumber": "1234567890-UPDATED"
    }
  ]
}</textarea>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-primary" onclick="updateZaaerCustomer()">
                                <i class="fas fa-edit"></i> Update Customer
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-primary" onclick="formatJson('updateCustomerJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="updateResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Customer by Number -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/Customer/number/{customerNo}
                    </h5>
                    <p class="text-muted">Update an existing customer by customer number</p>
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label class="form-label">Customer No:</label>
                            <input type="text" id="updateCustomerNo" class="form-control" placeholder="Enter Customer No">
                        </div>
                        <div class="col-md-9">
                            <label class="form-label">Request Body (JSON):</label>
                            <textarea id="updateCustomerByNoJson" class="json-editor" rows="20">{
  "zaaerId": null,
  "customerNo": "CUST124-UPDATED",
  "customerName": "Ahmed Al-Rashid Updated",
  "gtypeId": 1,
  "nId": 64,
  "guestCategoryId": 1,
  "visaNo": "",
  "mobileNo": "+966501234567",
  "enteredBy": 1,
  "enteredAt": "2025-10-26T17:06:58.366Z",
  "birthdateHijri": "2025-10-26T17:06:58.366Z",
  "birthdateGregorian": "2025-10-26T17:06:58.366Z",
  "identifications": [
    {
      "zaaerId": null,
      "customerId": 0,
      "idTypeId": 1,
      "idNumber": "1234567890-UPDATED"
    }
  ]
}</textarea>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-primary" onclick="updateZaaerCustomerByNumber()">
                                <i class="fas fa-edit"></i> Update by Number
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-primary" onclick="formatJson('updateCustomerByNoJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="updateByNoResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateByNoResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Customers -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/Customer/hotel/{hotelId}
                    </h5>
                    <p class="text-muted">Get all customers for a specific hotel</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Hotel ID:</label>
                            <input type="number" id="getHotelId" class="form-control" placeholder="Enter Hotel ID" value="1">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-primary" onclick="getAllZaaerCustomers()" style="margin-top: 25px;">
                                <i class="fas fa-list"></i> Get All Customers
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-primary" onclick="formatGetAllResponse()" style="margin-top: 25px;">
                                <i class="fas fa-code"></i> Format Response JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getAllResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getAllResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Delete Customer -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-delete">DELETE</span>
                        /api/zaaer/Customer/{customerId}
                    </h5>
                    <p class="text-muted">Delete a customer by ID</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Customer ID:</label>
                            <input type="number" id="deleteCustomerId" class="form-control" placeholder="Enter Customer ID">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-danger" onclick="deleteZaaerCustomer()" style="margin-top: 25px;">
                                <i class="fas fa-trash"></i> Delete Customer
                            </button>
                        </div>
                    </div>
                    
                    <div id="deleteResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="deleteResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Zaaer Reservation Endpoints -->
            <div class="section-card" id="reservations-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-calendar-check"></i>
                    Zaaer Reservation Management
                </div>

                <!-- Create Reservation -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/ZaaerReservation
                    </h5>
                    <p class="text-muted">Create a new reservation with reservation units</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createReservationJson" class="json-editor" rows="32">{
  "zaaerId": 839,
  "reservationNo": "REV0011",
  "hotelId": 11,
  "customerId": 126,
  "reservationDate": "2025-11-03T22:16:31Z",
  "rentalType": "daily",
  "numberOfMonths": 1,
  "totalPenalties": 0,
  "totalDiscounts": "0.00",
  "totalNights": 1,
  "totalAmount": "100.00",
  "amountPaid": "0.00",
  "balanceAmount": "-100.00",
  "status": "checked_in",
  "createdBy": null,
  "externalRefNo": 839,
  "subtotal": "84.84",
  "vatRate": 15,
  "vatAmount": 0,
  "lodgingTaxRate": 0,
  "lodgingTaxAmount": 0,
  "totalTaxAmount": 15.16,
  "corporateId": null,
  "reservationType": "individual",
  "visitPurposeId": 1,
  "reservationUnits": [
    {
      "zaaerId": 1694,
      "reservationId": 839,
      "apartmentId": 534,
      "checkInDate": "2025-11-03T11:00:00Z",
      "checkOutDate": "2025-11-04T10:00:00Z",
      "numberOfNights": 1,
      "rentAmount": "0.000000",
      "vatRate": 15,
      "vatAmount": 0,
      "lodgingTaxRate": 0,
      "lodgingTaxAmount": 0,
      "totalAmount": 0,
      "status": "checked_in"
    }
  ]
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-primary" onclick="createZaaerReservation()">
                                <i class="fas fa-plus"></i> Create Reservation
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-primary" onclick="formatJson('createReservationJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="createReservationResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createReservationResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Reservation -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerReservation/{reservationId}
                    </h5>
                    <p class="text-muted">Update an existing reservation</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label class="form-label">Reservation ID:</label>
                            <input type="number" id="updateReservationId" class="form-control" placeholder="Enter Reservation ID">
                        </div>
                        <div class="col-md-9">
                            <label class="form-label">Request Body (JSON):</label>
                            <textarea id="updateReservationJson" class="json-editor" rows="32">{
  "zaaerId": 839,
  "reservationNo": "REV0011",
  "hotelId": 11,
  "customerId": 126,
  "reservationDate": "2025-11-03T22:16:31Z",
  "rentalType": "daily",
  "numberOfMonths": 1,
  "totalPenalties": 0,
  "totalDiscounts": "0.00",
  "totalNights": 1,
  "totalAmount": "100.00",
  "amountPaid": "0.00",
  "balanceAmount": "-100.00",
  "status": "checked_in",
  "createdBy": null,
  "externalRefNo": 839,
  "subtotal": "84.84",
  "vatRate": 15,
  "vatAmount": 0,
  "lodgingTaxRate": 0,
  "lodgingTaxAmount": 0,
  "totalTaxAmount": 15.16,
  "corporateId": null,
  "reservationType": "individual",
  "visitPurposeId": 1,
  "reservationUnits": [
    {
      "zaaerId": 1694,
      "reservationId": 839,
      "apartmentId": 534,
      "checkInDate": "2025-11-03T11:00:00Z",
      "checkOutDate": "2025-11-04T10:00:00Z",
      "numberOfNights": 1,
      "rentAmount": "0.000000",
      "vatRate": 15,
      "vatAmount": 0,
      "lodgingTaxRate": 0,
      "lodgingTaxAmount": 0,
      "totalAmount": 0,
      "status": "checked_in"
    }
  ]
}</textarea>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-primary" onclick="updateZaaerReservation()">
                                <i class="fas fa-edit"></i> Update Reservation
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-primary" onclick="formatJson('updateReservationJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="updateReservationResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateReservationResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Reservation by Number -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerReservation/number/{reservationNo}
                    </h5>
                    <p class="text-muted">Update an existing reservation by reservation number</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label class="form-label">Reservation Number:</label>
                            <input type="text" id="updateReservationByNumber" class="form-control" placeholder="Enter Reservation Number">
                        </div>
                        <div class="col-md-9">
                            <label class="form-label">Request Body (JSON):</label>
                            <textarea id="updateReservationByNumberJson" class="json-editor" rows="32">{
  "zaaerId": 839,
  "reservationNo": "REV0011",
  "hotelId": 11,
  "customerId": 126,
  "reservationDate": "2025-11-03T22:16:31Z",
  "rentalType": "daily",
  "numberOfMonths": 1,
  "totalPenalties": 0,
  "totalDiscounts": "0.00",
  "totalNights": 1,
  "totalAmount": "100.00",
  "amountPaid": "0.00",
  "balanceAmount": "-100.00",
  "status": "checked_in",
  "createdBy": null,
  "externalRefNo": 839,
  "subtotal": "84.84",
  "vatRate": 15,
  "vatAmount": 0,
  "lodgingTaxRate": 0,
  "lodgingTaxAmount": 0,
  "totalTaxAmount": 15.16,
  "corporateId": null,
  "reservationType": "individual",
  "visitPurposeId": 1,
  "reservationUnits": [
    {
      "zaaerId": 1694,
      "reservationId": 839,
      "apartmentId": 534,
      "checkInDate": "2025-11-03T11:00:00Z",
      "checkOutDate": "2025-11-04T10:00:00Z",
      "numberOfNights": 1,
      "rentAmount": "0.000000",
      "vatRate": 15,
      "vatAmount": 0,
      "lodgingTaxRate": 0,
      "lodgingTaxAmount": 0,
      "totalAmount": 0,
      "status": "checked_in"
    }
  ]
}</textarea>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerReservationByNumber()">
                                <i class="fas fa-edit"></i> Update Reservation by Number
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateReservationByNumberJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="updateReservationByNumberResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateReservationByNumberResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Reservations -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerReservation/hotel/{hotelId}
                    </h5>
                    <p class="text-muted">Get all reservations for a specific hotel</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Hotel ID:</label>
                            <input type="number" id="getReservationHotelId" class="form-control" placeholder="Enter Hotel ID" value="1">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-primary" onclick="getAllZaaerReservations()" style="margin-top: 25px;">
                                <i class="fas fa-list"></i> Get All Reservations
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-primary" onclick="formatGetAllReservationsResponse()" style="margin-top: 25px;">
                                <i class="fas fa-code"></i> Format Response JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getAllReservationsResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getAllReservationsResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get Reservation by ID -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerReservation/{reservationId}
                    </h5>
                    <p class="text-muted">Get a specific reservation by ID</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Reservation ID:</label>
                            <input type="number" id="getReservationById" class="form-control" placeholder="Enter Reservation ID">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-info" onclick="getZaaerReservationById()" style="margin-top: 5px;">
                                <i class="fas fa-search"></i> Get Reservation by ID
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-info" onclick="formatGetReservationByIdResponse()" style="margin-top: 5px;">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="getReservationByIdResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getReservationByIdResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get Reservation by Number -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerReservation/number/{reservationNo}
                    </h5>
                    <p class="text-muted">Get a specific reservation by reservation number</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Reservation Number:</label>
                            <input type="text" id="getReservationByNumber" class="form-control" placeholder="Enter Reservation Number">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-info" onclick="getZaaerReservationByNumber()" style="margin-top: 5px;">
                                <i class="fas fa-search"></i> Get Reservation by Number
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-info" onclick="formatGetReservationByNumberResponse()" style="margin-top: 5px;">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="getReservationByNumberResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getReservationByNumberResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Delete Reservation -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-delete">DELETE</span>
                        /api/zaaer/ZaaerReservation/{reservationId}
                    </h5>
                    <p class="text-muted">Delete a reservation by ID</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Reservation ID:</label>
                            <input type="number" id="deleteReservationId" class="form-control" placeholder="Enter Reservation ID">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-danger" onclick="deleteZaaerReservation()" style="margin-top: 25px;">
                                <i class="fas fa-trash"></i> Delete Reservation
                            </button>
                        </div>
                    </div>
                    
                    <div id="deleteReservationResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="deleteReservationResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Reservation Tools (New) -->
            <div class="section-card" id="reservation-tools-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-search"></i>
                    Reservation Tools (Lookup)
                </div>

                <!-- Create Reservation (POST) -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/ZaaerReservation/tool
                    </h5>
                    <p class="text-muted">Quick create reservation (server calculates prices/taxes)</p>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createReservationJson_tools" class="json-editor" rows="25">{
  "zaaerId": null,
  "reservationNo": "RES-TOOLS-001",
  "hotelId": 1,
  "customerId": 1,
  "reservationDate": "2025-01-15T10:00:00Z",
  "rentalType": "daily",
  "numberOfMonths": null,
  "totalPenalties": 0,
  "totalDiscounts": 0,
  "corporateId": null,
  "reservationUnits": [
    { "reservationId": 0, "apartmentId": 3101, "checkInDate": "2025-01-15T14:00:00Z", "checkOutDate": "2025-01-18T11:00:00Z", "rentAmount": 1500.00 },
    { "reservationId": 0, "apartmentId": 3102, "checkInDate": "2025-01-15T14:00:00Z", "checkOutDate": "2025-01-18T11:00:00Z", "rentAmount": 1200.00 },
    { "reservationId": 0, "apartmentId": 3103, "checkInDate": "2025-01-15T14:00:00Z", "checkOutDate": "2025-01-18T11:00:00Z", "rentAmount": 1500.00 },
    { "reservationId": 0, "apartmentId": 3104, "checkInDate": "2025-01-15T14:00:00Z", "checkOutDate": "2025-01-18T11:00:00Z", "rentAmount": 1200.00 },
    { "reservationId": 0, "apartmentId": 3105, "checkInDate": "2025-01-15T14:00:00Z", "checkOutDate": "2025-01-18T11:00:00Z", "rentAmount": 1500.00 },
    { "reservationId": 0, "apartmentId": 3111, "checkInDate": "2025-01-15T14:00:00Z", "checkOutDate": "2025-01-18T11:00:00Z", "rentAmount": 1500.00 }
  ]
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerReservation_Tools()">
                                <i class="fas fa-plus"></i> Create Reservation
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createReservationJson_tools')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="createReservationResponse_tools" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createReservationResponseJson_tools" class="response-json"></div>
                    </div>
                </div>

                <!-- Get Reservation by ID -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerReservation/{reservationId}
                    </h5>
                    <p class="text-muted">Get a specific reservation by ID</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Reservation ID:</label>
                            <input type="number" id="getReservationById_tools" class="form-control" placeholder="Enter Reservation ID">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-info" onclick="getZaaerReservationById_Tools()" style="margin-top: 5px;">
                                <i class="fas fa-search"></i> Get Reservation by ID
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-info" onclick="formatGetReservationByIdResponse_Tools()" style="margin-top: 5px;">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="getReservationByIdResponse_tools" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getReservationByIdResponseJson_tools" class="response-json"></div>
                    </div>
                </div>

                <!-- Get Reservation by Number -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerReservation/number/{reservationNo}
                    </h5>
                    <p class="text-muted">Get a specific reservation by reservation number</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Reservation Number:</label>
                            <input type="text" id="getReservationByNumber_tools" class="form-control" placeholder="Enter Reservation Number">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-info" onclick="getZaaerReservationByNumber_Tools()" style="margin-top: 5px;">
                                <i class="fas fa-search"></i> Get Reservation by Number
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-info" onclick="formatGetReservationByNumberResponse_Tools()" style="margin-top: 5px;">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="getReservationByNumberResponse_tools" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getReservationByNumberResponseJson_tools" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Reservation (PUT by ID) -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerReservation/{reservationId}
                    </h5>
                    <p class="text-muted">Quick update reservation by ID</p>
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label class="form-label">Reservation ID:</label>
                            <input type="number" id="updateReservationId_tools" class="form-control" placeholder="Enter Reservation ID">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateReservationJson_tools" class="json-editor" rows="19">{
  "zaaerId": null,
  "reservationNo": "RES-TOOLS-001-UPD",
  "hotelId": 1,
  "customerId": 1,
  "reservationDate": "2025-01-15T10:00:00Z",
  "rentalType": "InHour",
  "numberOfMonths": null,
  "totalPenalties": 0,
  "totalDiscounts": 0,
  "corporateId": null,
  "reservationUnits": [
    { "reservationId": 0, "apartmentId": 3105, "checkInDate": "2025-01-15T14:00:00Z", "checkOutDate": "2025-01-19T11:00:00Z", "rentAmount": 1800.00 }
  ]
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerReservation_Tools()">
                                <i class="fas fa-edit"></i> Update by ID
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateReservationJson_tools')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="updateReservationResponse_tools" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateReservationResponseJson_tools" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Reservation (PUT by Number) -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerReservation/number/{reservationNo}
                    </h5>
                    <p class="text-muted">Quick update reservation by reservation number</p>
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label class="form-label">Reservation Number:</label>
                            <input type="text" id="updateReservationByNumber_tools" class="form-control" placeholder="Enter Reservation Number" value="RES-TOOLS-001">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateReservationByNumberJson_tools" class="json-editor" rows="19">{
  "zaaerId": null,
  "reservationNo": "RES-TOOLS-001",
  "hotelId": 1,
  "customerId": 1,
  "reservationDate": "2025-01-15T10:00:00Z",
  "rentalType": "Monthly",
  "numberOfMonths": 2,
  "totalPenalties": 10,
  "totalDiscounts": 5,
  "corporateId": null,
  "reservationUnits": [
    { "reservationId": 0, "apartmentId": 3102, "checkInDate": "2025-01-15T14:00:00Z", "checkOutDate": "2025-01-18T11:00:00Z", "rentAmount": 1400.00 }
  ]
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerReservationByNumber_Tools()">
                                <i class="fas fa-edit"></i> Update by Number
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateReservationByNumberJson_tools')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    <div id="updateReservationByNumberResponse_tools" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateReservationByNumberResponseJson_tools" class="response-json"></div>
                    </div>
                </div>

                <!-- Reservation Day Rates: GET by Reservation -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerReservationRates/{reservationId}
                    </h5>
                    <p class="text-muted">Fetch per-night manual rates for a reservation</p>
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Reservation ID:</label>
                            <input type="number" id="getRatesReservationId" class="form-control" placeholder="Enter Reservation ID">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getReservationRates()" style="margin-top:25px;"><i class="fas fa-list"></i> Get Rates</button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatReservationRatesResponse()" style="margin-top:25px;"><i class="fas fa-code"></i> Beautify JSON</button>
                        </div>
                    </div>
                    <div id="getReservationRatesResponse" class="response-section" style="display:none;">
                        <h6>Response:</h6>
                        <div id="getReservationRatesResponseJson" class="response-json"></div>
                    </div>
                </div>


                <!-- Reservation Day Rates: Bulk upsert -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerReservationRates/{reservationId}
                    </h5>
                    <p class="text-muted">Bulk upsert per-night rates (JSON array)</p>
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label class="form-label">Reservation ID</label>
                            <input type="number" id="upsertRatesReservationId" class="form-control">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="upsertReservationRatesJson" class="json-editor" rows="12">{
  "ewaPercent": 2.12,
  "vatPercent": 15,
  "items": [
    { "unitId": 3103, "nightDate": "2025-01-27", "grossRate": 100.00 },
    { "unitId": 3103, "nightDate": "2025-01-28", "grossRate": 100.00 }
  ]
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="upsertReservationRates()"><i class="fas fa-save"></i> Upsert Rates</button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('upsertReservationRatesJson')"><i class="fas fa-code"></i> Format JSON</button>
                        </div>
                    </div>
                    <div id="upsertReservationRatesResponse" class="response-section" style="display:none;">
                        <h6>Response:</h6>
                        <div id="upsertReservationRatesResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Zaaer Payment Receipt Endpoints -->
            <div class="section-card" id="receipts-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-receipt"></i>
                    Zaaer Payment Receipt Management
                </div>

                <!-- Create Payment Receipt -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/PaymentReceipt
                    </h5>
                    <p class="text-muted">Create a new payment receipt</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <small class="text-muted d-block mb-2">
                            <strong>Payment Method Options:</strong> 
                            Cash (paymentMethodId: null), Mada (ID: 2), Visa (ID: 4), MasterCard (ID: 5), etc.
                        </small>
                        <textarea id="createPaymentReceiptJson" class="json-editor" rows="20">{
  "zaaerId": null,
  "receiptNo": "REC001",
  "hotelId": 1,
  "reservationId": 1,
  "invoiceId": 1,
  "customerId": 1,
  "receiptDate": "2025-01-15T10:00:00Z",
  "amountPaid": 500.00,
  "paymentMethod": "Cash",
  "paymentMethodId": null,
  "bankId": null,
  "transactionNo": "CASH-20250115-001",
  "notes": "Payment for reservation",
  "receiptStatus": "active",
  "receiptType": "receipt",
  "createdBy": 1,
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-primary" onclick="createZaaerPaymentReceipt()">
                                <i class="fas fa-plus"></i> Create Payment Receipt
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-primary" onclick="formatJson('createPaymentReceiptJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="createPaymentReceiptResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createPaymentReceiptResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Payment Receipt -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/PaymentReceipt/zaaer/{zaaerId}
                    </h5>
                    <p class="text-muted">Update an existing payment receipt by zaaerId</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label class="form-label">Zaaer ID:</label>
                            <input type="number" id="updatePaymentReceiptZaaerId" class="form-control" placeholder="Enter Zaaer ID">
                        </div>
                        <div class="col-md-9">
                            <label class="form-label">Request Body (JSON):</label>
                            <textarea id="updatePaymentReceiptJson" class="json-editor" rows="20">{
  "zaaerId": 9001,
  "receiptNo": "REC001-UPDATED",
  "hotelId": 1,
  "reservationId": 1,
  "invoiceId": 1,
  "customerId": 1,
  "receiptDate": "2025-01-15T10:00:00Z",
  "amountPaid": 750.00,
  "paymentMethod": "Cash",
  "paymentMethodId": null,
  "bankId": null,
  "transactionNo": "CASH-20250115-UPDATED",
  "notes": "Updated payment for reservation",
  "receiptStatus": "active",
  "receiptType": "receipt",
  "createdBy": 1
}</textarea>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-primary" onclick="updateZaaerPaymentReceiptByZaaerId()">
                                <i class="fas fa-edit"></i> Update Payment Receipt
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-primary" onclick="formatJson('updatePaymentReceiptJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="updatePaymentReceiptResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updatePaymentReceiptResponseJson" class="response-json"></div>
                    </div>
                    
                    <div class="mt-4">
                        <h6>Update by Receipt Number</h6>
                        <div class="row">
                            <div class="col-md-3">
                                <label class="form-label">Receipt Number:</label>
                                <input type="text" id="updatePaymentReceiptByNo" class="form-control" placeholder="Enter Receipt Number">
                            </div>
                            <div class="col-md-9">
                                <label class="form-label">Request Body (JSON):</label>
                                <textarea id="updatePaymentReceiptByNoJson" class="json-editor" rows="20">{
  "zaaerId": 9001,
  "receiptNo": "REC001-UPDATED",
  "hotelId": 1,
  "reservationId": 1,
  "customerId": 1,
  "receiptDate": "2025-01-15T10:00:00Z",
  "amountPaid": 750.00,
  "paymentMethod": "Cash",
  "paymentMethodId": null,
  "bankId": null,
  "transactionNo": "CASH-20250115-UPDATED",
  "notes": "Updated payment for reservation",
  "receiptStatus": "active",
  "receiptType": "receipt",
  "createdBy": 1
}</textarea>
                            </div>
                        </div>
                        
                        <div class="row mt-3">
                            <div class="col-md-6">
                                <button class="btn btn-primary" onclick="updateZaaerPaymentReceiptByNo()">
                                    <i class="fas fa-edit"></i> Update by Receipt No
                                </button>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-outline-primary" onclick="formatJson('updatePaymentReceiptByNoJson')">
                                    <i class="fas fa-code"></i> Format JSON
                                </button>
                            </div>
                        </div>
                        
                        <div id="updatePaymentReceiptByNoResponse" class="response-section" style="display: none;">
                            <h6>Response:</h6>
                            <div id="updatePaymentReceiptByNoResponseJson" class="response-json"></div>
                        </div>
                    </div>
                </div>

                <!-- Get All Payment Receipts -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/PaymentReceipt/hotel/{hotelId}
                    </h5>
                    <p class="text-muted">Get all payment receipts for a specific hotel</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Hotel ID:</label>
                            <input type="number" id="getPaymentReceiptHotelId" class="form-control" placeholder="Enter Hotel ID" value="1">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-primary" onclick="getAllZaaerPaymentReceipts()" style="margin-top: 25px;">
                                <i class="fas fa-list"></i> Get All Payment Receipts
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-primary" onclick="formatGetAllPaymentReceiptsResponse()" style="margin-top: 25px;">
                                <i class="fas fa-code"></i> Format Response JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getAllPaymentReceiptsResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getAllPaymentReceiptsResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Delete Payment Receipt -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-delete">DELETE</span>
                        /api/zaaer/PaymentReceipt/{receiptId}
                    </h5>
                    <p class="text-muted">Delete a payment receipt by ID</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Receipt ID:</label>
                            <input type="number" id="deletePaymentReceiptId" class="form-control" placeholder="Enter Receipt ID">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-danger" onclick="deleteZaaerPaymentReceipt()" style="margin-top: 25px;">
                                <i class="fas fa-trash"></i> Delete Payment Receipt
                            </button>
                        </div>
                    </div>
                    
                    <div id="deletePaymentReceiptResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="deletePaymentReceiptResponseJson" class="response-json"></div>
                    </div>
                </div>

            </div>

            <!-- Zaaer Invoice Endpoints -->
            <div class="section-card" id="invoices-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-file-invoice"></i>
                    Zaaer Invoice Management
                </div>

                <!-- Create Invoice -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/Invoice
                    </h5>
                    <p class="text-muted">Create a new invoice</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createInvoiceJson" class="json-editor" rows="25">{
  "zaaerId": null,
  "invoiceNo": "INVO0025",
  "hotelId": 11,
  "reservationId": 856,
  "customerId": 131,
  "invoiceDate": "2025-11-05T00:00:00Z",
  "invoiceDateHijri": "",
  "invoiceType": "sales_invoice",
  "subtotal": 380,
  "vatRate": 15,
  "vatAmount": 0,
  "lodgingTaxRate": 0,
  "lodgingTaxAmount": 0,
  "totalAmount": "380.00",
  "isSentZatca": false,
  "createdBy": 19,
  "totalDiscounts": "0.00",
  "periodFrom": "2025-11-05T00:00:00Z",
  "periodTo": "2025-11-06T00:00:00Z",
  "paymentStatus": "paid",
  "notes": "",
  "zatcaUuid": ""
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-primary" onclick="createZaaerInvoice()">
                                <i class="fas fa-plus"></i> Create Invoice
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-primary" onclick="formatJson('createInvoiceJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="createInvoiceResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createInvoiceResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Invoices -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/Invoice/hotel/{hotelId}
                    </h5>
                    <p class="text-muted">Get all invoices for a specific hotel</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Hotel ID:</label>
                            <input type="number" id="getInvoiceHotelId" class="form-control" placeholder="Enter Hotel ID" value="1">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getAllZaaerInvoices()" style="margin-top: 25px;">
                                <i class="fas fa-list"></i> Get All Invoices
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetAllInvoicesResponse()" style="margin-top: 25px;">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getAllInvoicesResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getAllInvoicesResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get Invoice by ID -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/Invoice/{invoiceId}
                    </h5>
                    <p class="text-muted">Get a specific invoice by ID with all related payment receipts and refunds</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Invoice ID:</label>
                            <input type="number" id="getInvoiceById" class="form-control" placeholder="Enter Invoice ID">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getZaaerInvoiceById()" style="margin-top: 25px;">
                                <i class="fas fa-search"></i> Get Invoice by ID
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetInvoiceByIdResponse()" style="margin-top: 25px;">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getInvoiceByIdResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getInvoiceByIdResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Link Receipts to Invoice -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/Invoice/{invoiceId}/link-receipts
                    </h5>
                    <p class="text-muted">Link payment receipts to this invoice</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Invoice ID:</label>
                            <input type="number" id="linkReceiptsToInvoiceId" class="form-control" placeholder="Enter Invoice ID">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Receipt IDs (comma-separated):</label>
                            <input type="text" id="linkReceiptsToInvoiceIds" class="form-control" placeholder="e.g., 1,2,3">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-success" onclick="linkReceiptsToInvoiceFromInvoice()" style="margin-top: 25px;">
                                <i class="fas fa-link"></i> Link Receipts
                            </button>
                        </div>
                    </div>
                    
                    <div id="linkReceiptsToInvoiceResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="linkReceiptsToInvoiceResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Unlink Receipts from Invoice -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/Invoice/{invoiceId}/unlink-receipts
                    </h5>
                    <p class="text-muted">Unlink payment receipts from this invoice</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Invoice ID:</label>
                            <input type="number" id="unlinkReceiptsFromInvoiceId" class="form-control" placeholder="Enter Invoice ID">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Receipt IDs (comma-separated):</label>
                            <input type="text" id="unlinkReceiptsFromInvoiceIds" class="form-control" placeholder="e.g., 1,2,3">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-warning" onclick="unlinkReceiptsFromInvoiceFromInvoice()" style="margin-top: 25px;">
                                <i class="fas fa-unlink"></i> Unlink Receipts
                            </button>
                        </div>
                    </div>
                    
                    <div id="unlinkReceiptsFromInvoiceResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="unlinkReceiptsFromInvoiceResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Zaaer Refund Endpoints -->
            <div class="section-card" id="refunds-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-undo"></i>
                    Zaaer Refund Management
                </div>

                <!-- Create Refund -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/Refund
                    </h5>
                    <p class="text-muted">Create a new refund</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createRefundJson" class="json-editor" rows="20">{
  "refundNo": "REF001",
  "hotelId": 1,
  "zaaerId": null,
  "reservationId": 6,
  "invoiceId": 6,
  "customerId": 1,
  "refundDate": "2025-01-15T10:00:00Z",
  "refundAmount": 500.00,
  "refundReason": "Customer cancellation",
  "paymentMethod": "Cash",
  "paymentMethodId": null,
  "bankId": null,
  "transactionNo": "",
  "notes": "Full refund for cancellation",
  "createdBy": 1,
  "refundType": "refund"
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerRefund()">
                                <i class="fas fa-plus"></i> Create Refund
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createRefundJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="createRefundResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createRefundResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Refund -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/Refund/zaaer/{zaaerId}
                    </h5>
                    <p class="text-muted">Update an existing refund by zaaerId</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Zaaer ID:</label>
                            <input type="number" id="updateRefundZaaerId" class="form-control" placeholder="Enter Zaaer ID">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateRefundJson" class="json-editor" rows="20">{
  "zaaerId": null,
  "refundNo": "REF001-UPD",
  "hotelId": 1,
  "reservationId": null,
  "invoiceId": null,
  "customerId": 1,
  "refundDate": "2025-01-15T10:00:00Z",
  "refundAmount": 550.00,
  "refundReason": "Partial refund - service issue",
  "paymentMethod": "Cash",
  "paymentMethodId": null,
  "bankId": null,
  "transactionNo": "",
  "notes": "Updated refund amount",
  "createdBy": 1,
  "refundType": "refund"
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerRefundByZaaerId()">
                                <i class="fas fa-edit"></i> Update Refund
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateRefundJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="updateRefundResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateRefundResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Refund by Refund Number -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/Refund/refund-no/{refundNo}
                    </h5>
                    <p class="text-muted">Update an existing refund by refund number</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Refund Number:</label>
                            <input type="text" id="updateRefundByNo" class="form-control" placeholder="Enter Refund Number">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateRefundByNoJson" class="json-editor" rows="20">{
  "zaaerId": null,
  "refundNo": "REF001-UPD",
  "hotelId": 1,
  "reservationId": 6,
  "invoiceId": 6,
  "customerId": 1,
  "refundDate": "2025-01-15T10:00:00Z",
  "refundAmount": 550.00,
  "refundReason": "Partial refund - service issue",
  "paymentMethod": "Cash",
  "paymentMethodId": null,
  "bankId": null,
  "transactionNo": "",
  "notes": "Updated refund amount",
  "createdBy": 1,
  "refundType": "refund"
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerRefundByZaaerId()">
                                <i class="fas fa-edit"></i> Update Refund by Zaaer ID
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateRefundByZaaerIdJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="updateRefundByZaaerIdResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateRefundByZaaerIdResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Refunds -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/Refund/hotel/{hotelId}
                    </h5>
                    <p class="text-muted">Get all refunds for a specific hotel</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Hotel ID:</label>
                            <input type="number" id="getRefundHotelId" class="form-control" placeholder="Enter Hotel ID" value="1">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getAllZaaerRefunds()" style="margin-top: 25px;">
                                <i class="fas fa-list"></i> Get All Refunds
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetAllRefundsResponse()" style="margin-top: 25px;">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getAllRefundsResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getAllRefundsResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Zaaer Credit Note Endpoints -->
            <div class="section-card" id="credit-notes-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-file-invoice-dollar"></i>
                    Zaaer Credit Note Management
                </div>

                <!-- Create Credit Note -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/CreditNote
                    </h5>
                    <p class="text-muted">Create a new credit note</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createCreditNoteJson" class="json-editor" rows="25">{
  "zaaerId": null,
  "creditNoteNo": "CN001",
  "hotelId": 1,
  "invoiceId": 1,
  "reservationId": 1,
  "customerId": 1,
  "creditNoteDate": "2025-01-15T10:00:00Z",
  "subtotal": 450.00,
  "vatRate": 15.00,
  "vatAmount": 67.50,
  "lodgingTaxRate": 2.5,
  "lodgingTaxAmount": 11.25,
  "creditAmount": 500.00,
  "reason": "Customer cancellation - full refund",
  "creditNoteType": "refund",
  "notes": "Credit note for cancelled reservation",
  "isSentZatca": false,
  "zatcaUuid": "",
  "createdBy": 1,
}</textarea>
                    </div>
                    
                    <div id="createCreditNoteResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createCreditNoteResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Credit Notes -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/CreditNote/hotel/{hotelId}
                    </h5>
                    <p class="text-muted">Get all credit notes for a specific hotel</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Hotel ID:</label>
                            <input type="number" id="getCreditNoteHotelId" class="form-control" placeholder="Enter Hotel ID" value="1">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getAllZaaerCreditNotes()" style="margin-top: 25px;">
                                <i class="fas fa-list"></i> Get All Credit Notes
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetAllCreditNotesResponse()" style="margin-top: 25px;">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getAllCreditNotesResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getAllCreditNotesResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Zaaer Room Type Endpoints -->
            <div class="section-card" id="room-types-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-bed"></i>
                    Zaaer Room Type Management
                </div>

                <!-- Create Room Type -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/RoomType
                    </h5>
                    <p class="text-muted">Create a new room type</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createRoomTypeJson" class="json-editor" rows="15">{
  "zaaerId": null,
  "hotelId": 1,
  "roomTypeName": "Deluxe Suite",
  "roomTypeDesc": "Spacious deluxe suite with city view",
  "baseRate": 500.00,
  "seasonRate": 750.00
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerRoomType()">
                                <i class="fas fa-plus"></i> Create Room Type
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createRoomTypeJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="createRoomTypeResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createRoomTypeResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Room Type -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/RoomType/{roomTypeId}
                    </h5>
                    <p class="text-muted">Update an existing room type</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <label class="form-label">Room Type ID:</label>
                            <input type="number" id="updateRoomTypeId" class="form-control" placeholder="Enter Room Type ID">
                        </div>
                        <div class="col-md-9">
                            <label class="form-label">Request Body (JSON):</label>
                            <textarea id="updateRoomTypeJson" class="json-editor" rows="15">{
  "zaaerId": null,
  "hotelId": 1,
  "roomTypeName": "Deluxe Suite Updated",
  "roomTypeDesc": "Updated spacious deluxe suite with city view",
  "baseRate": 600.00,
  "seasonRate": 900.00
}</textarea>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerRoomType()">
                                <i class="fas fa-edit"></i> Update Room Type
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateRoomTypeJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="updateRoomTypeResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateRoomTypeResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Room Types -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/RoomType/hotel/{hotelId}
                    </h5>
                    <p class="text-muted">Get all room types for a specific hotel</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Hotel ID:</label>
                            <input type="number" id="getRoomTypeHotelId" class="form-control" placeholder="Enter Hotel ID" value="1">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getAllZaaerRoomTypes()" style="margin-top: 25px;">
                                <i class="fas fa-list"></i> Get All Room Types
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetAllRoomTypesResponse()" style="margin-top: 25px;">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getAllRoomTypesResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getAllRoomTypesResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get Room Type by ID -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/RoomType/{roomTypeId}
                    </h5>
                    <p class="text-muted">Get a specific room type by ID</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Room Type ID:</label>
                            <input type="number" id="getRoomTypeById" class="form-control" placeholder="Enter Room Type ID">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getZaaerRoomTypeById()" style="margin-top: 25px;">
                                <i class="fas fa-search"></i> Get Room Type by ID
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetRoomTypeByIdResponse()" style="margin-top: 25px;">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getRoomTypeByIdResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getRoomTypeByIdResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Delete Room Type -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-delete">DELETE</span>
                        /api/zaaer/RoomType/{roomTypeId}
                    </h5>
                    <p class="text-muted">Delete a room type by ID</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Room Type ID:</label>
                            <input type="number" id="deleteRoomTypeId" class="form-control" placeholder="Enter Room Type ID">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-danger" onclick="deleteZaaerRoomType()" style="margin-top: 25px;">
                                <i class="fas fa-trash"></i> Delete Room Type
                            </button>
                        </div>
                    </div>
                    
                    <div id="deleteRoomTypeResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="deleteRoomTypeResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Zaaer Building + Floors Endpoint -->
            <div class="section-card" id="building-floors-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-building"></i>
                    Zaaer Building + Floors Management
                </div>

                <!-- Create Building with Floors -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/ZaaerBuilding
                    </h5>
                    <p class="text-muted">Create a building with its floors in one transactional request</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createBuildingJson" class="json-editor" rows="15">{
  "zaaerId": null,
    "hotelId": 1,
  "buildingName": "Block A",
  "buildingNumber": "A001",
  "address": "123 Main Street, Downtown",
  "floors": [
    {
    "floorNumber": 1,
    "floorName": "Ground Floor"
  },
  {
    "floorNumber": 2,
    "floorName": "First Floor"
  },
  {
    "floorNumber": 3,
    "floorName": "Second Floor"
  }
  ]
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerBuildingWithFloors()">
                                <i class="fas fa-plus"></i> Create Building + Floors
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createBuildingJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="createBuildingResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createBuildingResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Building with Floors -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerBuilding
                    </h5>
                    <p class="text-muted">Update an existing building and its floors in one transactional request</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateBuildingJson" class="json-editor" rows="15">{
  "zaaerId": null,
  "buildingId": 118,
  "hotelId": 1,
  "buildingName": "Updated Block A",
  "buildingNumber": "A001-UPDATED",
  "address": "123 Main Street, Downtown - Updated",
  "floors": [
    {
      "floorId": 586,
      "floorNumber": 1,
      "floorName": "Updated Ground Floor"
    },
    {
      "floorId": 587,
      "floorNumber": 2,
      "floorName": "Updated First Floor"
    },
    {
      "floorNumber": 3,
      "floorName": "New Third Floor"
    }
  ]
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-4">
                            <button class="btn btn-warning" onclick="updateZaaerBuildingWithFloors()">
                                <i class="fas fa-edit"></i> Update (Full)
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-success" onclick="updateZaaerBuildingWithFloorsSafe()">
                                <i class="fas fa-shield-alt"></i> Update (Safe)
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateBuildingJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div class="mt-2">
                        <small class="text-muted">
                            <strong>Update (Full):</strong> Updates building and floors, removes floors not in the list (may fail if apartments depend on floors)<br>
                            <strong>Update (Safe):</strong> Only adds/updates floors, never deletes existing ones (prevents foreign key conflicts)
                        </small>
                    </div>
                    
                    <div id="updateBuildingResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateBuildingResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Buildings with Floors -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerBuilding/hotel/{hotelId}
                    </h5>
                    <p class="text-muted">Get all buildings with their floors for a specific hotel</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Hotel ID:</label>
                        <input type="number" id="getBuildingsHotelId" class="form-control" value="1" placeholder="Enter Hotel ID">
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-info" onclick="getAllZaaerBuildingsWithFloors()">
                                <i class="fas fa-list"></i> Get All Buildings + Floors
                            </button>
                        </div>
                    </div>
                    
                    <div id="getBuildingsResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getBuildingsResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Zaaer Users Management -->
            <div class="section-card" id="users-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-users"></i>
                    Zaaer Users Management
                </div>

                <!-- Create User -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/ZaaerUser
                    </h5>
                    <p class="text-muted">Create a new user</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createUserJson" class="json-editor" rows="20">{
  "zaaerId": 24,
  "hotelId": 11,
  "firstName": "KKKK",
  "lastName": "LLLL",
  "title": "",
  "email": "ss@gmail.com",
  "phoneNumber": "+9665999245998",
  "businessPhoneNumber": "",
  "address": "",
  "userType": "employee",
  "roleId": null,
  "status": 1,
  "changePassword": 0,
  "gender": "male",
  "department": "استقبال",
  "description": ""
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerUser()">
                                <i class="fas fa-plus"></i> Create User
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createUserJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="createUserResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createUserResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update User -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerUser
                    </h5>
                    <p class="text-muted">Update an existing user</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateUserJson" class="json-editor" rows="20">{
  "zaaerId": 23,
  "hotelId": 11,
  "firstName": "MMMM",
  "lastName": "NNNN",
  "title": "Mr",
  "email": "ai@maham.com.sa",
  "phoneNumber": "+966578245840",
  "businessPhoneNumber": "",
  "address": "",
  "userType": "employee",
  "roleId": null,
  "status": 1,
  "changePassword": 0,
  "gender": "male",
  "department": "استقبال",
  "description": ""
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerUser()">
                                <i class="fas fa-edit"></i> Update User
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateUserJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="updateUserResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateUserResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Users -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerUser/hotel/{hotelId}
                    </h5>
                    <p class="text-muted">Get all users for a specific hotel</p>
                    
                    <div class="mb-3">
                            <label class="form-label">Hotel ID:</label>
                        <input type="number" id="getUsersHotelId" class="form-control" value="1" placeholder="Enter Hotel ID">
                        </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-info" onclick="getAllZaaerUsers()">
                                <i class="fas fa-list"></i> Get All Users
                            </button>
                        </div>
                    </div>
                    
                    <div id="getUsersResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getUsersResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Zaaer Roles Management -->
            <div class="section-card" id="roles-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-user-shield"></i>
                    Zaaer Roles Management
                </div>

                <!-- Create Role -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/ZaaerRole
                    </h5>
                    <p class="text-muted">Create a new role with permissions</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createRoleJson" class="json-editor" rows="15">{
  "zaaerId": null,
  "hotelId": 1,
  "roleName": "مدير الحجوزات",
  "roleDescription": "دور مدير الحجوزات مع صلاحيات محددة",
  "permissionIds": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
  "isActive": true
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerRole()">
                                <i class="fas fa-plus"></i> Create Role
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createRoleJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="createRoleResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createRoleResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Role -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerRole
                    </h5>
                    <p class="text-muted">Update an existing role and its permissions</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateRoleJson" class="json-editor" rows="15">{
  "zaaerId": null,
  "roleId": 1,
  "hotelId": 1,
  "roleName": "مدير الحجوزات المحدث",
  "roleDescription": "دور مدير الحجوزات المحدث مع صلاحيات محددة",
  "permissionIds": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
  "isActive": true
}</textarea>
                        </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerRole()">
                                <i class="fas fa-edit"></i> Update Role
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateRoleJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="updateRoleResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateRoleResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Roles -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerRole/hotel/{hotelId}
                    </h5>
                    <p class="text-muted">Get all roles for a specific hotel</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Hotel ID:</label>
                        <input type="number" id="getRolesHotelId" class="form-control" value="1" placeholder="Enter Hotel ID">
                        </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-info" onclick="getAllZaaerRoles()">
                                <i class="fas fa-list"></i> Get All Roles
                            </button>
                        </div>
                    </div>
                    
                    <div id="getRolesResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getRolesResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Permissions -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerRole/permissions
                    </h5>
                    <p class="text-muted">Get all available permissions</p>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-info" onclick="getAllPermissions()">
                                <i class="fas fa-list"></i> Get All Permissions
                            </button>
                </div>
            </div>

                    <div id="getPermissionsResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getPermissionsResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>
            <div class="section-card" id="apartments-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-home"></i>
                    Zaaer Apartment Management
                </div>

                <!-- Create Apartment -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/Apartment
                    </h5>
                    <p class="text-muted">Create a single apartment</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createApartmentJson" class="json-editor" rows="15">{
  "zaaerId": 523,
  "hotelId": 11,
  "buildingId": 9,
  "floorId": 46,
  "roomTypeId": 34,
  "apartmentCode": "800",
  "apartmentName": "800",
  "status": "vacant"
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerApartment()">
                                <i class="fas fa-plus"></i> Create Apartment
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createApartmentJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="createApartmentResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createApartmentResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Apartment -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/Apartment/{zaaerId}
                    </h5>
                    <p class="text-muted">Update an existing apartment by Zaaer ID</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Zaaer ID:</label>
                            <input type="number" id="updateApartmentId" class="form-control" placeholder="Enter Zaaer ID">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateApartmentJson" class="json-editor" rows="11">{
  "zaaerId": 466,
  "hotelId": 11,
  "buildingId": 9,
  "floorId": 39,
  "roomTypeId": 36,
  "apartmentCode": "112",
  "housekeepingStatus": "clean",
  "apartmentName": "112",
  "status": "rented"
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerApartment()">
                                <i class="fas fa-edit"></i> Update Apartment
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateApartmentJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="updateApartmentResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateApartmentResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Apartments -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/Apartment/hotel/{hotelId}
                    </h5>
                    <p class="text-muted">Get all apartments for a specific hotel</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Hotel ID:</label>
                            <input type="number" id="getApartmentHotelId" class="form-control" placeholder="Enter Hotel ID" value="1">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getAllZaaerApartments()" style="margin-top: 25px;">
                                <i class="fas fa-list"></i> Get All Apartments
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetAllApartmentsResponse()" style="margin-top: 25px;">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getAllApartmentsResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getAllApartmentsResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get Apartment by ID -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/Apartment/{apartmentId}
                    </h5>
                    <p class="text-muted">Get a specific apartment by ID</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Apartment ID:</label>
                            <input type="number" id="getApartmentById" class="form-control" placeholder="Enter Apartment ID">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getZaaerApartmentById()" style="margin-top: 25px;">
                                <i class="fas fa-search"></i> Get Apartment
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetApartmentByIdResponse()" style="margin-top: 25px;">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getApartmentByIdResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getApartmentByIdResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Apartment by Code -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/Apartment/code/{apartmentCode}
                    </h5>
                    <p class="text-muted">Update an apartment by apartment code</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Apartment Code:</label>
                            <input type="text" id="updateApartmentByCodeCode" class="form-control" placeholder="Enter Apartment Code" value="A101">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateApartmentByCodeJson" class="json-editor" rows="10">{
  "zaaerId": null,
  "hotelId": 1,
  "buildingId": 118,
  "floorId": 586,
  "roomTypeId": 254,
  "apartmentCode": "A101",
  "apartmentName": "Updated Deluxe Room A101",
  "status": "maintenance"
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerApartmentByCode()">
                                <i class="fas fa-edit"></i> Update Apartment by Code
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateApartmentByCodeJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="updateApartmentByCodeResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateApartmentByCodeResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Delete Apartment -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-delete">DELETE</span>
                        /api/zaaer/Apartment/{apartmentId}
                    </h5>
                    <p class="text-muted">Delete an apartment by ID</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Apartment ID:</label>
                            <input type="number" id="deleteApartmentId" class="form-control" placeholder="Enter Apartment ID">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-danger" onclick="deleteZaaerApartment()" style="margin-top: 25px;">
                                <i class="fas fa-trash"></i> Delete Apartment
                            </button>
                        </div>
                    </div>
                    
                    <div id="deleteApartmentResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="deleteApartmentResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Maintenance Section -->
            <div class="section-card" id="maintenance-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-tools"></i>
                    Zaaer Maintenance Management
                </div>

                <!-- Create Maintenance -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/Maintenance
                    </h5>
                    <p class="text-muted">Create a new maintenance record</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createMaintenanceJson" class="json-editor" rows="10">{
  "zaaerId": 33,
  "hotelId": 11,
  "unitId": 540,
  "userId": 20,
  "fromDate": "2025-11-05",
  "toDate": "2025-11-06",
  "reason": "maintenance",
  "comment": "test maintance"
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerMaintenance()">
                                <i class="fas fa-plus"></i> Create Maintenance
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-secondary" onclick="formatJson('createMaintenanceJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="createMaintenanceResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createMaintenanceResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Maintenance -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/Maintenance
                    </h5>
                    <p class="text-muted">Update an existing maintenance record</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateMaintenanceJson" class="json-editor" rows="10">{
  "zaaerId": 33,
  "hotelId": 11,
  "unitId": 540,
  "userId": 20,
  "fromDate": "2025-11-05",
  "toDate": "2025-11-06",
  "reason": "staff_shortage",
  "comment": "test shortage"
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerMaintenance()">
                                <i class="fas fa-edit"></i> Update Maintenance
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateMaintenanceJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="updateMaintenanceResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateMaintenanceResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Delete Maintenance -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-delete">DELETE</span>
                        /api/zaaer/Maintenance/{zaaerId}
                    </h5>
                    <p class="text-muted">Delete a maintenance record and set apartment status to vacant</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Zaaer ID:</label>
                            <input type="number" id="deleteMaintenanceZaaerId" class="form-control" placeholder="Enter Zaaer ID" value="33">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-danger" onclick="deleteZaaerMaintenance()" style="margin-top: 25px;">
                                <i class="fas fa-trash"></i> Delete Maintenance
                            </button>
                        </div>
                    </div>
                    
                    <div id="deleteMaintenanceResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="deleteMaintenanceResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Taxes Section -->
            <div class="section-card" id="taxes-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-percent"></i>
                    Zaaer Taxes Management
                </div>

                <!-- Create Tax -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/Tax
                    </h5>
                    <p class="text-muted">Create a new tax record</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createTaxJson" class="json-editor" rows="12">{
  "zaaerId": 22,
  "taxId": null,
  "hotelId": 11,
  "taxName": "test vat 1",
  "taxRate": "16.00",
  "method": "percentage",
  "enabled": 1,
  "taxType": "VAT",
  "taxCode": "VAT",
  "applyon": null
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerTax()">
                                <i class="fas fa-plus"></i> Create Tax
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-secondary" onclick="formatJson('createTaxJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="createTaxResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createTaxResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Tax -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/Tax/{zaaerId}
                    </h5>
                    <p class="text-muted">Update an existing tax record</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Zaaer ID:</label>
                            <input type="number" id="updateTaxZaaerId" class="form-control" placeholder="Enter Zaaer ID" value="22">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateTaxJson" class="json-editor" rows="12">{
  "zaaerId": 17,
  "taxId": null,
  "hotelId": 11,
  "taxName": "VAT",
  "taxRate": "15.00",
  "method": "percentage",
  "enabled": 1,
  "taxType": "VAT",
  "taxCode": "VAT",
  "applyon": null
}</textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerTax()">
                                <i class="fas fa-edit"></i> Update Tax
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateTaxJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="updateTaxResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateTaxResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Delete Tax -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-delete">DELETE</span>
                        /api/zaaer/Tax/{zaaerId}
                    </h5>
                    <p class="text-muted">Delete a tax record (soft delete - updates enabled to false)</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Zaaer ID:</label>
                            <input type="number" id="deleteTaxZaaerId" class="form-control" placeholder="Enter Zaaer ID" value="22">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-danger" onclick="deleteZaaerTax()" style="margin-top: 25px;">
                                <i class="fas fa-trash"></i> Delete Tax
                            </button>
                        </div>
                    </div>
                    
                    <div id="deleteTaxResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="deleteTaxResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Base Rates Section -->
            <div class="section-card" id="base-rates-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-dollar-sign"></i>
                    Zaaer Base Rates Management
                </div>

                <!-- Create Base Rate -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/ZaaerRoomTypeRate
                    </h5>
                    <p class="text-muted">Create a new base rate for a room type</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createBaseRateJson" class="json-editor" rows="15">{
  "zaaerId": null,
  "roomTypeId": 254,
  "hotelId": 1,
  "dailyRateLowWeekdays": 100.00,
  "dailyRateHighWeekdays": 150.00,
  "dailyRateMin": 100.00,
  "monthlyRate": 3000.00,
  "monthlyRateMin": 2500.00,
  "otaRateLowWeekdays": 100.00,
  "otaRateHighWeekdays": 200.00
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerBaseRate()">
                                <i class="fas fa-plus"></i> Create Base Rate
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createBaseRateJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="createBaseRateResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createBaseRateResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Base Rate -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/ZaaerRoomTypeRate/{rateId}
                    </h5>
                    <p class="text-muted">Update an existing base rate</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Rate ID:</label>
                            <input type="number" id="updateBaseRateId" class="form-control" placeholder="Enter Rate ID">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateBaseRateJson" class="json-editor" rows="15">{
  "zaaerId": null,
  "roomTypeId": 254,
  "hotelId": 1,
  "dailyRateLowWeekdays": 120.00,
  "dailyRateHighWeekdays": 180.00,
  "dailyRateMin": 110.00,
  "monthlyRate": 3500.00,
  "monthlyRateMin": 3000.00,
  "otaRateLowWeekdays": 110.00,
  "otaRateHighWeekdays": 210.00
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerBaseRate()">
                                <i class="fas fa-edit"></i> Update Base Rate
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateBaseRateJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="updateBaseRateResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateBaseRateResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Base Rates by Hotel -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerRoomTypeRate/hotel/{hotelId}
                    </h5>
                    <p class="text-muted">Get all base rates for a specific hotel</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Hotel ID:</label>
                            <input type="number" id="getBaseRateHotelId" class="form-control" placeholder="Enter Hotel ID" value="1">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getAllZaaerBaseRates()" style="margin-top: 25px;">
                                <i class="fas fa-list"></i> Get All Base Rates
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetAllBaseRatesResponse()" style="margin-top: 25px;">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getAllBaseRatesResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getAllBaseRatesResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get Base Rate by ID -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerRoomTypeRate/{rateId}
                    </h5>
                    <p class="text-muted">Get a specific base rate by ID</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Rate ID:</label>
                            <input type="number" id="getBaseRateById" class="form-control" placeholder="Enter Rate ID">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getZaaerBaseRateById()" style="margin-top: 25px;">
                                <i class="fas fa-search"></i> Get Base Rate
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetBaseRateByIdResponse()" style="margin-top: 25px;">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getBaseRateByIdResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getBaseRateByIdResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get Base Rates by Room Type -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/ZaaerRoomTypeRate/roomtype/{roomTypeId}
                    </h5>
                    <p class="text-muted">Get all base rates for a specific room type</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Room Type ID:</label>
                            <input type="number" id="getBaseRateRoomTypeId" class="form-control" placeholder="Enter Room Type ID" value="254">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getZaaerBaseRatesByRoomType()" style="margin-top: 25px;">
                                <i class="fas fa-list"></i> Get Rates by Room Type
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetBaseRatesByRoomTypeResponse()" style="margin-top: 25px;">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getBaseRatesByRoomTypeResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getBaseRatesByRoomTypeResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Delete Base Rate -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-delete">DELETE</span>
                        /api/zaaer/ZaaerRoomTypeRate/{rateId}
                    </h5>
                    <p class="text-muted">Delete a base rate by ID</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Rate ID:</label>
                            <input type="number" id="deleteBaseRateId" class="form-control" placeholder="Enter Rate ID">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-danger" onclick="deleteZaaerBaseRate()" style="margin-top: 25px;">
                                <i class="fas fa-trash"></i> Delete Base Rate
                            </button>
                        </div>
                    </div>
                    
                    <div id="deleteBaseRateResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="deleteBaseRateResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Hotel Settings Section -->
            <div class="section-card" id="hotel-settings-section" style="display: none;">
                <div class="section-title">
                    <i class="fas fa-hotel"></i>
                    Hotel Settings Management
                </div>

                <!-- Create Hotel Settings -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-post">POST</span>
                        /api/zaaer/HotelSettings
                    </h5>
                    <p class="text-muted">Create new hotel settings</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="createHotelSettingsJson" class="json-editor" rows="18">{
  "hotelCode": "Dammam2",
  "hotelName": "الدمام 2",
  "vatPercent": 15.00,
  "lodgingTax": 2.50,
  "defaultCurrency": "SAR",
  "companyName": "Aleairy Company",
  "companyVatno": "123456789012345",
  "companyCrn": "1010123456",
  "logoUrl": "https://example.com/logo.png",
  "address": "123 King Fahd Road, Riyadh, Saudi Arabia",
  "phone": "+966112345678",
  "email": "info@bebahotel.com"
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-success" onclick="createZaaerHotelSettings()">
                                <i class="fas fa-plus"></i> Create Hotel Settings
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-success" onclick="formatJson('createHotelSettingsJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="createHotelSettingsResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="createHotelSettingsResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Update Hotel Settings -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-put">PUT</span>
                        /api/zaaer/HotelSettings/{hotelId}
                    </h5>
                    <p class="text-muted">Update existing hotel settings</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Hotel ID:</label>
                            <input type="number" id="updateHotelSettingsId" class="form-control" placeholder="Enter Hotel ID" value="1">
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Request Body (JSON):</label>
                        <textarea id="updateHotelSettingsJson" class="json-editor" rows="20">{
  "zaaerId": 11,
  "hotelCode": "Dammam1",
  "hotelName": "المدينة ١٤",
  "defaultCurrency": "SAR",
  "companyName": "المدينة ١٤",
  "logoUrl": null,
  "taxNumber": "",
  "crNumber": "",
  "phone": "548245840",
  "email": "beba.mohamed@gmail.com",
  "countryCode": "SA",
  "city": "المدينة المنورة",
  "contactPerson": "MUHAMMEDD",
  "address": "المدينة المنورة",
  "latitude": "",
  "longitude": "",
  "enabled": 1,
  "totalRooms": 0,
  "propertyType": "Hotel"
}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-warning" onclick="updateZaaerHotelSettings()">
                                <i class="fas fa-edit"></i> Update Hotel Settings
                            </button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-outline-warning" onclick="formatJson('updateHotelSettingsJson')">
                                <i class="fas fa-code"></i> Format JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="updateHotelSettingsResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="updateHotelSettingsResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get All Hotel Settings -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/HotelSettings
                    </h5>
                    <p class="text-muted">Get all hotel settings</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getAllZaaerHotelSettings()">
                                <i class="fas fa-list"></i> Get All Hotel Settings
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetAllHotelSettingsResponse()">
                                <i class="fas fa-code"></i> Beautify JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getAllHotelSettingsResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getAllHotelSettingsResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Get Hotel Settings by ID -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-get">GET</span>
                        /api/zaaer/HotelSettings/{hotelId}
                    </h5>
                    <p class="text-muted">Get hotel settings by ID</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Hotel ID:</label>
                            <input type="number" id="getHotelSettingsById" class="form-control" placeholder="Enter Hotel ID" value="1">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-info" onclick="getZaaerHotelSettingsById()" style="margin-top: 25px;">
                                <i class="fas fa-search"></i> Get Hotel Settings by ID
                            </button>
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-info" onclick="formatGetHotelSettingsByIdResponse()" style="margin-top: 25px;">
                                <i class="fas fa-code"></i> Beautify JSON
                            </button>
                        </div>
                    </div>
                    
                    <div id="getHotelSettingsByIdResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="getHotelSettingsByIdResponseJson" class="response-json"></div>
                    </div>
                </div>

                <!-- Delete Hotel Settings -->
                <div class="endpoint-card">
                    <h5>
                        <span class="method-badge method-delete">DELETE</span>
                        /api/zaaer/HotelSettings/{hotelId}
                    </h5>
                    <p class="text-muted">Delete hotel settings by ID</p>
                    
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Hotel ID:</label>
                            <input type="number" id="deleteHotelSettingsId" class="form-control" placeholder="Enter Hotel ID">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-danger" onclick="deleteZaaerHotelSettings()" style="margin-top: 25px;">
                                <i class="fas fa-trash"></i> Delete Hotel Settings
                            </button>
                        </div>
                    </div>
                    
                    <div id="deleteHotelSettingsResponse" class="response-section" style="display: none;">
                        <h6>Response:</h6>
                        <div id="deleteHotelSettingsResponseJson" class="response-json"></div>
                    </div>
                </div>
            </div>

            <!-- Loading Indicator -->
            <div id="loading" class="loading">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-2">Loading...</p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const API_BASE_URL = window.location.origin;
        let customers = [];
        let currentHotelCode = '';
        let availableHotels = [];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadAvailableHotels();
        });

        // Load available hotels from Master DB
        async function loadAvailableHotels() {
            try {
                console.log('🏨 Loading available hotels from Master DB...');
                
                const response = await fetch(`${API_BASE_URL}/api/Tenant/hotels`);
                
                if (!response.ok) {
                    throw new Error('Failed to fetch hotels');
                }
                
                availableHotels = await response.json();
                console.log('✅ Loaded hotels:', availableHotels);
                
                // Populate hotel selector
                const hotelSelector = document.getElementById('hotelSelector');
                hotelSelector.innerHTML = '<option value="">اختر الفندق...</option>';
                
                availableHotels.forEach(hotel => {
                    const option = document.createElement('option');
                    option.value = hotel.code;
                    option.textContent = `${hotel.name} (${hotel.code})`;
                    hotelSelector.appendChild(option);
                });
                
                // Load saved hotel from localStorage
                const savedHotel = localStorage.getItem('selectedHotelCode');
                if (savedHotel && availableHotels.some(h => h.code === savedHotel)) {
                    hotelSelector.value = savedHotel;
                    currentHotelCode = savedHotel;
                    console.log('✅ Loaded saved hotel:', savedHotel);
                    
                    const hotel = availableHotels.find(h => h.code === savedHotel);
                    if (hotel) {
                        showNotification(`تم تحميل فندق: ${hotel.name}`, 'success');
                    }
                } else if (availableHotels.length > 0) {
                    // Select first hotel by default
                    hotelSelector.value = availableHotels[0].code;
                    currentHotelCode = availableHotels[0].code;
                    localStorage.setItem('selectedHotelCode', currentHotelCode);
                    console.log('✅ Selected default hotel:', availableHotels[0].code);
                }
                
            } catch (error) {
                console.error('❌ Error loading hotels:', error);
                showNotification('⚠️ فشل تحميل قائمة الفنادق', 'error');
                
                // Fallback to manual input
                const hotelSelector = document.getElementById('hotelSelector');
                hotelSelector.innerHTML = '<option value="">خطأ في التحميل - أدخل الكود يدوياً</option>';
            }
        }

        // Change hotel handler
        function changeHotel() {
            const hotelSelector = document.getElementById('hotelSelector');
            const selectedCode = hotelSelector.value;
            
            if (!selectedCode) {
                currentHotelCode = '';
                localStorage.removeItem('selectedHotelCode');
                showNotification('⚠️ لم يتم اختيار فندق', 'warning');
                return;
            }
            
            currentHotelCode = selectedCode;
            localStorage.setItem('selectedHotelCode', selectedCode);
            
            const hotel = availableHotels.find(h => h.code === selectedCode);
            if (hotel) {
                console.log('🏨 Hotel changed to:', hotel.name, '(' + hotel.code + ')');
                showNotification(`✅ تم التبديل إلى فندق: ${hotel.name}`, 'success');
            }
        }

        // Get current hotel code (for API calls)
        function getCurrentHotelCode() {
            if (!currentHotelCode) {
                showNotification('⚠️ يرجى اختيار فندق أولاً', 'warning');
                return null;
            }
            return currentHotelCode;
        }

        // Helper function to add X-Hotel-Code header to fetch options
        function getApiHeaders(additionalHeaders = {}) {
            const hotelCode = getCurrentHotelCode();
            
            if (!hotelCode) {
                throw new Error('No hotel selected');
            }
            
            return {
                'Content-Type': 'application/json',
                'X-Hotel-Code': hotelCode,
                ...additionalHeaders
            };
        }

        // Show notification - MUST BE FIRST
        function showNotification(message, type = 'info') {
            const alertClass = {
                'success': 'alert-success',
                'error': 'alert-danger',
                'warning': 'alert-warning',
                'info': 'alert-info'
            }[type] || 'alert-info';

            const notification = document.createElement('div');
            notification.className = `alert ${alertClass} alert-dismissible fade show position-fixed`;
            notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
            notification.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;

            document.body.appendChild(notification);

            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 5000);
        }

        // Show/Hide Loading
        function showLoading() {
            document.getElementById('loading').style.display = 'block';
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        // Show Notification Function
        function showNotification(message, type = 'info') {
            console.log(`📢 Notification [${type}]: ${message}`);
            
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.textContent = message;
            
            // Style the notification
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 20px;
                border-radius: 4px;
                color: white;
                font-weight: bold;
                z-index: 10000;
                opacity: 0;
                transition: opacity 0.3s ease;
                max-width: 300px;
                word-wrap: break-word;
            `;
            
            // Set background color based on type
            switch(type) {
                case 'success':
                    notification.style.backgroundColor = '#28a745';
                    break;
                case 'error':
                    notification.style.backgroundColor = '#dc3545';
                    break;
                case 'warning':
                    notification.style.backgroundColor = '#ffc107';
                    notification.style.color = '#000';
                    break;
                case 'info':
                default:
                    notification.style.backgroundColor = '#17a2b8';
                    break;
            }
            
            // Add to page
            document.body.appendChild(notification);
            
            // Show notification
            setTimeout(() => {
                notification.style.opacity = '1';
            }, 100);
            
            // Hide notification after 3 seconds
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Show Section (for sidebar navigation) - MAIN FUNCTION
        function showSection(sectionName, doNotify = true) {
            console.log('🔍 showSection called with:', sectionName);
            
            try {
                // Hide all sections
                const sections = ['customers-section', 'reservations-section', 'receipts-section', 'invoices-section', 'refunds-section', 'credit-notes-section', 'room-types-section', 'base-rates-section', 'seasonal-rates-section', 'rate-types-section', 'zatca-section', 'integration-responses-section', 'activity-logs-section', 'shomoos-section', 'ntmp-section', 'banks-section', 'expenses-section', 'building-floors-section', 'users-section', 'roles-section', 'apartments-section', 'maintenance-section', 'taxes-section', 'hotel-settings-section', 'reservation-tools-section', 'reservation-switch-section'];
                
                sections.forEach(section => {
                    const element = document.getElementById(section);
                    if (element) {
                        element.style.display = 'none';
                    }
                });

                // Show selected section
                const selectedSectionId = sectionName + '-section';
                const selectedSection = document.getElementById(selectedSectionId);
                
                if (selectedSection) {
                    console.log('📥 Showing section:', selectedSectionId);
                    selectedSection.style.display = 'block';
                } else {
                    console.error('❌ Section not found:', selectedSectionId);
                }

                // Update active menu item - Remove active class from all links
                const menuLinks = document.querySelectorAll('.sidebar-menu a');
                menuLinks.forEach(link => {
                    link.classList.remove('active');
                });
                
                // Find and activate the clicked link
                const clickedLink = document.querySelector(`[onclick*="showSection('${sectionName}'"]`);
                if (clickedLink) {
                    clickedLink.classList.add('active');
                    console.log('✅ Active class added to:', clickedLink.textContent.trim());
                    
                    // Show notification to user (only if showNotification is true)
                    if (doNotify) {
                        const sectionNames = {
                            'customers': 'العملاء',
                            'reservations': 'الحجوزات', 
                            'receipts': 'سندات القبض',
                            'invoices': 'الفواتير',
                            'refunds': 'الاستردادات',
                            'credit-notes': 'الإشعارات الدائنة',
                            'room-types': 'أنواع الغرف',
                            'seasonal-rates': 'الأسعار الموسمية',
                            'zatca': 'تفاصيل زاتكا',
                            'floors': 'الطوابق',
                            'apartments': 'الشقق',
                            'maintenance': 'الصيانة',
                            'taxes': 'الضرائب',
                            'hotel-settings': 'إعدادات الفندق'
                        };
                        
                        const arabicName = sectionNames[sectionName] || sectionName;
                        showNotification(`تم الانتقال إلى قسم ${arabicName}`, 'info');
                    }
                } else {
                    console.error('❌ Could not find link for section:', sectionName);
                }
                
                console.log('✅ showSection completed successfully');
            } catch (error) {
                console.error('❌ Error in showSection:', error);
            }
        }

        // Toggle Sidebar
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            sidebar.classList.toggle('open');
            mainContent.classList.toggle('sidebar-open');
        }


        // Format JSON
        function formatJson(textareaId) {
            const textarea = document.getElementById(textareaId);
            try {
                const json = JSON.parse(textarea.value);
                textarea.value = JSON.stringify(json, null, 2);
                showNotification('JSON formatted successfully!', 'success');
            } catch (error) {
                showNotification('Invalid JSON format!', 'error');
            }
        }

        // Create Zaaer Customer
        async function createZaaerCustomer() {
            const jsonText = document.getElementById('createCustomerJson').value;
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Customer`, {
                    method: 'POST',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('createResponse');
                const responseJson = document.getElementById('createResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Customer created successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error creating customer', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Update Zaaer Customer
        async function updateZaaerCustomer() {
            const customerId = document.getElementById('updateCustomerId').value;
            const jsonText = document.getElementById('updateCustomerJson').value;
            
            if (!customerId) {
                showNotification('Please enter Customer ID', 'warning');
                return;
            }
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Customer/${customerId}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('updateResponse');
                const responseJson = document.getElementById('updateResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Customer updated successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating customer', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Update Zaaer Customer by Number
        async function updateZaaerCustomerByNumber() {
            const customerNo = document.getElementById('updateCustomerNo').value;
            const jsonText = document.getElementById('updateCustomerByNoJson').value;
            if (!customerNo) { showNotification('Please enter Customer No', 'warning'); return; }
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Customer/number/${encodeURIComponent(customerNo)}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });
                const responseData = await response.text();
                const sec = document.getElementById('updateByNoResponse');
                const box = document.getElementById('updateByNoResponseJson');
                sec.style.display = 'block'; box.textContent = responseData; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Customer updated by number!' : '❌ Error updating by number', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        // Get All Zaaer Customers
        async function getAllZaaerCustomers() {
            const hotelId = document.getElementById('getHotelId').value;
            
            if (!hotelId) {
                showNotification('Please enter Hotel ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Customer/hotel/${hotelId}`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getAllResponse');
                const responseJson = document.getElementById('getAllResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Customers retrieved successfully!', 'success');
                    
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving customers', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Delete Zaaer Customer
        async function deleteZaaerCustomer() {
            const customerId = document.getElementById('deleteCustomerId').value;
            
            if (!customerId) {
                showNotification('Please enter Customer ID', 'warning');
                return;
            }
            
            if (!confirm('Are you sure you want to delete this customer?')) {
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Customer/${customerId}`, {
                    method: 'DELETE',
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                
                const responseSection = document.getElementById('deleteResponse');
                const responseJson = document.getElementById('deleteResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = 'Customer deleted successfully (204 No Content)';
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Customer deleted successfully!', 'success');
                    loadAllCustomers(); // Refresh the list
                } else {
                    const responseData = await response.text();
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error deleting customer', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }


        // Fill Customer ID for editing
        function fillCustomerId(customerId) {
            document.getElementById('updateCustomerId').value = customerId;
            document.getElementById('deleteCustomerId').value = customerId;
            showNotification(`Customer ID ${customerId} filled in forms`, 'info');
        }

        // Sidebar Functions
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            sidebar.classList.toggle('open');
            mainContent.classList.toggle('sidebar-open');
        }

        // Format Get All Response JSON
        function formatGetAllResponse() {
            const responseJson = document.getElementById('getAllResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in response!', 'error');
                }
            } else {
                showNotification('No response data to format!', 'warning');
            }
        }


        // ===== ZAAER RESERVATION FUNCTIONS =====

        // Create Zaaer Reservation
        async function createZaaerReservation() {
            const jsonText = document.getElementById('createReservationJson').value;
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservation`, {
                    method: 'POST',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('createReservationResponse');
                const responseJson = document.getElementById('createReservationResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Reservation created successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error creating reservation', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Update Zaaer Reservation
        async function updateZaaerReservation() {
            const reservationId = document.getElementById('updateReservationId').value;
            const jsonText = document.getElementById('updateReservationJson').value;
            
            if (!reservationId) {
                showNotification('Please enter Reservation ID', 'warning');
                return;
            }
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservation/${reservationId}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('updateReservationResponse');
                const responseJson = document.getElementById('updateReservationResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Reservation updated successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating reservation', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get All Zaaer Reservations
        async function getAllZaaerReservations() {
            const hotelId = document.getElementById('getReservationHotelId').value;
            
            if (!hotelId) {
                showNotification('Please enter Hotel ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservation/hotel/${hotelId}`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getAllReservationsResponse');
                const responseJson = document.getElementById('getAllReservationsResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Reservations retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving reservations', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get Zaaer Reservation by ID
        async function getZaaerReservationById() {
            const reservationId = document.getElementById('getReservationById').value;
            
            if (!reservationId) {
                showNotification('Please enter Reservation ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservation/${reservationId}`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getReservationByIdResponse');
                const responseJson = document.getElementById('getReservationByIdResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Reservation retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving reservation', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }
        // Tools section variants (separate inputs/outputs to avoid any interference)
        async function getZaaerReservationById_Tools() {
            const reservationId = document.getElementById('getReservationById_tools').value;
            if (!reservationId) { showNotification('Please enter Reservation ID', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservation/${reservationId}`, { headers: { 'X-Hotel-Code': getCurrentHotelCode() } });
                const responseData = await response.text();
                const responseSection = document.getElementById('getReservationByIdResponse_tools');
                const responseJson = document.getElementById('getReservationByIdResponseJson_tools');
                responseSection.style.display = 'block';
                if (response.ok) { responseJson.textContent = responseData; responseJson.style.color = '#e2e8f0'; showNotification('✅ Reservation retrieved successfully!', 'success'); }
                else { responseJson.textContent = responseData; responseJson.style.color = '#f56565'; showNotification('❌ Error retrieving reservation', 'error'); }
            } catch (error) { showNotification(`❌ Error: ${error.message}`, 'error'); }
            finally { hideLoading(); }
        }
        function formatGetReservationByIdResponse_Tools() {
            const responseJson = document.getElementById('getReservationByIdResponseJson_tools');
            if (responseJson.textContent.trim()) { try { const json = JSON.parse(responseJson.textContent); responseJson.textContent = JSON.stringify(json, null, 2); showNotification('Reservation Response JSON formatted successfully!', 'success'); } catch { showNotification('Invalid JSON format in reservation response!', 'error'); } }
            else { showNotification('No reservation response data to format!', 'warning'); }
        }

        async function getZaaerReservationByNumber_Tools() {
            const reservationNo = document.getElementById('getReservationByNumber_tools').value;
            if (!reservationNo) { showNotification('Please enter Reservation Number', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservation/number/${encodeURIComponent(reservationNo)}`, { headers: { 'X-Hotel-Code': getCurrentHotelCode() } });
                const responseData = await response.text();
                const responseSection = document.getElementById('getReservationByNumberResponse_tools');
                const responseJson = document.getElementById('getReservationByNumberResponseJson_tools');
                responseSection.style.display = 'block';
                if (response.ok) { responseJson.textContent = responseData; responseJson.style.color = '#e2e8f0'; showNotification('✅ Reservation retrieved successfully by number!', 'success'); }
                else { responseJson.textContent = responseData; responseJson.style.color = '#f56565'; showNotification('❌ Error retrieving reservation by number', 'error'); }
            } catch (error) { showNotification(`❌ Error: ${error.message}`, 'error'); }
            finally { hideLoading(); }
        }

        function formatGetReservationByNumberResponse_Tools() {
            const responseJson = document.getElementById('getReservationByNumberResponseJson_tools');
            if (responseJson.textContent.trim()) { try { const json = JSON.parse(responseJson.textContent); responseJson.textContent = JSON.stringify(json, null, 2); showNotification('Reservation (by number) Response JSON formatted successfully!', 'success'); } catch { showNotification('Invalid JSON format in reservation response!', 'error'); } }
            else { showNotification('No reservation response data to format!', 'warning'); }
        }

        // Create Reservation (Tools)
        async function createZaaerReservation_Tools() {
            const jsonText = document.getElementById('createReservationJson_tools').value;
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                            const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservation/tool`, { method: 'POST', headers: getApiHeaders(), body: jsonText });
                const responseData = await response.text();
                const responseSection = document.getElementById('createReservationResponse_tools');
                const responseJson = document.getElementById('createReservationResponseJson_tools');
                responseSection.style.display = 'block';
                if (response.ok) { responseJson.textContent = responseData; responseJson.style.color = '#e2e8f0'; showNotification('✅ Reservation created successfully!', 'success'); }
                else { responseJson.textContent = responseData; responseJson.style.color = '#f56565'; showNotification('❌ Error creating reservation', 'error'); }
            } catch (error) { showNotification(`❌ Error: ${error.message}`, 'error'); }
            finally { hideLoading(); }
        }

        // Update Reservation by ID (Tools)
        async function updateZaaerReservation_Tools() {
            const reservationId = document.getElementById('updateReservationId_tools').value;
            const jsonText = document.getElementById('updateReservationJson_tools').value;
            if (!reservationId) { showNotification('Please enter Reservation ID', 'warning'); return; }
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservation/${reservationId}`, { method: 'PUT', headers: getApiHeaders(), body: jsonText });
                const responseData = await response.text();
                const responseSection = document.getElementById('updateReservationResponse_tools');
                const responseJson = document.getElementById('updateReservationResponseJson_tools');
                responseSection.style.display = 'block';
                if (response.ok) { responseJson.textContent = responseData; responseJson.style.color = '#e2e8f0'; showNotification('✅ Reservation updated successfully!', 'success'); }
                else { responseJson.textContent = responseData; responseJson.style.color = '#f56565'; showNotification('❌ Error updating reservation', 'error'); }
            } catch (error) { showNotification(`❌ Error: ${error.message}`, 'error'); }
            finally { hideLoading(); }
        }

        // Update Reservation by Number (Tools)
        async function updateZaaerReservationByNumber_Tools() {
            const reservationNo = document.getElementById('updateReservationByNumber_tools').value;
            const jsonText = document.getElementById('updateReservationByNumberJson_tools').value;
            if (!reservationNo) { showNotification('Please enter Reservation Number', 'warning'); return; }
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservation/number/${encodeURIComponent(reservationNo)}`, { method: 'PUT', headers: getApiHeaders(), body: jsonText });
                const responseData = await response.text();
                const responseSection = document.getElementById('updateReservationByNumberResponse_tools');
                const responseJson = document.getElementById('updateReservationByNumberResponseJson_tools');
                responseSection.style.display = 'block';
                if (response.ok) { responseJson.textContent = responseData; responseJson.style.color = '#e2e8f0'; showNotification('✅ Reservation updated successfully by number!', 'success'); }
                else { responseJson.textContent = responseData; responseJson.style.color = '#f56565'; showNotification('❌ Error updating reservation by number', 'error'); }
            } catch (error) { showNotification(`❌ Error: ${error.message}`, 'error'); }
            finally { hideLoading(); }
        }

        // ===== Reservation Unit Day Rates functions ===== - COMMENTED OUT
        /*
        async function getReservationRates() {
            const reservationId = document.getElementById('getRatesReservationId').value;
            if (!reservationId) { showNotification('Please enter Reservation ID', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservationRates/${reservationId}`, { headers: getApiHeaders() });
                const data = await response.text();
                const sec = document.getElementById('getReservationRatesResponse');
                const box = document.getElementById('getReservationRatesResponseJson');
                sec.style.display = 'block'; box.textContent = data; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Rates fetched!' : '❌ Error fetching rates', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        function formatReservationRatesResponse() {
            const el = document.getElementById('getReservationRatesResponseJson');
            if (el && el.textContent.trim()) { try { el.textContent = JSON.stringify(JSON.parse(el.textContent), null, 2); showNotification('JSON formatted', 'success'); } catch { showNotification('Invalid JSON!', 'error'); } }
        }

        async function upsertReservationRates() {
            const reservationId = document.getElementById('upsertRatesReservationId').value;
            const jsonText = document.getElementById('upsertReservationRatesJson').value;
            if (!reservationId) { showNotification('Please enter Reservation ID', 'warning'); return; }
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservationRates/${reservationId}`, { method: 'PUT', headers: getApiHeaders(), body: jsonText });
                const text = await response.text();
                const sec = document.getElementById('upsertReservationRatesResponse');
                const box = document.getElementById('upsertReservationRatesResponseJson');
                sec.style.display = 'block'; box.textContent = text || 'No Content'; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Rates saved!' : '❌ Error saving rates', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        async function getReservationRates_Sidebar() {
            const reservationId = document.getElementById('getRatesReservationId_rates').value;
            if (!reservationId) { showNotification('Please enter Reservation ID', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservationRates/${reservationId}`, { headers: getApiHeaders() });
                const data = await response.text();
                const sec = document.getElementById('getReservationRatesResponse_rates');
                const box = document.getElementById('getReservationRatesResponseJson_rates');
                sec.style.display = 'block'; box.textContent = data; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Rates fetched!' : '❌ Error fetching rates', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        function formatReservationRatesResponse_Sidebar() {
            const el = document.getElementById('getReservationRatesResponseJson_rates');
            if (el && el.textContent.trim()) { try { el.textContent = JSON.stringify(JSON.parse(el.textContent), null, 2); showNotification('JSON formatted', 'success'); } catch { showNotification('Invalid JSON!', 'error'); } }
        }

        async function applyReservationRatesSame_Sidebar() {
            const reservationId = document.getElementById('applyRatesReservationId_rates').value;
            const jsonText = document.getElementById('applyReservationRatesJson_rates').value;
            if (!reservationId) { showNotification('Please enter Reservation ID', 'warning'); return; }
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservationRates/${reservationId}/apply-to-all`, { method: 'PUT', headers: getApiHeaders(), body: jsonText });
                const text = await response.text();
                const sec = document.getElementById('applyReservationRatesResponse_rates');
                const box = document.getElementById('applyReservationRatesResponseJson_rates');
                sec.style.display = 'block'; box.textContent = text || 'No Content'; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Rates applied!' : '❌ Error applying rates', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        async function upsertReservationRates_Sidebar() {
            const reservationId = document.getElementById('upsertRatesReservationId_rates').value;
            const jsonText = document.getElementById('upsertReservationRatesJson_rates').value;
            if (!reservationId) { showNotification('Please enter Reservation ID', 'warning'); return; }
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservationRates/${reservationId}`, { method: 'PUT', headers: getApiHeaders(), body: jsonText });
                const text = await response.text();
                const sec = document.getElementById('upsertReservationRatesResponse_rates');
                const box = document.getElementById('upsertReservationRatesResponseJson_rates');
                sec.style.display = 'block'; box.textContent = text || 'No Content'; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Rates saved!' : '❌ Error saving rates', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }
        */

        // ===== Reservation Unit Switch functions =====
        async function createReservationUnitSwitch() {
            const jsonText = document.getElementById('createReservationUnitSwitchJson').value;
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservationUnitSwitch`, { method: 'POST', headers: getApiHeaders(), body: jsonText });
                const text = await response.text();
                const sec = document.getElementById('createReservationUnitSwitchResponse');
                const box = document.getElementById('createReservationUnitSwitchResponseJson');
                sec.style.display = 'block'; box.textContent = text; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Switch created!' : '❌ Error creating switch', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        async function getReservationUnitSwitches() {
            const reservationId = document.getElementById('getReservationUnitSwitchReservationId').value;
            if (!reservationId) { showNotification('Please enter Reservation ID', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservationUnitSwitch/reservation/${reservationId}`, { headers: getApiHeaders() });
                const text = await response.text();
                const sec = document.getElementById('getReservationUnitSwitchesResponse');
                const box = document.getElementById('getReservationUnitSwitchesResponseJson');
                sec.style.display = 'block'; box.textContent = text; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Switches retrieved!' : '❌ Error retrieving switches', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        function formatReservationUnitSwitchesResponse() {
            const el = document.getElementById('getReservationUnitSwitchesResponseJson');
            if (el && el.textContent.trim()) { try { el.textContent = JSON.stringify(JSON.parse(el.textContent), null, 2); showNotification('JSON formatted', 'success'); } catch { showNotification('Invalid JSON!', 'error'); } }
        }

        // ===== Activity Logs functions =====
        async function createActivityLog() {
            const jsonText = document.getElementById('createActivityLogJson').value;
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerActivityLogs`, { method: 'POST', headers: getApiHeaders(), body: jsonText });
                const text = await response.text();
                const sec = document.getElementById('createActivityLogResponse');
                const box = document.getElementById('createActivityLogResponseJson');
                sec.style.display = 'block'; box.textContent = text; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Activity log sent!' : '❌ Error sending activity log', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        // GET Activity Logs removed by request – only POST is exposed in tester
        // Format Get Reservation by ID Response JSON
        function formatGetReservationByIdResponse() {
            const responseJson = document.getElementById('getReservationByIdResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Reservation Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in reservation response!', 'error');
                }
            } else {
                showNotification('No reservation response data to format!', 'warning');
            }
        }

        // Get Zaaer Reservation by Number
        async function getZaaerReservationByNumber() {
            const reservationNo = document.getElementById('getReservationByNumber').value;
            
            if (!reservationNo) {
                showNotification('Please enter Reservation Number', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservation/number/${encodeURIComponent(reservationNo)}`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getReservationByNumberResponse');
                const responseJson = document.getElementById('getReservationByNumberResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Reservation retrieved successfully by number!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving reservation by number', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Format Get Reservation by Number Response JSON
        function formatGetReservationByNumberResponse() {
            const responseJson = document.getElementById('getReservationByNumberResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Reservation (by number) Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in reservation response!', 'error');
                }
            } else {
                showNotification('No reservation response data to format!', 'warning');
            }
        }

        // Delete Zaaer Reservation
        async function deleteZaaerReservation() {
            const reservationId = document.getElementById('deleteReservationId').value;
            
            if (!reservationId) {
                showNotification('Please enter Reservation ID', 'warning');
                return;
            }
            
            if (!confirm('Are you sure you want to delete this reservation?')) {
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservation/${reservationId}`, {
                    method: 'DELETE',
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                
                const responseSection = document.getElementById('deleteReservationResponse');
                const responseJson = document.getElementById('deleteReservationResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = 'Reservation deleted successfully (204 No Content)';
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Reservation deleted successfully!', 'success');
                } else {
                    const responseData = await response.text();
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error deleting reservation', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Format Get All Reservations Response JSON
        function formatGetAllReservationsResponse() {
            const responseJson = document.getElementById('getAllReservationsResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Reservations Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in reservations response!', 'error');
                }
            } else {
                showNotification('No reservations response data to format!', 'warning');
            }
        }

        // ===== ZAAER PAYMENT RECEIPT FUNCTIONS =====

        // Create Zaaer Payment Receipt
        async function createZaaerPaymentReceipt() {
            const jsonText = document.getElementById('createPaymentReceiptJson').value;
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/PaymentReceipt`, {
                    method: 'POST',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('createPaymentReceiptResponse');
                const responseJson = document.getElementById('createPaymentReceiptResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Payment receipt created successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error creating payment receipt', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Update Zaaer Payment Receipt
        async function updateZaaerPaymentReceipt() {
            const receiptId = document.getElementById('updatePaymentReceiptId')?.value;
            const jsonText = document.getElementById('updatePaymentReceiptJson').value;
            
            if (!receiptId) {
                showNotification('Please enter Receipt ID', 'warning');
                return;
            }
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/PaymentReceipt/${receiptId}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('updatePaymentReceiptResponse');
                const responseJson = document.getElementById('updatePaymentReceiptResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Payment receipt updated successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating payment receipt', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Update Zaaer Payment Receipt by zaaerId
        async function updateZaaerPaymentReceiptByZaaerId() {
            const zaaerId = document.getElementById('updatePaymentReceiptZaaerId').value;
            const jsonText = document.getElementById('updatePaymentReceiptJson').value;
            
            if (!zaaerId) {
                showNotification('Please enter Zaaer ID', 'warning');
                return;
            }
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/PaymentReceipt/zaaer/${zaaerId}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('updatePaymentReceiptResponse');
                const responseJson = document.getElementById('updatePaymentReceiptResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Payment receipt updated successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating payment receipt', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Update Zaaer Payment Receipt by Receipt Number
        async function updateZaaerPaymentReceiptByNo() {
            const receiptNo = document.getElementById('updatePaymentReceiptByNo').value;
            const jsonText = document.getElementById('updatePaymentReceiptByNoJson').value;
            
            if (!receiptNo) {
                showNotification('Please enter Receipt Number', 'warning');
                return;
            }
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/PaymentReceipt/receipt-no/${encodeURIComponent(receiptNo)}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('updatePaymentReceiptByNoResponse');
                const responseJson = document.getElementById('updatePaymentReceiptByNoResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Payment receipt updated successfully by receipt number!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating payment receipt by receipt number', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get All Zaaer Payment Receipts
        async function getAllZaaerPaymentReceipts() {
            const hotelId = document.getElementById('getPaymentReceiptHotelId').value;
            
            if (!hotelId) {
                showNotification('Please enter Hotel ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/PaymentReceipt/hotel/${hotelId}`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getAllPaymentReceiptsResponse');
                const responseJson = document.getElementById('getAllPaymentReceiptsResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Payment receipts retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving payment receipts', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Delete Zaaer Payment Receipt
        async function deleteZaaerPaymentReceipt() {
            const receiptId = document.getElementById('deletePaymentReceiptId').value;
            
            if (!receiptId) {
                showNotification('Please enter Receipt ID', 'warning');
                return;
            }
            
            if (!confirm('Are you sure you want to delete this payment receipt?')) {
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/PaymentReceipt/${receiptId}`, {
                    method: 'DELETE',
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                
                const responseSection = document.getElementById('deletePaymentReceiptResponse');
                const responseJson = document.getElementById('deletePaymentReceiptResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = 'Payment receipt deleted successfully (204 No Content)';
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Payment receipt deleted successfully!', 'success');
                } else {
                    const responseData = await response.text();
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error deleting payment receipt', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Format Get All Payment Receipts Response JSON
        function formatGetAllPaymentReceiptsResponse() {
            const responseJson = document.getElementById('getAllPaymentReceiptsResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Payment Receipts Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in payment receipts response!', 'error');
                }
            } else {
                showNotification('No payment receipts response data to format!', 'warning');
            }
        }

        // Create Zaaer Invoice
        async function createZaaerInvoice() {
            const jsonText = document.getElementById('createInvoiceJson').value;
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Invoice`, {
                    method: 'POST',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('createInvoiceResponse');
                const responseJson = document.getElementById('createInvoiceResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Invoice created successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error creating invoice', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get All Zaaer Invoices
        async function getAllZaaerInvoices() {
            const hotelId = document.getElementById('getInvoiceHotelId').value;
            
            if (!hotelId) {
                showNotification('Please enter Hotel ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Invoice/hotel/${hotelId}`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getAllInvoicesResponse');
                const responseJson = document.getElementById('getAllInvoicesResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Invoices retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving invoices', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Format Get All Invoices Response JSON
        function formatGetAllInvoicesResponse() {
            const responseJson = document.getElementById('getAllInvoicesResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Invoices Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in invoices response!', 'error');
                }
            } else {
                showNotification('No invoices response data to format!', 'warning');
            }
        }

        // Get Zaaer Invoice by ID
        async function getZaaerInvoiceById() {
            const invoiceId = document.getElementById('getInvoiceById').value;
            
            if (!invoiceId) {
                showNotification('Please enter Invoice ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Invoice/${invoiceId}`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getInvoiceByIdResponse');
                const responseJson = document.getElementById('getInvoiceByIdResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Invoice retrieved successfully with all related data!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving invoice', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Format Get Invoice by ID Response JSON
        function formatGetInvoiceByIdResponse() {
            const responseJson = document.getElementById('getInvoiceByIdResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Invoice Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in invoice response!', 'error');
                }
            } else {
                showNotification('No invoice response data to format!', 'warning');
            }
        }

        // ============================================
        // Zaaer Refund Functions
        // ============================================
        // Create Zaaer Refund
        async function createZaaerRefund() {
            const jsonText = document.getElementById('createRefundJson').value;
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Refund`, {
                    method: 'POST',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('createRefundResponse');
                const responseJson = document.getElementById('createRefundResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Refund created successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error creating refund', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }
        // Update Zaaer Refund
        async function updateZaaerRefund() {
            const zaaerId = document.getElementById('updateRefundZaaerId').value;
            const jsonText = document.getElementById('updateRefundJson').value;
            
            if (!zaaerId) {
                showNotification('Please enter Zaaer ID', 'warning');
                return;
            }
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Refund/zaaer/${zaaerId}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('updateRefundResponse');
                const responseJson = document.getElementById('updateRefundResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Refund updated successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating refund', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }
        // Update Zaaer Refund by Refund Number
        async function updateZaaerRefundByNo() {
            const refundNo = document.getElementById('updateRefundByNo').value;
            const jsonText = document.getElementById('updateRefundByNoJson').value;
            
            if (!refundNo) {
                showNotification('Please enter Refund Number', 'warning');
                return;
            }
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Refund/refund-no/${encodeURIComponent(refundNo)}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('updateRefundByNoResponse');
                const responseJson = document.getElementById('updateRefundByNoResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Refund updated successfully by refund number!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating refund by refund number', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get All Zaaer Refunds
        async function getAllZaaerRefunds() {
            const hotelId = document.getElementById('getRefundHotelId').value;
            
            if (!hotelId) {
                showNotification('Please enter Hotel ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Refund/hotel/${hotelId}`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getAllRefundsResponse');
                const responseJson = document.getElementById('getAllRefundsResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Refunds retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving refunds', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Format Get All Refunds Response JSON
        function formatGetAllRefundsResponse() {
            const responseJson = document.getElementById('getAllRefundsResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Refunds Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in refunds response!', 'error');
                }
            } else {
                showNotification('No refunds response data to format!', 'warning');
            }
        }

        // ===== PAYMENT RECEIPT LINKING FUNCTIONS =====
        
        // Link Payment Receipts to Invoice
        async function linkReceiptsToInvoice() {
            const invoiceId = document.getElementById('linkReceiptsInvoiceId').value;
            const receiptIdsText = document.getElementById('linkReceiptsIds').value;
            
            if (!invoiceId || !receiptIdsText) {
                showNotification('Please enter Invoice ID and Receipt IDs', 'warning');
                return;
            }
            
            try {
                const receiptIds = receiptIdsText.split(',').map(id => parseInt(id.trim())).filter(id => !isNaN(id));
                
                if (receiptIds.length === 0) {
                    showNotification('Please enter valid Receipt IDs', 'warning');
                    return;
                }
                
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/PaymentReceipt/link-to-invoice/${invoiceId}`, {
                    method: 'POST',
                    headers: getApiHeaders(),
                    body: JSON.stringify(receiptIds)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('linkReceiptsResponse');
                const responseJson = document.getElementById('linkReceiptsResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Payment receipts linked to invoice successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error linking payment receipts to invoice', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Unlink Payment Receipts from Invoice
        async function unlinkReceiptsFromInvoice() {
            const invoiceId = document.getElementById('unlinkReceiptsInvoiceId').value;
            const receiptIdsText = document.getElementById('unlinkReceiptsIds').value;
            
            if (!invoiceId || !receiptIdsText) {
                showNotification('Please enter Invoice ID and Receipt IDs', 'warning');
                return;
            }
            
            try {
                const receiptIds = receiptIdsText.split(',').map(id => parseInt(id.trim())).filter(id => !isNaN(id));
                
                if (receiptIds.length === 0) {
                    showNotification('Please enter valid Receipt IDs', 'warning');
                    return;
                }
                
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/PaymentReceipt/unlink-from-invoice/${invoiceId}`, {
                    method: 'POST',
                    headers: getApiHeaders(),
                    body: JSON.stringify(receiptIds)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('unlinkReceiptsResponse');
                const responseJson = document.getElementById('unlinkReceiptsResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Payment receipts unlinked from invoice successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error unlinking payment receipts from invoice', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // ===== CREDIT NOTE FUNCTIONS =====
        
        // Create Zaaer Credit Note
        async function createZaaerCreditNote() {
            const jsonText = document.getElementById('createCreditNoteJson').value;
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/CreditNote`, {
                    method: 'POST',
                    headers: getApiHeaders(),
                    body: jsonText
                });
                
                const responseData = await response.text();
                
                const responseSection = document.getElementById('createCreditNoteResponse');
                const responseJson = document.getElementById('createCreditNoteResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Credit Note created successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error creating credit note', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get All Zaaer Credit Notes
        async function getAllZaaerCreditNotes() {
            const hotelId = document.getElementById('getCreditNoteHotelId').value;
            
            if (!hotelId) {
                showNotification('Please enter Hotel ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/CreditNote/hotel/${hotelId}`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getAllCreditNotesResponse');
                const responseJson = document.getElementById('getAllCreditNotesResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Credit Notes retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving credit notes', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Format Get All Credit Notes Response JSON
        function formatGetAllCreditNotesResponse() {
            const responseJson = document.getElementById('getAllCreditNotesResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Credit Notes Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in credit notes response!', 'error');
                }
            } else {
                showNotification('No credit notes response data to format!', 'warning');
            }
        }

        // ===== ROOM TYPE FUNCTIONS =====
        
        // Create Zaaer Room Type
        async function createZaaerRoomType() {
            const jsonText = document.getElementById('createRoomTypeJson').value;
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/RoomType`, {
                    method: 'POST',
                    headers: getApiHeaders(),
                    body: jsonText
                });
                
                const responseData = await response.text();
                
                const responseSection = document.getElementById('createRoomTypeResponse');
                const responseJson = document.getElementById('createRoomTypeResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Room Type created successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error creating room type', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Update Zaaer Room Type
        async function updateZaaerRoomType() {
            const roomTypeId = document.getElementById('updateRoomTypeId').value;
            const jsonText = document.getElementById('updateRoomTypeJson').value;
            
            if (!roomTypeId) {
                showNotification('Please enter Room Type ID', 'warning');
                return;
            }
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/RoomType/${roomTypeId}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: jsonText
                });
                
                const responseData = await response.text();
                
                const responseSection = document.getElementById('updateRoomTypeResponse');
                const responseJson = document.getElementById('updateRoomTypeResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Room Type updated successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating room type', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get All Zaaer Room Types
        async function getAllZaaerRoomTypes() {
            const hotelId = document.getElementById('getRoomTypeHotelId').value;
            
            if (!hotelId) {
                showNotification('Please enter Hotel ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/RoomType/hotel/${hotelId}`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getAllRoomTypesResponse');
                const responseJson = document.getElementById('getAllRoomTypesResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Room Types retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving room types', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get Zaaer Room Type by ID
        async function getZaaerRoomTypeById() {
            const roomTypeId = document.getElementById('getRoomTypeById').value;
            
            if (!roomTypeId) {
                showNotification('Please enter Room Type ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/RoomType/${roomTypeId}`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getRoomTypeByIdResponse');
                const responseJson = document.getElementById('getRoomTypeByIdResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Room Type retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving room type', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Delete Zaaer Room Type
        async function deleteZaaerRoomType() {
            const roomTypeId = document.getElementById('deleteRoomTypeId').value;
            
            if (!roomTypeId) {
                showNotification('Please enter Room Type ID', 'warning');
                return;
            }
            
            if (!confirm('Are you sure you want to delete this room type?')) {
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/RoomType/${roomTypeId}`, {
                    method: 'DELETE',
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                
                const responseSection = document.getElementById('deleteRoomTypeResponse');
                const responseJson = document.getElementById('deleteRoomTypeResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = 'Room Type deleted successfully (204 No Content)';
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Room Type deleted successfully!', 'success');
                } else {
                    const responseData = await response.text();
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error deleting room type', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Format Get All Room Types Response JSON
        function formatGetAllRoomTypesResponse() {
            const responseJson = document.getElementById('getAllRoomTypesResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Room Types Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in room types response!', 'error');
                }
            } else {
                showNotification('No room types response data to format!', 'warning');
            }
        }

        // Format Get Room Type by ID Response JSON
        function formatGetRoomTypeByIdResponse() {
            const responseJson = document.getElementById('getRoomTypeByIdResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Room Type Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in room type response!', 'error');
                }
            } else {
                showNotification('No room type response data to format!', 'warning');
            }
        }

        // ===== FLOOR FUNCTIONS =====
        
       // ✅ Create Zaaer Building with Floors (Transactional)
       async function createZaaerBuildingWithFloors() {
  const jsonText = document.getElementById('createBuildingJson').value.trim();

  if (!jsonText) {
                showNotification('Please enter JSON data', 'warning');
    return;
  }

  try {
    const requestBody = JSON.parse(jsonText);

    // Expected shape: { hotelId, buildingName, floors: [ { floorNumber, floorName } ] }
    if (!requestBody || typeof requestBody !== 'object' || !Array.isArray(requestBody.floors)) {
      showNotification('Payload must be an object with a floors array', 'warning');
                return;
            }
            
            showLoading();

    const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerBuilding`, {
      method: 'POST',
      headers: getApiHeaders(),
      body: JSON.stringify(requestBody)
    });

    const responseText = await response.text();
    const responseSection = document.getElementById('createBuildingResponse');
    const responseJson = document.getElementById('createBuildingResponseJson');

    responseSection.style.display = 'block';
    responseJson.textContent = responseText;

    if (response.ok) {
      responseJson.style.color = '#e2e8f0';
      showNotification('✅ Building and floors created successfully!', 'success');
    } else {
      responseJson.style.color = '#f56565';
      showNotification('❌ Error creating building/floors', 'error');
    }
  } catch (error) {
    showNotification(`❌ Error: ${error.message}`, 'error');
  } finally {
    hideLoading();
  }
}

       // ✅ Update Zaaer Building with Floors (Transactional)
       async function updateZaaerBuildingWithFloors() {
  const jsonText = document.getElementById('updateBuildingJson').value.trim();

  if (!jsonText) {
    showNotification('Please enter JSON data', 'warning');
    return;
  }

            try {
                const requestBody = JSON.parse(jsonText);

    // Expected shape: { buildingId, hotelId, buildingName, floors: [ { floorId?, floorNumber, floorName } ] }
    if (!requestBody || typeof requestBody !== 'object' || !Array.isArray(requestBody.floors)) {
      showNotification('Payload must be an object with a floors array', 'warning');
      return;
    }

    if (!requestBody.buildingId) {
      showNotification('BuildingId is required for update', 'warning');
      return;
    }

    showLoading();

    const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerBuilding`, {
      method: 'PUT',
      headers: getApiHeaders(),
      body: JSON.stringify(requestBody)
    });

    const responseText = await response.text();
    const responseSection = document.getElementById('updateBuildingResponse');
    const responseJson = document.getElementById('updateBuildingResponseJson');

    responseSection.style.display = 'block';
    responseJson.textContent = responseText;

    if (response.ok) {
      responseJson.style.color = '#e2e8f0';
      showNotification('✅ Building and floors updated successfully!', 'success');
    } else {
      responseJson.style.color = '#f56565';
      showNotification('❌ Error updating building/floors', 'error');
    }
  } catch (error) {
    showNotification(`❌ Error: ${error.message}`, 'error');
  } finally {
    hideLoading();
  }
}

       // ✅ Safe Update Zaaer Building with Floors (No Deletion)
       async function updateZaaerBuildingWithFloorsSafe() {
  const jsonText = document.getElementById('updateBuildingJson').value.trim();

  if (!jsonText) {
    showNotification('Please enter JSON data', 'warning');
    return;
  }

  try {
    const requestBody = JSON.parse(jsonText);

    // Expected shape: { buildingId, hotelId, buildingName, floors: [ { floorId?, floorNumber, floorName } ] }
    if (!requestBody || typeof requestBody !== 'object' || !Array.isArray(requestBody.floors)) {
      showNotification('Payload must be an object with a floors array', 'warning');
      return;
    }

    if (!requestBody.buildingId) {
      showNotification('BuildingId is required for update', 'warning');
      return;
    }

    showLoading();

    const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerBuilding/safe`, {
      method: 'PUT',
      headers: getApiHeaders(),
      body: JSON.stringify(requestBody)
    });

    const responseText = await response.text();
    const responseSection = document.getElementById('updateBuildingResponse');
    const responseJson = document.getElementById('updateBuildingResponseJson');

    responseSection.style.display = 'block';
    responseJson.textContent = responseText;

    if (response.ok) {
      responseJson.style.color = '#e2e8f0';
      showNotification('✅ Building and floors safely updated! (No floors deleted)', 'success');
    } else {
      responseJson.style.color = '#f56565';
      showNotification('❌ Error in safe update', 'error');
    }
  } catch (error) {
    showNotification(`❌ Error: ${error.message}`, 'error');
  } finally {
    hideLoading();
  }
}

       // ✅ Get All Zaaer Buildings with Floors
       async function getAllZaaerBuildingsWithFloors() {
  const hotelId = document.getElementById('getBuildingsHotelId').value.trim();

  if (!hotelId) {
    showNotification('Please enter Hotel ID', 'warning');
    return;
  }

  try {
    showLoading();

    const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerBuilding/hotel/${hotelId}`, {
      method: 'GET',
      headers: getApiHeaders()
    });

    const responseText = await response.text();
    const responseSection = document.getElementById('getBuildingsResponse');
    const responseJson = document.getElementById('getBuildingsResponseJson');

    responseSection.style.display = 'block';
    responseJson.textContent = responseText;

    if (response.ok) {
      responseJson.style.color = '#e2e8f0';
      showNotification('✅ Buildings and floors retrieved successfully!', 'success');
    } else {
      responseJson.style.color = '#f56565';
      showNotification('❌ Error retrieving buildings/floors', 'error');
    }
  } catch (error) {
    showNotification(`❌ Error: ${error.message}`, 'error');
  } finally {
    hideLoading();
  }
}
       // ✅ Create Zaaer User
       async function createZaaerUser() {
  const jsonText = document.getElementById('createUserJson').value.trim();

  if (!jsonText) {
    showNotification('Please enter JSON data', 'warning');
    return;
  }

  try {
    const requestBody = JSON.parse(jsonText);

    if (!requestBody || typeof requestBody !== 'object') {
      showNotification('Payload must be a valid JSON object', 'warning');
      return;
    }

    showLoading();

    const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerUser`, {
                    method: 'POST',
      headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });
                
    const responseText = await response.text();
    const responseSection = document.getElementById('createUserResponse');
    const responseJson = document.getElementById('createUserResponseJson');

    responseSection.style.display = 'block';
    responseJson.textContent = responseText;

    if (response.ok) {
      responseJson.style.color = '#e2e8f0';
      showNotification('✅ User created successfully!', 'success');
    } else {
      responseJson.style.color = '#f56565';
      showNotification('❌ Error creating user', 'error');
    }
  } catch (error) {
    showNotification(`❌ Error: ${error.message}`, 'error');
  } finally {
    hideLoading();
  }
}
       // ✅ Update Zaaer User
       async function updateZaaerUser() {
  const jsonText = document.getElementById('updateUserJson').value.trim();

  if (!jsonText) {
    showNotification('Please enter JSON data', 'warning');
    return;
  }

  try {
    const requestBody = JSON.parse(jsonText);

    if (!requestBody || typeof requestBody !== 'object') {
      showNotification('Payload must be a valid JSON object', 'warning');
      return;
    }

    if (!requestBody.userId) {
      showNotification('UserId is required for update', 'warning');
      return;
    }

    showLoading();

    const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerUser`, {
      method: 'PUT',
      headers: getApiHeaders(),
      body: JSON.stringify(requestBody)
    });

    const responseText = await response.text();
    const responseSection = document.getElementById('updateUserResponse');
    const responseJson = document.getElementById('updateUserResponseJson');
                
                responseSection.style.display = 'block';
    responseJson.textContent = responseText;
                
                if (response.ok) {
                    responseJson.style.color = '#e2e8f0';
      showNotification('✅ User updated successfully!', 'success');
                } else {
                    responseJson.style.color = '#f56565';
      showNotification('❌ Error updating user', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

       // ✅ Get All Zaaer Users
       async function getAllZaaerUsers() {
  const hotelId = document.getElementById('getUsersHotelId').value.trim();

  if (!hotelId) {
    showNotification('Please enter Hotel ID', 'warning');
    return;
  }

  try {
    showLoading();

    const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerUser/hotel/${hotelId}`, {
      method: 'GET',
      headers: getApiHeaders()
    });

    const responseText = await response.text();
    const responseSection = document.getElementById('getUsersResponse');
    const responseJson = document.getElementById('getUsersResponseJson');

    responseSection.style.display = 'block';
    responseJson.textContent = responseText;

    if (response.ok) {
      responseJson.style.color = '#e2e8f0';
      showNotification('✅ Users retrieved successfully!', 'success');
    } else {
      responseJson.style.color = '#f56565';
      showNotification('❌ Error retrieving users', 'error');
    }
  } catch (error) {
    showNotification(`❌ Error: ${error.message}`, 'error');
  } finally {
    hideLoading();
  }
}

       // ✅ Create Zaaer Role
       async function createZaaerRole() {
  const jsonText = document.getElementById('createRoleJson').value.trim();

  if (!jsonText) {
    showNotification('Please enter JSON data', 'warning');
    return;
  }

  try {
    const requestBody = JSON.parse(jsonText);

    if (!requestBody || typeof requestBody !== 'object') {
      showNotification('Payload must be a valid JSON object', 'warning');
      return;
    }

    showLoading();

    const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerRole`, {
      method: 'POST',
      headers: getApiHeaders(),
      body: JSON.stringify(requestBody)
    });

    const responseText = await response.text();
    const responseSection = document.getElementById('createRoleResponse');
    const responseJson = document.getElementById('createRoleResponseJson');

    responseSection.style.display = 'block';
    responseJson.textContent = responseText;

    if (response.ok) {
      responseJson.style.color = '#e2e8f0';
      showNotification('✅ Role created successfully!', 'success');
    } else {
      responseJson.style.color = '#f56565';
      showNotification('❌ Error creating role', 'error');
    }
  } catch (error) {
    showNotification(`❌ Error: ${error.message}`, 'error');
  } finally {
    hideLoading();
  }
}

       // ✅ Update Zaaer Role
       async function updateZaaerRole() {
  const jsonText = document.getElementById('updateRoleJson').value.trim();

  if (!jsonText) {
    showNotification('Please enter JSON data', 'warning');
    return;
  }

  try {
    const requestBody = JSON.parse(jsonText);

    if (!requestBody || typeof requestBody !== 'object') {
      showNotification('Payload must be a valid JSON object', 'warning');
      return;
    }

    if (!requestBody.roleId) {
      showNotification('RoleId is required for update', 'warning');
      return;
    }

    showLoading();

    const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerRole`, {
      method: 'PUT',
      headers: getApiHeaders(),
      body: JSON.stringify(requestBody)
    });

    const responseText = await response.text();
    const responseSection = document.getElementById('updateRoleResponse');
    const responseJson = document.getElementById('updateRoleResponseJson');

    responseSection.style.display = 'block';
    responseJson.textContent = responseText;

    if (response.ok) {
      responseJson.style.color = '#e2e8f0';
      showNotification('✅ Role updated successfully!', 'success');
    } else {
      responseJson.style.color = '#f56565';
      showNotification('❌ Error updating role', 'error');
    }
  } catch (error) {
    showNotification(`❌ Error: ${error.message}`, 'error');
  } finally {
    hideLoading();
  }
}

       // ✅ Get All Zaaer Roles
       async function getAllZaaerRoles() {
  const hotelId = document.getElementById('getRolesHotelId').value.trim();

  if (!hotelId) {
    showNotification('Please enter Hotel ID', 'warning');
    return;
  }

  try {
    showLoading();

    const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerRole/hotel/${hotelId}`, {
      method: 'GET',
      headers: getApiHeaders()
    });

    const responseText = await response.text();
    const responseSection = document.getElementById('getRolesResponse');
    const responseJson = document.getElementById('getRolesResponseJson');

    responseSection.style.display = 'block';
    responseJson.textContent = responseText;

    if (response.ok) {
      responseJson.style.color = '#e2e8f0';
      showNotification('✅ Roles retrieved successfully!', 'success');
    } else {
      responseJson.style.color = '#f56565';
      showNotification('❌ Error retrieving roles', 'error');
    }
  } catch (error) {
    showNotification(`❌ Error: ${error.message}`, 'error');
  } finally {
    hideLoading();
  }
}

       // ✅ Get All Permissions
       async function getAllPermissions() {
  try {
    showLoading();

    const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerRole/permissions`, {
      method: 'GET',
      headers: getApiHeaders()
    });

    const responseText = await response.text();
    const responseSection = document.getElementById('getPermissionsResponse');
    const responseJson = document.getElementById('getPermissionsResponseJson');

    responseSection.style.display = 'block';
    responseJson.textContent = responseText;

    if (response.ok) {
      responseJson.style.color = '#e2e8f0';
      showNotification('✅ Permissions retrieved successfully!', 'success');
    } else {
      responseJson.style.color = '#f56565';
      showNotification('❌ Error retrieving permissions', 'error');
    }
  } catch (error) {
    showNotification(`❌ Error: ${error.message}`, 'error');
  } finally {
    hideLoading();
  }
}
        // Update Zaaer Floor
        async function updateZaaerFloor() {
            const floorId = document.getElementById('updateFloorId').value;
            const jsonText = document.getElementById('updateFloorJson').value;
            
            if (!floorId) {
                showNotification('Please enter Floor ID', 'warning');
                return;
            }
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            showLoading();
            try {
                const requestBody = JSON.parse(jsonText);
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Floor/${floorId}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });
                
                const responseData = await response.text();
                
                const responseSection = document.getElementById('updateFloorResponse');
                const responseJson = document.getElementById('updateFloorResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Floor updated successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating floor', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get All Zaaer Floors
        async function getAllZaaerFloors() {
            const hotelId = document.getElementById('getFloorHotelId').value;
            
            if (!hotelId) {
                showNotification('Please enter Hotel ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Floor/hotel/${hotelId}`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getAllFloorsResponse');
                const responseJson = document.getElementById('getAllFloorsResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Floors retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving floors', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get Zaaer Floor by ID
        async function getZaaerFloorById() {
            const floorId = document.getElementById('getFloorById').value;
            
            if (!floorId) {
                showNotification('Please enter Floor ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Floor/${floorId}`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getFloorByIdResponse');
                const responseJson = document.getElementById('getFloorByIdResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Floor retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving floor', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Delete Zaaer Floor
        async function deleteZaaerFloor() {
            const floorId = document.getElementById('deleteFloorId').value;
            
            if (!floorId) {
                showNotification('Please enter Floor ID', 'warning');
                return;
            }
            
            if (!confirm('Are you sure you want to delete this floor?')) {
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Floor/${floorId}`, {
                    method: 'DELETE',
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                
                const responseSection = document.getElementById('deleteFloorResponse');
                const responseJson = document.getElementById('deleteFloorResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = 'Floor deleted successfully (204 No Content)';
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Floor deleted successfully!', 'success');
                } else {
                    const responseData = await response.text();
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error deleting floor', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Format Get All Floors Response JSON
        function formatGetAllFloorsResponse() {
            const responseJson = document.getElementById('getAllFloorsResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Floors Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in floors response!', 'error');
                }
            } else {
                showNotification('No floors response data to format!', 'warning');
            }
        }

        // Format Get Floor by ID Response JSON
        function formatGetFloorByIdResponse() {
            const responseJson = document.getElementById('getFloorByIdResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Floor Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in floor response!', 'error');
                }
            } else {
                showNotification('No floor response data to format!', 'warning');
            }
        }

        // ===== APARTMENT FUNCTIONS =====
        
        // Create Zaaer Apartment
        async function createZaaerApartment() {
            const jsonText = document.getElementById('createApartmentJson').value;
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            showLoading();
            try {
                const requestBody = JSON.parse(jsonText);
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Apartment`, {
                    method: 'POST',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });
                
                const responseData = await response.text();
                
                const responseSection = document.getElementById('createApartmentResponse');
                const responseJson = document.getElementById('createApartmentResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Apartments created successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error creating apartments', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Update Zaaer Apartment
        async function updateZaaerApartment() {
            const zaaerId = document.getElementById('updateApartmentId').value;
            const jsonText = document.getElementById('updateApartmentJson').value;
            
            if (!zaaerId) {
                showNotification('Please enter Zaaer ID', 'warning');
                return;
            }
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            showLoading();
            try {
                const requestBody = JSON.parse(jsonText);
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Apartment/${zaaerId}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });
                
                const responseData = await response.text();
                
                const responseSection = document.getElementById('updateApartmentResponse');
                const responseJson = document.getElementById('updateApartmentResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Apartment updated successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating apartment', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get All Zaaer Apartments
        async function getAllZaaerApartments() {
            const hotelId = document.getElementById('getApartmentHotelId').value;
            
            if (!hotelId) {
                showNotification('Please enter Hotel ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Apartment/hotel/${hotelId}`, {
                    headers: getApiHeaders()
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getAllApartmentsResponse');
                const responseJson = document.getElementById('getAllApartmentsResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Apartments retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving apartments', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get Zaaer Apartment by ID
        async function getZaaerApartmentById() {
            const apartmentId = document.getElementById('getApartmentById').value;
            
            if (!apartmentId) {
                showNotification('Please enter Apartment ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Apartment/${apartmentId}`, {
                    headers: getApiHeaders()
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getApartmentByIdResponse');
                const responseJson = document.getElementById('getApartmentByIdResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Apartment retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving apartment', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Delete Zaaer Apartment
        async function deleteZaaerApartment() {
            const apartmentId = document.getElementById('deleteApartmentId').value;
            
            if (!apartmentId) {
                showNotification('Please enter Apartment ID', 'warning');
                return;
            }
            
            if (!confirm('Are you sure you want to delete this apartment?')) {
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Apartment/${apartmentId}`, {
                    method: 'DELETE',
                    headers: getApiHeaders()
                });
                
                const responseSection = document.getElementById('deleteApartmentResponse');
                const responseJson = document.getElementById('deleteApartmentResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = 'Apartment deleted successfully (204 No Content)';
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Apartment deleted successfully!', 'success');
                } else {
                    const responseData = await response.text();
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error deleting apartment', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Format Get All Apartments Response JSON
        function formatGetAllApartmentsResponse() {
            const responseJson = document.getElementById('getAllApartmentsResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Apartments Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in apartments response!', 'error');
                }
            } else {
                showNotification('No apartments response data to format!', 'warning');
            }
        }

        // Format Get Apartment by ID Response JSON
        function formatGetApartmentByIdResponse() {
            const responseJson = document.getElementById('getApartmentByIdResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Apartment Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in apartment response!', 'error');
                }
            } else {
                showNotification('No apartment response data to format!', 'warning');
            }
        }

        // ===== RESERVATION FUNCTIONS =====
        
        // Create Zaaer Reservation
        async function createZaaerReservation() {
            const jsonText = document.getElementById('createReservationJson').value;
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservation`, {
                    method: 'POST',
                    headers: getApiHeaders(),
                    body: jsonText
                });
                
                const responseData = await response.text();
                
                const responseSection = document.getElementById('createReservationResponse');
                const responseJson = document.getElementById('createReservationResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Reservation created successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error creating reservation', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }
        // Update Zaaer Reservation by ID
        async function updateZaaerReservation() {
            const reservationId = document.getElementById('updateReservationId').value;
            const jsonText = document.getElementById('updateReservationJson').value;
            
            if (!reservationId) {
                showNotification('Please enter Reservation ID', 'warning');
                return;
            }
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservation/${reservationId}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: jsonText
                });
                
                const responseData = await response.text();
                
                const responseSection = document.getElementById('updateReservationResponse');
                const responseJson = document.getElementById('updateReservationResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Reservation updated successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating reservation', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }
        // Update Zaaer Reservation by Number
        async function updateZaaerReservationByNumber() {
            const reservationNo = document.getElementById('updateReservationByNumber').value;
            const jsonText = document.getElementById('updateReservationByNumberJson').value;
            
            if (!reservationNo) {
                showNotification('Please enter Reservation Number', 'warning');
                return;
            }
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservation/number/${encodeURIComponent(reservationNo)}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: jsonText
                });
                
                const responseData = await response.text();
                
                const responseSection = document.getElementById('updateReservationByNumberResponse');
                const responseJson = document.getElementById('updateReservationByNumberResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Reservation updated successfully by number!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating reservation by number', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get All Zaaer Reservations
        async function getAllZaaerReservations() {
            const hotelId = document.getElementById('getReservationHotelId').value;
            
            if (!hotelId) {
                showNotification('Please enter Hotel ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerReservation/hotel/${hotelId}`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getAllReservationsResponse');
                const responseJson = document.getElementById('getAllReservationsResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Reservations retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving reservations', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Format Get All Reservations Response JSON
        function formatGetAllReservationsResponse() {
            const responseJson = document.getElementById('getAllReservationsResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Reservations Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in reservations response!', 'error');
                }
            } else {
                showNotification('No reservations response data to format!', 'warning');
            }
        }


        // Format Get All Apartments Response JSON
        function formatGetAllApartmentsResponse() {
            const responseJson = document.getElementById('getAllApartmentsResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Apartments Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in apartments response!', 'error');
                }
            } else {
                showNotification('No apartments response data to format!', 'warning');
            }
        }


        // Format Get Apartment by ID Response JSON
        function formatGetApartmentByIdResponse() {
            const responseJson = document.getElementById('getApartmentByIdResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Apartment Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in apartment response!', 'error');
                }
            } else {
                showNotification('No apartment response data to format!', 'warning');
            }
        }



        // ===== BASE RATES FUNCTIONS =====
        
        // Create Zaaer Base Rate
        async function createZaaerBaseRate() {
            const jsonText = document.getElementById('createBaseRateJson').value;
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            showLoading();
            try {
                const requestBody = JSON.parse(jsonText);
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerRoomTypeRate`, {
                    method: 'POST',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });
                
                const responseData = await response.text();
                
                const responseSection = document.getElementById('createBaseRateResponse');
                const responseJson = document.getElementById('createBaseRateResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Base Rate created successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error creating base rate', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // ===== BANKS FUNCTIONS =====
        async function createZaaerBank() {
            const jsonText = document.getElementById('createBankJson').value;
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerBank`, { method: 'POST', headers: getApiHeaders(), body: jsonText });
                const responseData = await response.text();
                const section = document.getElementById('createBankResponse');
                const container = document.getElementById('createBankResponseJson');
                section.style.display = 'block'; container.textContent = responseData; container.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Bank created successfully!' : '❌ Error creating bank', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); } finally { hideLoading(); }
        }

        // ===== EXPENSES FUNCTIONS =====
        async function createZaaerExpense() {
            const jsonText = document.getElementById('createExpenseJson').value;
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerExpense`, { method: 'POST', headers: getApiHeaders(), body: jsonText });
                const responseData = await response.text();
                const section = document.getElementById('createExpenseResponse');
                const container = document.getElementById('createExpenseResponseJson');
                section.style.display = 'block'; container.textContent = responseData; container.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Expense created successfully!' : '❌ Error creating expense', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); } finally { hideLoading(); }
        }

        async function updateZaaerExpense() {
            const id = document.getElementById('updateExpenseId').value; const jsonText = document.getElementById('updateExpenseJson').value;
            if (!id) { showNotification('Please enter Expense ID', 'warning'); return; }
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerExpense/${id}`, { method: 'PUT', headers: getApiHeaders(), body: jsonText });
                const responseData = await response.text();
                const section = document.getElementById('updateExpenseResponse');
                const container = document.getElementById('updateExpenseResponseJson');
                section.style.display = 'block'; container.textContent = responseData; container.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Expense updated successfully!' : '❌ Error updating expense', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); } finally { hideLoading(); }
        }

        async function getAllZaaerExpenses() {
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerExpense`, { headers: getApiHeaders() });
                const responseData = await response.text();
                const section = document.getElementById('getAllExpensesResponse');
                const container = document.getElementById('getAllExpensesResponseJson');
                section.style.display = 'block'; container.textContent = responseData; container.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Expenses retrieved successfully!' : '❌ Error retrieving expenses', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); } finally { hideLoading(); }
        }

        function formatGetAllExpensesResponse() {
            const el = document.getElementById('getAllExpensesResponseJson');
            if (el.textContent.trim()) { try { el.textContent = JSON.stringify(JSON.parse(el.textContent), null, 2); showNotification('Expenses Response JSON formatted successfully!', 'success'); } catch { showNotification('Invalid JSON format!', 'error'); } } else { showNotification('No response data to format!', 'warning'); }
        }

        async function updateZaaerBank() {
            const id = document.getElementById('updateBankId').value; const jsonText = document.getElementById('updateBankJson').value;
            if (!id) { showNotification('Please enter Bank ID', 'warning'); return; }
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerBank/${id}`, { method: 'PUT', headers: getApiHeaders(), body: jsonText });
                const responseData = await response.text();
                const section = document.getElementById('updateBankResponse');
                const container = document.getElementById('updateBankResponseJson');
                section.style.display = 'block'; container.textContent = responseData; container.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Bank updated successfully!' : '❌ Error updating bank', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); } finally { hideLoading(); }
        }

        async function getAllZaaerBanks() {
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerBank`, { headers: getApiHeaders() });
                const responseData = await response.text();
                const section = document.getElementById('getAllBanksResponse');
                const container = document.getElementById('getAllBanksResponseJson');
                section.style.display = 'block'; container.textContent = responseData; container.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Banks retrieved successfully!' : '❌ Error retrieving banks', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); } finally { hideLoading(); }
        }

        function formatGetAllBanksResponse() {
            const el = document.getElementById('getAllBanksResponseJson');
            if (el.textContent.trim()) { try { el.textContent = JSON.stringify(JSON.parse(el.textContent), null, 2); showNotification('Banks Response JSON formatted successfully!', 'success'); } catch { showNotification('Invalid JSON format!', 'error'); } } else { showNotification('No response data to format!', 'warning'); }
        }
        // Update Zaaer Base Rate
        async function updateZaaerBaseRate() {
            const rateId = document.getElementById('updateBaseRateId').value;
            const jsonText = document.getElementById('updateBaseRateJson').value;
            
            if (!rateId) {
                showNotification('Please enter Rate ID', 'warning');
                return;
            }
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            showLoading();
            try {
                const requestBody = JSON.parse(jsonText);
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerRoomTypeRate/${rateId}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });
                
                const responseData = await response.text();
                
                const responseSection = document.getElementById('updateBaseRateResponse');
                const responseJson = document.getElementById('updateBaseRateResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Base Rate updated successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating base rate', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get All Zaaer Base Rates by Hotel
        async function getAllZaaerBaseRates() {
            const hotelId = document.getElementById('getBaseRateHotelId').value;
            
            if (!hotelId) {
                showNotification('Please enter Hotel ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerRoomTypeRate/hotel/${hotelId}`, {
                    headers: getApiHeaders()
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getAllBaseRatesResponse');
                const responseJson = document.getElementById('getAllBaseRatesResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Base Rates retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving base rates', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get Zaaer Base Rate by ID
        async function getZaaerBaseRateById() {
            const rateId = document.getElementById('getBaseRateById').value;
            
            if (!rateId) {
                showNotification('Please enter Rate ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerRoomTypeRate/${rateId}`, {
                    headers: getApiHeaders()
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getBaseRateByIdResponse');
                const responseJson = document.getElementById('getBaseRateByIdResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Base Rate retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving base rate', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get Zaaer Base Rates by Room Type
        async function getZaaerBaseRatesByRoomType() {
            const roomTypeId = document.getElementById('getBaseRateRoomTypeId').value;
            
            if (!roomTypeId) {
                showNotification('Please enter Room Type ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerRoomTypeRate/roomtype/${roomTypeId}`, {
                    headers: getApiHeaders()
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getBaseRatesByRoomTypeResponse');
                const responseJson = document.getElementById('getBaseRatesByRoomTypeResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Base Rates retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving base rates', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // ===== SEASONAL RATES FUNCTIONS =====
        async function createZaaerSeasonalRate() {
            const jsonText = document.getElementById('createSeasonalRateJson').value;
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerSeasonalRate`, { method:'POST', headers: getApiHeaders(), body: jsonText });
                const responseData = await response.text();
                const section = document.getElementById('createSeasonalRateResponse');
                const container = document.getElementById('createSeasonalRateResponseJson');
                section.style.display = 'block'; container.textContent = responseData; container.style.color = response.ok ? '#e2e8f0' : '#b00020';
                showNotification(response.ok ? '✅ Seasonal Rate created successfully!' : '❌ Error creating seasonal rate', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        async function updateZaaerSeasonalRate() {
            const id = document.getElementById('updateSeasonId').value; const jsonText = document.getElementById('updateSeasonalRateJson').value;
            if (!id) { showNotification('Please enter Season ID', 'warning'); return; }
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerSeasonalRate/${id}`, { method:'PUT', headers: getApiHeaders(), body: jsonText });
                const responseData = await response.text();
                const section = document.getElementById('updateSeasonalRateResponse');
                const container = document.getElementById('updateSeasonalRateResponseJson');
                section.style.display = 'block'; container.textContent = responseData; container.style.color = response.ok ? '#e2e8f0' : '#b00020';
                showNotification(response.ok ? '✅ Seasonal Rate updated successfully!' : '❌ Error updating seasonal rate', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        async function getAllZaaerSeasonalRates() {
            const hotelId = document.getElementById('getAllSeasonalRatesHotelId').value;
            if (!hotelId) { showNotification('Please enter Hotel ID', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerSeasonalRate/hotel/${hotelId}`, { method:'GET', headers: getApiHeaders() });
                const responseData = await response.text();
                const section = document.getElementById('getAllSeasonalRatesResponse');
                const container = document.getElementById('getAllSeasonalRatesResponseJson');
                section.style.display = 'block'; container.textContent = responseData; container.style.color = response.ok ? '#e2e8f0' : '#b00020';
                showNotification(response.ok ? '✅ Seasonal Rates retrieved successfully!' : '❌ Error retrieving seasonal rates', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        function formatGetAllSeasonalRatesResponse() {
            const container = document.getElementById('getAllSeasonalRatesResponseJson');
            if (container.textContent.trim()) {
                try {
                    const json = JSON.parse(container.textContent);
                    container.textContent = JSON.stringify(json, null, 2);
                    showNotification('Seasonal Rates JSON formatted successfully!', 'success');
                } catch (e) {
                    showNotification('Invalid JSON format in seasonal rates response!', 'error');
                }
            } else {
                showNotification('No seasonal rates response data to format!', 'warning');
            }
        }

        // Rate Types
        async function createZaaerRateType() {
            const jsonText = document.getElementById('createRateTypeJson').value;
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerRateType`, { method:'POST', headers: getApiHeaders(), body: jsonText });
                const responseData = await response.text();
                const section = document.getElementById('createRateTypeResponse');
                const container = document.getElementById('createRateTypeResponseJson');
                section.style.display = 'block'; container.textContent = responseData; container.style.color = response.ok ? '#e2e8f0' : '#b00020';
                showNotification(response.ok ? '✅ Rate Type created successfully!' : '❌ Error creating rate type', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        async function updateZaaerRateType() {
            const zaaerId = document.getElementById('updateRateTypeZaaerId').value;
            const jsonText = document.getElementById('updateRateTypeJson').value;
            if (!zaaerId) { showNotification('Please enter Zaaer ID', 'warning'); return; }
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerRateType/${zaaerId}`, { method:'PUT', headers: getApiHeaders(), body: jsonText });
                const responseData = await response.text();
                const section = document.getElementById('updateRateTypeResponse');
                const container = document.getElementById('updateRateTypeResponseJson');
                section.style.display = 'block'; container.textContent = responseData; container.style.color = response.ok ? '#e2e8f0' : '#b00020';
                showNotification(response.ok ? '✅ Rate Type updated successfully!' : '❌ Error updating rate type', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        async function deleteZaaerRateType() {
            const zaaerId = document.getElementById('deleteRateTypeZaaerId').value;
            if (!zaaerId) { showNotification('Please enter Zaaer ID', 'warning'); return; }
            if (!confirm(`Are you sure you want to delete Rate Type with Zaaer ID ${zaaerId}?`)) { return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerRateType/${zaaerId}`, { method:'DELETE', headers: getApiHeaders() });
                const responseData = await response.text();
                const section = document.getElementById('deleteRateTypeResponse');
                const container = document.getElementById('deleteRateTypeResponseJson');
                section.style.display = 'block';
                if (response.ok) {
                    container.textContent = responseData || 'Rate Type deleted successfully (204 No Content)';
                    container.style.color = '#e2e8f0';
                    showNotification('✅ Rate Type deleted successfully!', 'success');
                    document.getElementById('deleteRateTypeZaaerId').value = ''; // Clear input
                } else {
                    container.textContent = responseData;
                    container.style.color = '#b00020';
                    showNotification('❌ Error deleting rate type', 'error');
                }
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        async function getAllZaaerRateTypes() {
            const hotelId = document.getElementById('getAllRateTypesHotelId').value;
            if (!hotelId) { showNotification('Please enter Hotel ID', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerRateType/hotel/${hotelId}`, { method:'GET', headers: getApiHeaders() });
                const responseData = await response.text();
                const section = document.getElementById('getAllRateTypesResponse');
                const container = document.getElementById('getAllRateTypesResponseJson');
                section.style.display = 'block'; container.textContent = responseData; container.style.color = response.ok ? '#e2e8f0' : '#b00020';
                showNotification(response.ok ? '✅ Rate Types retrieved successfully!' : '❌ Error retrieving rate types', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        function formatGetAllRateTypesResponse() {
            const container = document.getElementById('getAllRateTypesResponseJson');
            if (container.textContent.trim()) {
                try {
                    const json = JSON.parse(container.textContent);
                    container.textContent = JSON.stringify(json, null, 2);
                    showNotification('Rate Types JSON formatted successfully!', 'success');
                } catch (e) {
                    showNotification('Invalid JSON format in rate types response!', 'error');
                }
            } else {
                showNotification('No rate types response data to format!', 'warning');
            }
        }

        // Delete Zaaer Base Rate
        // Create Zaaer Maintenance
        async function createZaaerMaintenance() {
            const jsonText = document.getElementById('createMaintenanceJson').value;
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Maintenance`, {
                    method: 'POST',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('createMaintenanceResponse');
                const responseJson = document.getElementById('createMaintenanceResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    try {
                        const json = JSON.parse(responseData);
                        responseJson.textContent = JSON.stringify(json, null, 2);
                    } catch {
                        responseJson.textContent = responseData;
                    }
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Maintenance created successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error creating maintenance', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Update Zaaer Maintenance
        async function updateZaaerMaintenance() {
            const jsonText = document.getElementById('updateMaintenanceJson').value;
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Maintenance`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('updateMaintenanceResponse');
                const responseJson = document.getElementById('updateMaintenanceResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    try {
                        const json = JSON.parse(responseData);
                        responseJson.textContent = JSON.stringify(json, null, 2);
                    } catch {
                        responseJson.textContent = responseData;
                    }
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Maintenance updated successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating maintenance', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Delete Zaaer Maintenance
        async function deleteZaaerMaintenance() {
            const zaaerId = document.getElementById('deleteMaintenanceZaaerId').value;
            
            if (!zaaerId) {
                showNotification('Please enter Zaaer ID', 'warning');
                return;
            }
            
            if (!confirm('Are you sure you want to delete this maintenance record? The apartment status will be set to vacant.')) {
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Maintenance/${zaaerId}`, {
                    method: 'DELETE',
                    headers: getApiHeaders()
                });
                
                const responseSection = document.getElementById('deleteMaintenanceResponse');
                const responseJson = document.getElementById('deleteMaintenanceResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    const responseData = await response.text();
                    try {
                        const json = JSON.parse(responseData);
                        responseJson.textContent = JSON.stringify(json, null, 2);
                    } catch {
                        responseJson.textContent = responseData;
                    }
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Maintenance deleted successfully and apartment status set to vacant!', 'success');
                } else {
                    const responseData = await response.text();
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error deleting maintenance', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // ===== TAX FUNCTIONS =====
        // Create Zaaer Tax
        async function createZaaerTax() {
            const jsonText = document.getElementById('createTaxJson').value;
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Tax`, {
                    method: 'POST',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('createTaxResponse');
                const responseJson = document.getElementById('createTaxResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    try {
                        const json = JSON.parse(responseData);
                        responseJson.textContent = JSON.stringify(json, null, 2);
                    } catch {
                        responseJson.textContent = responseData;
                    }
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Tax created successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error creating tax', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }
        // Update Zaaer Tax
        async function updateZaaerTax() {
            const zaaerId = document.getElementById('updateTaxZaaerId').value;
            const jsonText = document.getElementById('updateTaxJson').value;
            
            if (!zaaerId) {
                showNotification('Please enter Zaaer ID', 'warning');
                return;
            }
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            try {
                const requestBody = JSON.parse(jsonText);
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Tax/${zaaerId}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('updateTaxResponse');
                const responseJson = document.getElementById('updateTaxResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    try {
                        const json = JSON.parse(responseData);
                        responseJson.textContent = JSON.stringify(json, null, 2);
                    } catch {
                        responseJson.textContent = responseData;
                    }
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Tax updated successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating tax', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Delete Zaaer Tax
        async function deleteZaaerTax() {
            const zaaerId = document.getElementById('deleteTaxZaaerId').value;
            
            if (!zaaerId) {
                showNotification('Please enter Zaaer ID', 'warning');
                return;
            }
            
            try {
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Tax/${zaaerId}`, {
                    method: 'DELETE',
                    headers: getApiHeaders()
                });

                const responseData = await response.text();
                const responseSection = document.getElementById('deleteTaxResponse');
                const responseJson = document.getElementById('deleteTaxResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    try {
                        const json = JSON.parse(responseData);
                        responseJson.textContent = JSON.stringify(json, null, 2);
                    } catch {
                        responseJson.textContent = responseData;
                    }
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Tax deleted successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error deleting tax', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        async function deleteZaaerBaseRate() {
            const rateId = document.getElementById('deleteBaseRateId').value;
            
            if (!rateId) {
                showNotification('Please enter Rate ID', 'warning');
                return;
            }
            
            if (!confirm('Are you sure you want to delete this base rate?')) {
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerRoomTypeRate/${rateId}`, {
                    method: 'DELETE',
                    headers: getApiHeaders()
                });
                
                const responseSection = document.getElementById('deleteBaseRateResponse');
                const responseJson = document.getElementById('deleteBaseRateResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = 'Base Rate deleted successfully (204 No Content)';
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Base Rate deleted successfully!', 'success');
                } else {
                    const responseData = await response.text();
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error deleting base rate', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Format Get All Base Rates Response JSON
        function formatGetAllBaseRatesResponse() {
            const responseJson = document.getElementById('getAllBaseRatesResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Base Rates Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in base rates response!', 'error');
                }
            } else {
                showNotification('No base rates response data to format!', 'warning');
            }
        }

        // Format Get Base Rate by ID Response JSON
        function formatGetBaseRateByIdResponse() {
            const responseJson = document.getElementById('getBaseRateByIdResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Base Rate Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in base rate response!', 'error');
                }
            } else {
                showNotification('No base rate response data to format!', 'warning');
            }
        }

        // Format Get Base Rates by Room Type Response JSON
        function formatGetBaseRatesByRoomTypeResponse() {
            const responseJson = document.getElementById('getBaseRatesByRoomTypeResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Base Rates Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in base rates response!', 'error');
                }
            } else {
                showNotification('No base rates response data to format!', 'warning');
            }
        }

        // Update Zaaer Apartment by Code
        async function updateZaaerApartmentByCode() {
            const apartmentCode = document.getElementById('updateApartmentByCodeCode').value;
            const jsonText = document.getElementById('updateApartmentByCodeJson').value;
            
            if (!apartmentCode) {
                showNotification('Please enter Apartment Code', 'warning');
                return;
            }
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            showLoading();
            try {
                const requestBody = JSON.parse(jsonText);
                const response = await fetch(`${API_BASE_URL}/api/zaaer/Apartment/code/${apartmentCode}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: JSON.stringify(requestBody)
                });
                
                const responseData = await response.text();
                
                const responseSection = document.getElementById('updateApartmentByCodeResponse');
                const responseJson = document.getElementById('updateApartmentByCodeResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Apartment updated successfully by code!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating apartment by code', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Hotel Settings Functions
        // Create Zaaer Hotel Settings
        async function createZaaerHotelSettings() {
            const jsonText = document.getElementById('createHotelSettingsJson').value;
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerHotelSettings`, {
                    method: 'POST',
                    headers: getApiHeaders(),
                    body: jsonText
                });
                
                const responseData = await response.text();
                
                const responseSection = document.getElementById('createHotelSettingsResponse');
                const responseJson = document.getElementById('createHotelSettingsResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Hotel Settings created successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error creating hotel settings', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Update Zaaer Hotel Settings
        async function updateZaaerHotelSettings() {
            const hotelId = document.getElementById('updateHotelSettingsId').value;
            const jsonText = document.getElementById('updateHotelSettingsJson').value;
            
            if (!hotelId) {
                showNotification('Please enter Hotel ID', 'warning');
                return;
            }
            
            if (!jsonText.trim()) {
                showNotification('Please enter JSON data', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerHotelSettings/${hotelId}`, {
                    method: 'PUT',
                    headers: getApiHeaders(),
                    body: jsonText
                });
                
                const responseData = await response.text();
                
                const responseSection = document.getElementById('updateHotelSettingsResponse');
                const responseJson = document.getElementById('updateHotelSettingsResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Hotel Settings updated successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error updating hotel settings', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }
        // Get All Zaaer Hotel Settings
        async function getAllZaaerHotelSettings() {
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerHotelSettings`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getAllHotelSettingsResponse');
                const responseJson = document.getElementById('getAllHotelSettingsResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Hotel Settings retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving hotel settings', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Get Zaaer Hotel Settings by ID
        async function getZaaerHotelSettingsById() {
            const hotelId = document.getElementById('getHotelSettingsById').value;
            
            if (!hotelId) {
                showNotification('Please enter Hotel ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerHotelSettings/${hotelId}`, {
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                const responseData = await response.text();
                
                const responseSection = document.getElementById('getHotelSettingsByIdResponse');
                const responseJson = document.getElementById('getHotelSettingsByIdResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Hotel Settings retrieved successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error retrieving hotel settings', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Delete Zaaer Hotel Settings
        async function deleteZaaerHotelSettings() {
            const hotelId = document.getElementById('deleteHotelSettingsId').value;
            
            if (!hotelId) {
                showNotification('Please enter Hotel ID', 'warning');
                return;
            }
            
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerHotelSettings/${hotelId}`, {
                    method: 'DELETE',
                    headers: { 'X-Hotel-Code': getCurrentHotelCode() }
                });
                
                const responseData = await response.text();
                
                const responseSection = document.getElementById('deleteHotelSettingsResponse');
                const responseJson = document.getElementById('deleteHotelSettingsResponseJson');
                
                responseSection.style.display = 'block';
                
                if (response.ok) {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#e2e8f0';
                    showNotification('✅ Hotel Settings deleted successfully!', 'success');
                } else {
                    responseJson.textContent = responseData;
                    responseJson.style.color = '#f56565';
                    showNotification('❌ Error deleting hotel settings', 'error');
                }
            } catch (error) {
                showNotification(`❌ Error: ${error.message}`, 'error');
            } finally {
                hideLoading();
            }
        }

        // Format Get All Hotel Settings Response
        function formatGetAllHotelSettingsResponse() {
            const responseJson = document.getElementById('getAllHotelSettingsResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Hotel Settings Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in hotel settings response!', 'error');
                }
            } else {
                showNotification('No hotel settings response data to format!', 'warning');
            }
        }

        // Format Get Hotel Settings by ID Response
        function formatGetHotelSettingsByIdResponse() {
            const responseJson = document.getElementById('getHotelSettingsByIdResponseJson');
            if (responseJson.textContent.trim()) {
                try {
                    const json = JSON.parse(responseJson.textContent);
                    responseJson.textContent = JSON.stringify(json, null, 2);
                    showNotification('Hotel Settings Response JSON formatted successfully!', 'success');
                } catch (error) {
                    showNotification('Invalid JSON format in hotel settings response!', 'error');
                }
            } else {
                showNotification('No hotel settings response data to format!', 'warning');
            }
        }

        // ===== ZATCA FUNCTIONS =====
        async function createZaaerZatcaDetails() {
            const jsonText = document.getElementById('createZatcaJson').value;
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerZatcaDetails`, { method:'POST', headers: getApiHeaders(), body: jsonText });
                const data = await response.text();
                const sec = document.getElementById('createZatcaResponse'); const box = document.getElementById('createZatcaResponseJson');
                sec.style.display = 'block'; box.textContent = data; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ ZATCA created!' : '❌ Error creating ZATCA', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); } finally { hideLoading(); }
        }

        async function updateZaaerZatcaDetails() {
            const id = document.getElementById('updateZatcaId').value; const jsonText = document.getElementById('updateZatcaJson').value;
            if (!id) { showNotification('Please enter Details ID', 'warning'); return; }
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerZatcaDetails/${id}`, { method:'PUT', headers: getApiHeaders(), body: jsonText });
                const data = await response.text();
                const sec = document.getElementById('updateZatcaResponse'); const box = document.getElementById('updateZatcaResponseJson');
                sec.style.display = 'block'; box.textContent = data; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ ZATCA updated!' : '❌ Error updating ZATCA', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); } finally { hideLoading(); }
        }

        async function getZaaerZatcaDetailsByHotel() {
            const hotelId = document.getElementById('getZatcaHotelId').value;
            if (!hotelId) { showNotification('Please enter Hotel ID', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerZatcaDetails/hotel/${hotelId}`, { headers: getApiHeaders() });
                const data = await response.text();
                const sec = document.getElementById('getZatcaResponse'); const box = document.getElementById('getZatcaResponseJson');
                sec.style.display = 'block'; box.textContent = data; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ ZATCA fetched!' : '❌ Error fetching ZATCA', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); } finally { hideLoading(); }
        }

        function formatGetZatcaResponse() {
            const el = document.getElementById('getZatcaResponseJson');
            if (el && el.textContent.trim()) { try { el.textContent = JSON.stringify(JSON.parse(el.textContent), null, 2); showNotification('JSON formatted', 'success'); } catch { showNotification('Invalid JSON!', 'error'); } }
        }

        // ===== NTMP FUNCTIONS =====
        async function createZaaerNtmpDetails() {
            const jsonText = document.getElementById('createNtmpJson').value;
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerNtmpDetails`, { method:'POST', headers: getApiHeaders(), body: jsonText });
                const data = await response.text();
                const sec = document.getElementById('createNtmpResponse'); const box = document.getElementById('createNtmpResponseJson');
                sec.style.display = 'block'; box.textContent = data; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ NTMP created!' : '❌ Error creating NTMP', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        async function updateZaaerNtmpDetails() {
            const id = document.getElementById('updateNtmpId').value;
            const jsonText = document.getElementById('updateNtmpJson').value;
            if (!id) { showNotification('Please enter Details ID', 'warning'); return; }
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerNtmpDetails/${id}`, { method:'PUT', headers: getApiHeaders(), body: jsonText });
                const data = await response.text();
                const sec = document.getElementById('updateNtmpResponse'); const box = document.getElementById('updateNtmpResponseJson');
                sec.style.display = 'block'; box.textContent = data; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ NTMP updated!' : '❌ Error updating NTMP', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        async function getAllZaaerNtmpDetails() {
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerNtmpDetails`, { headers: getApiHeaders() });
                const data = await response.text();
                const sec = document.getElementById('getAllNtmpResponse'); const box = document.getElementById('getAllNtmpResponseJson');
                sec.style.display = 'block'; box.textContent = data; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ NTMP fetched!' : '❌ Error fetching NTMP', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        function formatGetAllNtmpResponse() {
            const el = document.getElementById('getAllNtmpResponseJson');
            if (el && el.textContent.trim()) { try { el.textContent = JSON.stringify(JSON.parse(el.textContent), null, 2); showNotification('JSON formatted', 'success'); } catch { showNotification('Invalid JSON!', 'error'); } }
        }

        // ===== SHOMOOS FUNCTIONS =====
        async function createZaaerShomoosDetails() {
            const jsonText = document.getElementById('createShomoosJson').value;
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerShomoosDetails`, { method:'POST', headers: getApiHeaders(), body: jsonText });
                const data = await response.text();
                const sec = document.getElementById('createShomoosResponse'); const box = document.getElementById('createShomoosResponseJson');
                sec.style.display = 'block'; box.textContent = data; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Shomoos created!' : '❌ Error creating Shomoos', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        async function updateZaaerShomoosDetails() {
            const id = document.getElementById('updateShomoosId').value;
            const jsonText = document.getElementById('updateShomoosJson').value;
            if (!id) { showNotification('Please enter Details ID', 'warning'); return; }
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerShomoosDetails/${id}`, { method:'PUT', headers: getApiHeaders(), body: jsonText });
                const data = await response.text();
                const sec = document.getElementById('updateShomoosResponse'); const box = document.getElementById('updateShomoosResponseJson');
                sec.style.display = 'block'; box.textContent = data; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Shomoos updated!' : '❌ Error updating Shomoos', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        async function getAllZaaerShomoosDetails() {
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerShomoosDetails`, { headers: getApiHeaders() });
                const data = await response.text();
                const sec = document.getElementById('getAllShomoosResponse'); const box = document.getElementById('getAllShomoosResponseJson');
                sec.style.display = 'block'; box.textContent = data; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Shomoos fetched!' : '❌ Error fetching Shomoos', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); }
            finally { hideLoading(); }
        }

        function formatGetAllShomoosResponse() {
            const el = document.getElementById('getAllShomoosResponseJson');
            if (el && el.textContent.trim()) { try { el.textContent = JSON.stringify(JSON.parse(el.textContent), null, 2); showNotification('JSON formatted', 'success'); } catch { showNotification('Invalid JSON!', 'error'); } }
        }

        // ===== INTEGRATION RESPONSES FUNCTIONS =====
        async function createIntegrationResponse() {
            const jsonText = document.getElementById('createIntegrationResponseJson').value;
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerIntegrationResponses`, { method:'POST', headers: getApiHeaders(), body: jsonText });
                const data = await response.text();
                const sec = document.getElementById('createIntegrationResponseSection'); const box = document.getElementById('createIntegrationResponseResult');
                sec.style.display = 'block'; box.textContent = data; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Integration response created!' : '❌ Error creating integration response', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); } finally { hideLoading(); }
        }
        async function updateIntegrationResponse() {
            const id = document.getElementById('updateIntegrationResponseId').value;
            const jsonText = document.getElementById('updateIntegrationResponseJson').value;
            if (!id) { showNotification('Please enter Response ID', 'warning'); return; }
            if (!jsonText.trim()) { showNotification('Please enter JSON data', 'warning'); return; }
            showLoading();
            try {
                const response = await fetch(`${API_BASE_URL}/api/zaaer/ZaaerIntegrationResponses/${id}`, { method:'PUT', headers: getApiHeaders(), body: jsonText });
                const data = await response.text();
                const sec = document.getElementById('updateIntegrationResponseSection'); const box = document.getElementById('updateIntegrationResponseResult');
                sec.style.display = 'block'; box.textContent = data; box.style.color = response.ok ? '#e2e8f0' : '#f56565';
                showNotification(response.ok ? '✅ Integration response updated!' : '❌ Error updating integration response', response.ok ? 'success' : 'error');
            } catch (e) { showNotification(`❌ Error: ${e.message}`, 'error'); } finally { hideLoading(); }
        }

        // Initialize page on load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Page loaded - Starting initialization...');
            
            // Expand sidebar by default
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            if (sidebar && mainContent) {
                sidebar.classList.add('open');
                mainContent.classList.add('sidebar-open');
                console.log('✅ Sidebar expanded by default');
            } else {
                console.error('❌ Sidebar or mainContent not found');
            }

            // Check all sections exist
            const allSections = ['customers-section', 'reservations-section', 'receipts-section', 'invoices-section', 'refunds-section', 'credit-notes-section', 'room-types-section', 'building-floors-section', 'users-section', 'roles-section', 'apartments-section', 'maintenance-section', 'taxes-section', 'hotel-settings-section', 'reservation-tools-section'];
            console.log('🔍 Checking all sections exist...');
            allSections.forEach(section => {
                const element = document.getElementById(section);
                if (element) {
                    const endpointCards = element.querySelectorAll('.endpoint-card');
                    console.log(`✅ ${section}: Found with ${endpointCards.length} endpoint cards`);
                } else {
                    console.error(`❌ ${section}: NOT FOUND`);
                }
            });

            // Show customers section by default and set it as active (without notification)
            showSection('customers', false);
            console.log('🏁 Page loaded - Sidebar expanded, Customers section active');
        });
    </script>
</body>
</html>