<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¨ Multi-Tenant API Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #91838a 0%, #a5959e 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
        }

        h1 {
            color: #a1a2a5;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.2em;
        }

        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
        }

        input, select {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #a3a5aa;
        }

        .buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }

        button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        button:active {
            transform: translateY(0);
        }

        .btn-primary {
            background: #b9babb;
            color: white;
        }

        .btn-success {
            background: #798f7e;
            color: white;
        }

        .btn-warning {
            background: #ffc107;
            color: #333;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .result-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .result-header h3 {
            color: #333;
        }

        .status-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
        }

        .status-success {
            background: #d4edda;
            color: #155724;
        }

        .status-error {
            background: #f8d7da;
            color: #721c24;
        }

        .result-content {
            background: #282c34;
            color: #61dafb;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .info-box h4 {
            color: #1976D2;
            margin-bottom: 10px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #7c7c7e 0%, #97949b 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card h4 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .stat-card p {
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ Multi-Tenant API Demo</h1>
        <p class="subtitle">Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„ÙÙ†Ø§Ø¯Ù‚ - Zaaer Integration</p>

        <div class="info-box">
            <h4>ğŸ“Œ ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:</h4>
            <p>1. Ø§Ø®ØªØ± ÙƒÙˆØ¯ Ø§Ù„ÙÙ†Ø¯Ù‚ (Ù…Ø«Ù„: Dammam1)</p>
            <p>2. Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨ (GET Customers, GET Reservations, Ø¥Ù„Ø®)</p>
            <p>3. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨</p>
            <p>4. Ø³ØªØ¸Ù‡Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ø§Ù„Ø£Ø³ÙÙ„</p>
        </div>

        <div class="controls">
            <div class="control-group">
                <label>ğŸ¨ ÙƒÙˆØ¯ Ø§Ù„ÙÙ†Ø¯Ù‚ (Hotel Code)</label>
                <input type="text" id="hotelCode" value="Dammam1" placeholder="Ù…Ø«Ø§Ù„: Dammam1">
            </div>
            <div class="control-group">
                <label>ğŸŒ Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ API</label>
                <input type="text" id="apiUrl" value="/api/Customer" placeholder="/api/Customer">
            </div>
        </div>

        <div class="buttons">
            <button class="btn-primary" onclick="testAPI('GET', '/api/Customer')">
                ğŸ“‹ Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
            </button>
            <button class="btn-success" onclick="testAPI('GET', '/api/Reservation')">
                ğŸ  Ø¬Ù„Ø¨ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª
            </button>
            <button class="btn-warning" onclick="testAPI('GET', '/api/Apartment')">
                ğŸ¢ Ø¬Ù„Ø¨ Ø§Ù„Ø´Ù‚Ù‚
            </button>
            <button class="btn-danger" onclick="testWithoutHeader()">
                âŒ Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø¯ÙˆÙ† Header
            </button>
        </div>

        <div class="stats">
            <div class="stat-card">
                <h4 id="requestCount">0</h4>
                <p>Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</p>
            </div>
            <div class="stat-card">
                <h4 id="successCount">0</h4>
                <p>Ù†Ø¬Ø­</p>
            </div>
            <div class="stat-card">
                <h4 id="errorCount">0</h4>
                <p>ÙØ´Ù„</p>
            </div>
        </div>

        <div class="result-container">
            <div class="result-header">
                <h3>ğŸ“Š Ø§Ù„Ù†ØªÙŠØ¬Ø©</h3>
                <span class="status-badge" id="statusBadge">Ø¬Ø§Ù‡Ø²</span>
            </div>
            <div class="result-content" id="result">
Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø·Ù„Ø¨...

ğŸ’¡ Ù†ØµØ§Ø¦Ø­:
- ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ API
- Ø§Ø³ØªØ®Ø¯Ù… ÙƒÙˆØ¯ ÙÙ†Ø¯Ù‚ ØµØ­ÙŠØ­ (Dammam1)
- ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù€ Console Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©
            </div>
        </div>
    </div>

    <script>
        let requestCount = 0;
        let successCount = 0;
        let errorCount = 0;

        function updateStats() {
            document.getElementById('requestCount').textContent = requestCount;
            document.getElementById('successCount').textContent = successCount;
            document.getElementById('errorCount').textContent = errorCount;
        }

        async function testAPI(method, endpoint) {
            const hotelCode = document.getElementById('hotelCode').value;
            const resultDiv = document.getElementById('result');
            const statusBadge = document.getElementById('statusBadge');

            requestCount++;
            updateStats();

            resultDiv.textContent = 'â³ Ø¬Ø§Ø±ÙŠ ØªÙ†ÙÙŠØ° Ø§Ù„Ø·Ù„Ø¨...\n';
            statusBadge.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°...';
            statusBadge.className = 'status-badge';

            try {
                const response = await fetch(endpoint, {
                    method: method,
                    headers: {
                        'X-Hotel-Code': hotelCode,
                        'Content-Type': 'application/json'
                    }
                });

                // Get response as text first
                const responseText = await response.text();
                
                // Try to parse as JSON
                let data;
                let isJson = false;
                try {
                    data = JSON.parse(responseText);
                    isJson = true;
                } catch (e) {
                    // Not JSON, use as plain text
                    data = responseText;
                }
                
                if (response.ok) {
                    successCount++;
                    statusBadge.textContent = `âœ… Ù†Ø¬Ø­ - ${response.status}`;
                    statusBadge.className = 'status-badge status-success';
                    
                    resultDiv.textContent = `âœ… Ù†Ø¬Ø­ Ø§Ù„Ø·Ù„Ø¨!\n\n`;
                    resultDiv.textContent += `Ø§Ù„Ø­Ø§Ù„Ø©: ${response.status} ${response.statusText}\n`;
                    resultDiv.textContent += `ÙƒÙˆØ¯ Ø§Ù„ÙÙ†Ø¯Ù‚: ${hotelCode}\n`;
                    resultDiv.textContent += `Ù†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨: ${method} ${endpoint}\n\n`;
                    resultDiv.textContent += `Ø¹Ø¯Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬: ${Array.isArray(data) ? data.length : 1}\n\n`;
                    resultDiv.textContent += `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n`;
                    resultDiv.textContent += `Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:\n`;
                    resultDiv.textContent += `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n`;
                    resultDiv.textContent += isJson ? JSON.stringify(data, null, 2) : data;
                } else {
                    errorCount++;
                    statusBadge.textContent = `âŒ ÙØ´Ù„ - ${response.status}`;
                    statusBadge.className = 'status-badge status-error';
                    
                    resultDiv.textContent = `âŒ ÙØ´Ù„ Ø§Ù„Ø·Ù„Ø¨!\n\n`;
                    resultDiv.textContent += `Ø§Ù„Ø­Ø§Ù„Ø©: ${response.status} ${response.statusText}\n`;
                    resultDiv.textContent += `ÙƒÙˆØ¯ Ø§Ù„ÙÙ†Ø¯Ù‚: ${hotelCode}\n\n`;
                    resultDiv.textContent += `Ø§Ù„Ø®Ø·Ø£:\n`;
                    resultDiv.textContent += isJson ? JSON.stringify(data, null, 2) : data;
                }

                updateStats();
                console.log('Response:', data);
            } catch (error) {
                errorCount++;
                updateStats();
                
                statusBadge.textContent = 'âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„';
                statusBadge.className = 'status-badge status-error';
                
                resultDiv.textContent = `âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„!\n\n`;
                resultDiv.textContent += `Ø§Ù„Ø±Ø³Ø§Ù„Ø©: ${error.message}\n\n`;
                resultDiv.textContent += `ğŸ’¡ ØªØ£ÙƒØ¯ Ù…Ù†:\n`;
                resultDiv.textContent += `- ØªØ´ØºÙŠÙ„ API\n`;
                resultDiv.textContent += `- ØµØ­Ø© Ø§Ù„Ø±Ø§Ø¨Ø·\n`;
                resultDiv.textContent += `- Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª\n`;
                
                console.error('Error:', error);
            }
        }

        async function testWithoutHeader() {
            const resultDiv = document.getElementById('result');
            const statusBadge = document.getElementById('statusBadge');

            requestCount++;
            updateStats();

            resultDiv.textContent = 'â³ Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø¯ÙˆÙ† X-Hotel-Code Header...\n';
            statusBadge.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°...';
            statusBadge.className = 'status-badge';

            try {
                const response = await fetch('/api/Customer', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                        // Ù„Ø§ ÙŠÙˆØ¬Ø¯ X-Hotel-Code
                    }
                });

                // Get response as text first
                const responseText = await response.text();
                
                // Try to parse as JSON
                let data;
                let isJson = false;
                try {
                    data = JSON.parse(responseText);
                    isJson = true;
                } catch (e) {
                    // Not JSON, use as plain text
                    data = responseText;
                }
                
                errorCount++;
                updateStats();
                
                statusBadge.textContent = `âš ï¸ Ù…ØªÙˆÙ‚Ø¹ - ${response.status}`;
                statusBadge.className = 'status-badge status-error';
                
                resultDiv.textContent = `âš ï¸ Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø¯ÙˆÙ† Header\n\n`;
                resultDiv.textContent += `Ø§Ù„Ø­Ø§Ù„Ø©: ${response.status} ${response.statusText}\n`;
                resultDiv.textContent += `âœ… Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù…ØªÙˆÙ‚Ø¹Ø©: ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ±Ø¬Ø¹ 401 Unauthorized\n\n`;
                resultDiv.textContent += `Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©:\n`;
                resultDiv.textContent += isJson ? JSON.stringify(data, null, 2) : data;

            } catch (error) {
                errorCount++;
                updateStats();
                
                resultDiv.textContent = `âŒ Ø®Ø·Ø£: ${error.message}`;
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ API URL Ø¹Ù†Ø¯ Ø§Ù„ØªØºÙŠÙŠØ±
        document.getElementById('apiUrl').addEventListener('change', (e) => {
            console.log('API URL updated:', e.target.value);
        });
    </script>
</body>
</html>

